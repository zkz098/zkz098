{
    "version": "https://jsonfeed.org/version/1",
    "title": "望月阁",
    "subtitle": "kaitaku",
    "icon": "https://www.kaitaku.xyz/assets/favicon.ico",
    "description": "一个萌新的学习笔记",
    "home_page_url": "https://www.kaitaku.xyz",
    "items": [
        {
            "id": "https://www.kaitaku.xyz/webbuild/nginx-modsec/",
            "url": "https://www.kaitaku.xyz/webbuild/nginx-modsec/",
            "title": "使用ModSecurity保护Nginx站点",
            "date_published": "2023-01-20T13:27:18.000Z",
            "content_html": "<h1 id=\"使用modsecurity保护nginx站点\"><a class=\"anchor\" href=\"#使用modsecurity保护nginx站点\">#</a> 使用 ModSecurity 保护 Nginx 站点</h1>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL1NwaWRlckxhYnMvTW9kU2VjdXJpdHk=\">ModSecurity</span> 是一个开源的跨平台 WAF (WEB 应用程序防火墙) <br />\n本次给 Nginx 安装 ModSecurity WAF 并使用 OWASP ModSecurity 规则集，基于 Ubuntu 22 (jammy) 和宝塔面板 <br />\n命令的默认执行位置都为 <code>~(root目录)</code> ，且均使用 root 用户执行 <br />\n在执行下列步骤前，请编译安装 <code>nginx 1.23</code>  或更高版本</p>\n<h2 id=\"准备工作\"><a class=\"anchor\" href=\"#准备工作\">#</a> 准备工作</h2>\n<p>执行下列指令安装前置包:</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">apt</span> <span class=\"token function\">install</span> g++ flex bison <span class=\"token function\">curl</span> apache2-dev doxygen libyajl-dev ssdeep liblua5.2-dev libgeoip-dev libtool dh-autoreconf libcurl4-gnutls-dev libxml2 libpcre++-dev libxml2-dev <span class=\"token function\">git</span> liblmdb-dev libpkgconf3 lmdb-doc pkgconf zlib1g-dev libssl-dev libfuzzy-dev <span class=\"token parameter variable\">-y</span></pre></td></tr></table></figure><h2 id=\"编译ssdeep\"><a class=\"anchor\" href=\"#编译ssdeep\">#</a> 编译 ssdeep</h2>\n<div class=\"note info\">\n<p>此步是因为博主在编译 ModSecurity 时无法识别 apt 安装的 ssdeep，可以先跳过此步，后续配置时出现问题再执行</p>\n</div>\n<p>执行下列指令即可:</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">wget</span> https://github.com/ssdeep-project/ssdeep/releases/download/release-2.14.1/ssdeep-2.14.1.tar.gz</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">tar</span> zxf ssdeep-2.14.1.tar.gz</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token builtin class-name\">cd</span> ssdeep-2.14.1</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>./configure</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token function\">make</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token function\">make</span> <span class=\"token function\">install</span></pre></td></tr></table></figure><h2 id=\"编译modsecurity\"><a class=\"anchor\" href=\"#编译modsecurity\">#</a> 编译 ModSecurity</h2>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">wget</span> https://github.com/SpiderLabs/ModSecurity/releases/download/v3.0.8/modsecurity-v3.0.8.tar.gz</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">tar</span> xzf modsecurity-v3.0.8.tar.gz</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token builtin class-name\">cd</span> modsecurity-v3.0.8</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>./build.sh</pre></td></tr></table></figure><p>出现 <code>fatal: not a git repository (or any of the parent directories): .git</code>  这条信息是可以忽略的</p>\n<p>随后:</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>./configure</pre></td></tr></table></figure><p>等到命令执行完成后，请确保 <code>---</code>  后面的内容冒号后均为 <code>enable</code> 、 <code>disable</code>  和 <code>found</code>  <br />\n如果出现 <code>ssdeep: not found</code>  请参考前面的步骤执行编译安装 ssdeep<br />\n 其他 <code>not found</code>  请使用 apt 安装对应包 (一般不会出现)</p>\n<p>然后:</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">make</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">make</span> <span class=\"token function\">install</span></pre></td></tr></table></figure><p>即可</p>\n<h2 id=\"安装-nginx-modsecurity-支持模块\"><a class=\"anchor\" href=\"#安装-nginx-modsecurity-支持模块\">#</a> 安装 Nginx ModSecurity 支持模块</h2>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token builtin class-name\">cd</span> /www/server</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">git</span> clone https://github.com/SpiderLabs/ModSecurity-nginx.git</pre></td></tr></table></figure><p>编辑 <code>/www/server/panel/install/nginx.sh</code>  文件，在 <code>./configure</code>  这一行的末端添加:</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>--add-module<span class=\"token operator\">=</span>/www/server/ModSecurity-nginx</pre></td></tr></table></figure><p>随后:</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">sh</span> /www/server/panel/install/nginx.sh <span class=\"token function\">install</span> <span class=\"token number\">1.23</span></pre></td></tr></table></figure><h2 id=\"使用owasp规则集\"><a class=\"anchor\" href=\"#使用owasp规则集\">#</a> 使用 OWASP 规则集</h2>\n<h3 id=\"下载并配置规则集\"><a class=\"anchor\" href=\"#下载并配置规则集\">#</a> 下载并配置规则集</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">mkdir</span> /www/server/nginx/conf/modsecurity</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token builtin class-name\">cd</span> ModSecurity</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token function\">cp</span> modsecurity.conf-recommended /www/server/nginx/conf/modsecurity/modsecurity.conf</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token function\">cp</span> unicode.mapping /www/server/nginx/conf/modsecurity</pre></td></tr></table></figure><p>下载规则:</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">wget</span> http://www.modsecurity.cn/download/corerule/owasp-modsecurity-crs-3.3-dev.zip</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">unzip</span> owasp-modsecurity-crs-3.3-dev.zip</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token builtin class-name\">cd</span> owasp-modsecurity-crs-3.3-dev</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token function\">cp</span> crs-setup.conf.example /www/server/nginx/conf/modsecurity/crs-setup.conf</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token function\">cp</span> <span class=\"token parameter variable\">-r</span> rules/ /www/server/nginx/conf/modsecurity</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token builtin class-name\">cd</span> /www/server/nginx/conf/modsecurity/rules/</pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token function\">cp</span> REQUEST-900-EXCLUSION-RULES-BEFORE-CRS.conf.example REQUEST-900-EXCLUSION-RULES-BEFORE-CRS.conf.example.back</pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token function\">cp</span> RESPONSE-999-EXCLUSION-RULES-AFTER-CRS.conf.example RESPONSE-999-EXCLUSION-RULES-AFTER-CRS.conf.example.back</pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token function\">cp</span> RESPONSE-999-EXCLUSION-RULES-AFTER-CRS.conf.example.back RESPONSE-999-EXCLUSION-RULES-AFTER-CRS.conf</pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token function\">cp</span> REQUEST-900-EXCLUSION-RULES-BEFORE-CRS.conf.example.back REQUEST-900-EXCLUSION-RULES-BEFORE-CRS.conf</pre></td></tr></table></figure><h3 id=\"修改配置\"><a class=\"anchor\" href=\"#修改配置\">#</a> 修改配置</h3>\n<p>修改 nginx 配置，在 <code>http</code>  层添加如下配置:</p>\n<figure class=\"highlight nginx\"><figcaption data-lang=\"nginx\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token directive\"><span class=\"token keyword\">modsecurity</span> <span class=\"token boolean\">on</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token directive\"><span class=\"token keyword\">modsecurity_rules_file</span> /www/server/nginx/conf/modsecurity/modsecurity.conf</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>编辑 <code>modsecurity.conf</code> , 将 <code>SecRuleEngine DetectionOnly</code>  修改为 <code>SecRuleEngine On</code> ，并在后面添加如下内容:</p>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>Include &#x2F;www&#x2F;server&#x2F;nginx&#x2F;conf&#x2F;modsecurity&#x2F;crs-setup.conf</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>Include &#x2F;www&#x2F;server&#x2F;nginx&#x2F;conf&#x2F;modsecurity&#x2F;rules&#x2F;*.conf</pre></td></tr></table></figure><h2 id=\"验证安装\"><a class=\"anchor\" href=\"#验证安装\">#</a> 验证安装</h2>\n<p>打开如下地址:</p>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>&lt;url&gt;&#x2F;?param&#x3D;*&gt;&lt;script&gt;alert(1)&lt;&#x2F;script&gt;</pre></td></tr></table></figure><p>请将 <code>&lt;url&gt;</code>  替换为你的测试地址 (不需要带括号)<br />\n 如果出现 <code>403</code>  则安装成功</p>\n<h2 id=\"参考文章\"><a class=\"anchor\" href=\"#参考文章\">#</a> 参考文章</h2>\n<ul>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9raWZhcnVuaXguY29tL2luc3RhbGwtbW9kc2VjdXJpdHktMy13aXRoLW5naW54LW9uLXVidW50dS8=\">Install ModSecurity 3 with Nginx on Ubuntu 22.04</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM4NjI2MDQzL2FydGljbGUvZGV0YWlscy8xMDUwMjc0MDQ=\">WAF 简介及 ModSecurity-nginx 搭建</span></li>\n</ul>\n",
            "tags": [
                "网站建设",
                "nginx"
            ]
        },
        {
            "id": "https://www.kaitaku.xyz/webbuild/shokaXplugin/",
            "url": "https://www.kaitaku.xyz/webbuild/shokaXplugin/",
            "title": "shokaX主题插件文档",
            "date_published": "2023-01-13T12:41:21.000Z",
            "content_html": "<h1 id=\"什么是shokax插件\"><a class=\"anchor\" href=\"#什么是shokax插件\">#</a> 什么是 shokaX 插件</h1>\n<p>shokaX 插件系统提供了一个无需修改主题文件的魔改方法 <br />\n主要基于 <code>hexo filter</code>  功能实现<br />\n<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL3prejA5OC9hd2Vzb21lLXNob2thWA==\"> awesome-shokaX</span> 中有大部分 shokaX 插件</p>\n<div class=\"note info\">\n<p>此插件系统高度借鉴于 Next, 部分 Next 插件甚至可以直接运行 (仅针对部分注入点)</p>\n</div>\n<h1 id=\"如何安装插件\"><a class=\"anchor\" href=\"#如何安装插件\">#</a> 如何安装插件</h1>\n<h2 id=\"script式插件\"><a class=\"anchor\" href=\"#script式插件\">#</a> script 式插件</h2>\n<p>此类插件为文件夹式，一般由一个 js 文件和一个 views 文件夹组成，安装步骤如下:</p>\n<ol>\n<li>在 hexo 环境根目录下创建 <code>scripts</code>  文件夹，并将 js 文件放置于其中</li>\n<li>将 views 文件夹复制到 hexo 环境根目录下</li>\n<li>如有 <code>README.MD</code>  文件请查看其中说明</li>\n</ol>\n<p>随后 <code>hexo s</code>  即可</p>\n<h2 id=\"npm包式\"><a class=\"anchor\" href=\"#npm包式\">#</a> npm 包式</h2>\n<p>此类插件为 npm 包，直接使用包管理器安装即可</p>\n<h1 id=\"如何编写插件\"><a class=\"anchor\" href=\"#如何编写插件\">#</a> 如何编写插件</h1>\n<h2 id=\"在开始之前\"><a class=\"anchor\" href=\"#在开始之前\">#</a> 在开始之前</h2>\n<h3 id=\"导言\"><a class=\"anchor\" href=\"#导言\">#</a> 导言</h3>\n<p>shokaX 插件的 API 和 NextInjectAPI 高度一致，所以本文未覆盖到的点位可以在评论区咨询或者参阅 NextInjectsAPI</p>\n<div class=\"note info\">\n<p>shokaX 插件基于 hexo script 实现，因此你应该有一些编写 hexo script 的经验</p>\n</div>\n<h3 id=\"注入点\"><a class=\"anchor\" href=\"#注入点\">#</a> 注入点</h3>\n<p>shokaX 插件在插入模板时需要指定点位，截止本文写就时，可用点位见下表:<br />\n 模板点位:</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">代码名</th>\n<th style=\"text-align:left\">点位</th>\n<th style=\"text-align:left\">描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">head</td>\n<td style=\"text-align:left\">文件头部</td>\n<td style=\"text-align:left\">在 <code>&lt;/head&gt;</code>  标签前注入模板</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">sidebar</td>\n<td style=\"text-align:left\">侧栏</td>\n<td style=\"text-align:left\">在 social 区域上方注入模板</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">rightNav</td>\n<td style=\"text-align:left\">导航栏右侧</td>\n<td style=\"text-align:left\">在日夜模式切换和搜索的右侧注入模板</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">postMeta</td>\n<td style=\"text-align:left\">文章信息</td>\n<td style=\"text-align:left\">在 card 的字数右侧注入模板</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">postBodyEnd</td>\n<td style=\"text-align:left\">文章尾部</td>\n<td style=\"text-align:left\">在文章的尾部注入模板</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">footer</td>\n<td style=\"text-align:left\">页面底部</td>\n<td style=\"text-align:left\">在页面底部注入模板</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">comment</td>\n<td style=\"text-align:left\">评论区</td>\n<td style=\"text-align:left\">在评论区注入模板 (在主题评论上方)</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">bodyEnd</td>\n<td style=\"text-align:left\">文件尾部</td>\n<td style=\"text-align:left\">在 <code>&lt;/body&gt;</code>  标签前注入模板</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">status</td>\n<td style=\"text-align:left\">页脚状态</td>\n<td style=\"text-align:left\">在备案号及版权说明之前</td>\n</tr>\n</tbody>\n</table>\n<p>样式点位:</p>\n<div class=\"note info\">\n<p>所有样式点位注入时均可覆盖主题样式</p>\n</div>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">代码名</th>\n<th style=\"text-align:left\">点位</th>\n<th style=\"text-align:left\">描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">variable</td>\n<td style=\"text-align:left\">变量</td>\n<td style=\"text-align:left\">注入 CSS 变量</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">mixin</td>\n<td style=\"text-align:left\">混合</td>\n<td style=\"text-align:left\">注入 mixin</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">style</td>\n<td style=\"text-align:left\">样式</td>\n<td style=\"text-align:left\">注入 CSS 样式</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"基础语法\"><a class=\"anchor\" href=\"#基础语法\">#</a> 基础语法</h2>\n<h3 id=\"注入模板\"><a class=\"anchor\" href=\"#注入模板\">#</a> 注入模板</h3>\n<p>在一切之前，你应该创建一个 js 文件，随后写入如下内容:</p>\n<figure class=\"highlight javascript\"><figcaption data-lang=\"javascript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>hexo<span class=\"token punctuation\">.</span>extend<span class=\"token punctuation\">.</span>filter<span class=\"token punctuation\">.</span><span class=\"token function\">register</span><span class=\"token punctuation\">(</span><span class=\"token string\">'theme_inject'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">injects</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>这段代码的意思是注册一个基于 <code>theme_inject</code>  事件的过滤器 <br />\n然后准备一个 pug 文件，下面以 <code>example.pug</code>  作为例子</p>\n<figure class=\"highlight pug\"><figcaption data-lang=\"pug\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\">div<span class=\"token attributes\"><span class=\"token punctuation\">(</span><span class=\"token attr-name\">id</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\"><span class=\"token string\">\"test\"</span></span><span class=\"token punctuation\">)</span></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\t<span class=\"token tag\">p<span class=\"token attributes\"><span class=\"token punctuation\">(</span><span class=\"token attr-name\">id</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\"><span class=\"token string\">\"test1\"</span></span><span class=\"token punctuation\">)</span></span></span> <span class=\"token plain-text\">hello world</span></pre></td></tr></table></figure><div class=\"note info\">\n<p>如果是 js 文件式，应将模板和样式放置于 <code>views</code>  文件夹中，npm 式与 js 平级即可</p>\n</div>\n<p>随后修改 js 文件:</p>\n<figure class=\"highlight javascript\"><figcaption data-lang=\"javascript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>hexo<span class=\"token punctuation\">.</span>extend<span class=\"token punctuation\">.</span>filter<span class=\"token punctuation\">.</span><span class=\"token function\">register</span><span class=\"token punctuation\">(</span><span class=\"token string\">'theme_inject'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">injects</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    injects<span class=\"token punctuation\">.</span>footer<span class=\"token punctuation\">.</span><span class=\"token function\">file</span><span class=\"token punctuation\">(</span><span class=\"token string\">'example'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'views/example.pug'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span><span class=\"token literal-property property\">cache</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>随后启动 <code>hexo s</code> , 你会发现页面底部出现了 <code>hello world</code> <br />\n 这行代码的意义如下:</p>\n<figure class=\"highlight javascript\"><figcaption data-lang=\"javascript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>injects<span class=\"token punctuation\">.</span> <span class=\"token comment\">// 此处为过滤器的传入参数，即为 shokaXInjectAPI</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>footer<span class=\"token punctuation\">.</span> <span class=\"token comment\">// 此处为注入点，可参考上文的代码名</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token function\">file</span><span class=\"token punctuation\">(</span> <span class=\"token comment\">// 直接注入一个文件</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token string\">'example'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 名称，应当好记且不重复</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>\t<span class=\"token string\">'views/example.pug'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 文件，以 hexo 环境根目录为根目录</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//locals 变量</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\t<span class=\"token punctuation\">&#123;</span><span class=\"token literal-property property\">cache</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">&#125;</span> <span class=\"token comment\">// 是否需要缓存 (如果组件内容随页面而变动，请填 false)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>此外，还有 <code>raw</code>  方法，格式为:</p>\n<figure class=\"highlight javascript\"><figcaption data-lang=\"javascript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">raw</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token string\">'example'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 名称</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\t<span class=\"token string\">'&lt;p>hello world&lt;/p>'</span> <span class=\"token comment\">// 模板</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h3 id=\"注入样式\"><a class=\"anchor\" href=\"#注入样式\">#</a> 注入样式</h3>\n<p>还是这个 js, 自己准备一个 <code>example.styl</code>  放置于 <code>views</code>  文件夹，修改代码为:</p>\n<figure class=\"highlight javascript\"><figcaption data-lang=\"javascript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>hexo<span class=\"token punctuation\">.</span>extend<span class=\"token punctuation\">.</span>filter<span class=\"token punctuation\">.</span><span class=\"token function\">register</span><span class=\"token punctuation\">(</span><span class=\"token string\">'theme_inject'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">injects</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    injects<span class=\"token punctuation\">.</span>footer<span class=\"token punctuation\">.</span><span class=\"token function\">file</span><span class=\"token punctuation\">(</span><span class=\"token string\">'example'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'views/example.pug'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span><span class=\"token literal-property property\">cache</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    injects<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token string\">'views/example.styl'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>代码意义同上，但 style 点位仅有 push 方法</p>\n<h2 id=\"更高级一点\"><a class=\"anchor\" href=\"#更高级一点\">#</a> 更高级一点</h2>\n<h3 id=\"插件格式\"><a class=\"anchor\" href=\"#插件格式\">#</a> 插件格式</h3>\n<p>这里说明一下 shokaX 插件格式，以便在 <code>awesome-shokaX</code>  中发布，格式如下:</p>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>views &#x2F;&#x2F; 储存模板和样式 (文件夹)</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>xxx.js&#x2F;&#x2F; 插件主程序</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>README.MD&#x2F;&#x2F; 插件的自述和注意事项</pre></td></tr></table></figure><p>npm 包只需要发布即可</p>\n<h3 id=\"常见问题\"><a class=\"anchor\" href=\"#常见问题\">#</a> 常见问题</h3>\n<p>在 npm 中发布的包中，shokaXInjectsAPI 的路径应使用如下格式:</p>\n<figure class=\"highlight javascript\"><figcaption data-lang=\"javascript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>path<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">'file.xxx'</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h1 id=\"结语\"><a class=\"anchor\" href=\"#结语\">#</a> 结语</h1>\n<p>如果有本文未覆盖到的点位或出现问题，可在评论区询问</p>\n",
            "tags": [
                "网站建设",
                "shokaX",
                "shokaX"
            ]
        },
        {
            "id": "https://www.kaitaku.xyz/webbuild/shokaXFAQ/",
            "url": "https://www.kaitaku.xyz/webbuild/shokaXFAQ/",
            "title": "ShokaX常见问题",
            "date_published": "2023-01-07T12:43:14.000Z",
            "content_html": "<h1 id=\"导语\"><a class=\"anchor\" href=\"#导语\">#</a> 导语</h1>\n<p>经过 4 个月的开发<span class=\"spoiler\" title=\"你知道得太多了\">摸鱼</span>目前 shokaX 已经基本可用了，但存在一些常见问题，本文章进行统一回答 <br />\n这是 2023 年的第一篇文章，也是本网站一周年时所写的<span class=\"spoiler\" title=\"你知道得太多了\">这个懒狗已经不想写年终总结了</span></p>\n<h1 id=\"常见问题\"><a class=\"anchor\" href=\"#常见问题\">#</a> 常见问题</h1>\n<h2 id=\"代码块错位问题\"><a class=\"anchor\" href=\"#代码块错位问题\">#</a> 代码块错位问题</h2>\n<p>例如代码块没有上面的窗口部分，绿色按钮位置错误等 <br />\n此问题在 shoka 时期就已存在，请按照下列步骤排查问题:</p>\n<ol>\n<li><code>hexo</code>  的 <code>highlight</code>  和 <code>prism</code>  选项的 <code>enable</code>  是否关闭，未关闭请关闭</li>\n<li>请检查渲染器是否为最新版。 <code>0.1.3-fix</code>  系列的渲染器代码高亮均存在问题</li>\n<li>若均无问题请前往 github 反馈 BUG</li>\n</ol>\n<h2 id=\"最新评论问题\"><a class=\"anchor\" href=\"#最新评论问题\">#</a> 最新评论问题</h2>\n<p>部分情况下最新评论显示为 Vue 模板 <br />\n这个是已知问题，是由于 PjaxScript 更新问题导致的 <br />\n目前暂无解决方案，理论上刷新即可显示</p>\n<h2 id=\"部分功能难以或无法使用\"><a class=\"anchor\" href=\"#部分功能难以或无法使用\">#</a> 部分功能难以或无法使用</h2>\n<p>正常现象，目前 shokaX 仍处于高强度开发期，大量功能缺少文档或未经测试，如果你发现了类似的问题可在评论区或 github 反馈</p>\n<h2 id=\"如何为shokax做贡献\"><a class=\"anchor\" href=\"#如何为shokax做贡献\">#</a> 如何为 shokaX 做贡献</h2>\n<p>请参考 github wiki 的二次开发指南 <br />\n插件功能开发已完成，API 参见相关文章</p>\n",
            "tags": [
                "网站建设",
                "shokaX",
                "shokaX"
            ]
        },
        {
            "id": "https://www.kaitaku.xyz/webbuild/shokaX/",
            "url": "https://www.kaitaku.xyz/webbuild/shokaX/",
            "title": "Hexo主题shokaX文档",
            "date_published": "2022-12-17T06:59:03.000Z",
            "content_html": "<h1 id=\"shokax是什么\"><a class=\"anchor\" href=\"#shokax是什么\">#</a> shokaX 是什么</h1>\n<p>一个 <span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==\">shoka 主题</span> 的二次开发版，截止文章发布时尚无正式版 (github 中的开发版可供测试使用) <br />\nshokaX 的目标是建设一个更易使用和开发的主题，截止此文章写就时支持如下功能:</p>\n<ul>\n<li>支持 twikoo、gitalk、giscus 和 waline 评论系统</li>\n<li>原生 PWA 支持</li>\n<li>注入 js 和 css 支持</li>\n<li>自定义 font</li>\n<li>CSS 渐变作为文章封面</li>\n<li>一些小组件</li>\n<li>现代化的插件系统</li>\n<li>使用 typescript 进行类型标注</li>\n</ul>\n<div class=\"note info\">\n<p>shokaX 仍在开发中，发现 BUG 或有建议 <span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL3prejA5OC9oZXhvLXRoZW1lLXNob2thWA==\">点我</span> 跳转到 github 仓库</p>\n</div>\n<div class=\"note info\">\n<p>本主题采用 GPL 3 协议开源，欢迎 fork 和提交 PR <br />\nnpm 上的主题包名为 <code>hexo-theme-shokax</code></p>\n</div>\n<h1 id=\"如何安装\"><a class=\"anchor\" href=\"#如何安装\">#</a> 如何安装？</h1>\n<h2 id=\"安装主题\"><a class=\"anchor\" href=\"#安装主题\">#</a> 安装主题</h2>\n<p>shokaX 的安装基本与 shoka 相同，但是 md 渲染器需要使用<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL3prejA5OC9oZXhvLXJlbmRlcmVyLW11bHRpLW5leHQtbWFya2Rvd24taXQ=\"> hexo-renderer-multi-next-markdown-it</span> <br />\n <code>shokaX-CLI</code>  只负责安装主题，配置见下文</p>\n<div class=\"note warning\">\n<p>在执行下面的命令前请使用 <code>hexo init</code>  初始化 hexo 环境</p>\n</div>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">npm</span> <span class=\"token function\">install</span> shokax-cli <span class=\"token parameter variable\">--location</span><span class=\"token operator\">=</span>global</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>SXC <span class=\"token function\">install</span> shokaX</pre></td></tr></table></figure><div class=\"note danger\">\n<p>如果从 shoka 主题迁移，请卸载 <code>hexo-symbols-count-time</code>  插件</p>\n</div>\n<h2 id=\"更改配置\"><a class=\"anchor\" href=\"#更改配置\">#</a> 更改配置</h2>\n<div class=\"note info\">\n<p>更改根目录 <code>_config.yml</code>  中的 <code>theme</code>  为 <code>shokaX</code>  (SXC 默认 origin 或 npm 安装修改为 <code>shokax</code> ) <br />\n请注意，本主题仅在 npm 上使用的是 <code>shokax</code> , 其他情况下均为 <code>shokaX</code></p>\n</div>\n<p>下面的配置大部分与 shoka 相同:</p>\n<figure class=\"highlight yaml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">markdown</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token key atrule\">render</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># 渲染器设置</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token key atrule\">html</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span> <span class=\"token comment\"># 过滤 HTML 标签</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token key atrule\">xhtmlOut</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span> <span class=\"token comment\"># 使用 '/' 来闭合单标签 （比如 &lt;br />）。</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token key atrule\">breaks</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span> <span class=\"token comment\"># 转换段落里的 '\\n' 到 &lt;br>。</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token key atrule\">linkify</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span> <span class=\"token comment\"># 将类似 URL 的文本自动转换为链接。</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token key atrule\">typographer</span><span class=\"token punctuation\">:</span> </pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token key atrule\">quotes</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'“”‘’'</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token key atrule\">plugins</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># markdown-it 插件设置</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">plugin</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> markdown<span class=\"token punctuation\">-</span>it<span class=\"token punctuation\">-</span>toc<span class=\"token punctuation\">-</span>and<span class=\"token punctuation\">-</span>anchor</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token key atrule\">enable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token key atrule\">options</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># 文章目录以及锚点应用的 class 名称，shoka 主题必须设置成这样</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>          <span class=\"token key atrule\">tocClassName</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'toc'</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>          <span class=\"token key atrule\">anchorClassName</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'anchor'</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">plugin</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> markdown<span class=\"token punctuation\">-</span>it<span class=\"token punctuation\">-</span>multimd<span class=\"token punctuation\">-</span>table</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token key atrule\">enable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token key atrule\">options</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>          <span class=\"token key atrule\">multiline</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>          <span class=\"token key atrule\">rowspan</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>          <span class=\"token key atrule\">headerless</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">plugin</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> ./markdown<span class=\"token punctuation\">-</span>it<span class=\"token punctuation\">-</span>furigana</pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        <span class=\"token key atrule\">enable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token key atrule\">options</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>          <span class=\"token key atrule\">fallbackParens</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"()\"</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">plugin</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> ./markdown<span class=\"token punctuation\">-</span>it<span class=\"token punctuation\">-</span>spoiler</pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        <span class=\"token key atrule\">enable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>        <span class=\"token key atrule\">options</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>          <span class=\"token key atrule\">title</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"你知道得太多了\"</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token key atrule\">minify</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>  <span class=\"token key atrule\">html</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>    <span class=\"token key atrule\">enable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>    <span class=\"token key atrule\">exclude</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># 排除 hexo-feed 用到的模板文件</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token string\">'**/json.ejs'</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token string\">'**/atom.ejs'</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token string\">'**/rss.ejs'</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>  <span class=\"token key atrule\">css</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>    <span class=\"token key atrule\">enable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>    <span class=\"token key atrule\">exclude</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token string\">'**/*.min.css'</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>  <span class=\"token key atrule\">js</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>    <span class=\"token key atrule\">enable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>    <span class=\"token key atrule\">mangle</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>      <span class=\"token key atrule\">toplevel</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span> <span class=\"token comment\">#如果 js 压缩错误请删除此行</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>    <span class=\"token key atrule\">output</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>    <span class=\"token key atrule\">compress</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>    <span class=\"token key atrule\">exclude</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token string\">'**/*.min.js'</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre></pre></td></tr><tr><td data-num=\"54\"></td><td><pre><span class=\"token key atrule\">autoprefixer</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>  <span class=\"token key atrule\">exclude</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>    <span class=\"token punctuation\">-</span> <span class=\"token string\">'*.min.css'</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre></pre></td></tr><tr><td data-num=\"58\"></td><td><pre><span class=\"token comment\"># 请注意，如果使用 SXC 的默认 origin 或者 npm 安装主题，请不要使用下面的 feed 配置</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre><span class=\"token key atrule\">feed</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>  <span class=\"token key atrule\">limit</span><span class=\"token punctuation\">:</span> <span class=\"token number\">20</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>  <span class=\"token key atrule\">order_by</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"-date\"</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>  <span class=\"token key atrule\">tag_dir</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre>  <span class=\"token key atrule\">category_dir</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre>  <span class=\"token key atrule\">rss</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre>    <span class=\"token key atrule\">enable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre>    <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"themes/shokaX/layout/_alternate/rss.ejs\"</span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>    <span class=\"token key atrule\">output</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"rss.xml\"</span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre>  <span class=\"token key atrule\">atom</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre>    <span class=\"token key atrule\">enable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"70\"></td><td><pre>    <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"themes/shokaX/layout/_alternate/atom.ejs\"</span></pre></td></tr><tr><td data-num=\"71\"></td><td><pre>    <span class=\"token key atrule\">output</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"atom.xml\"</span></pre></td></tr><tr><td data-num=\"72\"></td><td><pre>  <span class=\"token key atrule\">jsonFeed</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"73\"></td><td><pre>    <span class=\"token key atrule\">enable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"74\"></td><td><pre>    <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"themes/shokaX/layout/_alternate/json.ejs\"</span></pre></td></tr><tr><td data-num=\"75\"></td><td><pre>    <span class=\"token key atrule\">output</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"feed.json\"</span></pre></td></tr></table></figure><p>如果使用 SXC 的默认 origin 或者 npm 安装主题，feed 配置如下:</p>\n<figure class=\"highlight yaml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">feed</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token key atrule\">limit</span><span class=\"token punctuation\">:</span> <span class=\"token number\">20</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token key atrule\">order_by</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"-date\"</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token key atrule\">tag_dir</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token key atrule\">category_dir</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token key atrule\">rss</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token key atrule\">enable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"node_modules/hexo-theme-shokax/layout/_alternate/rss.ejs\"</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token key atrule\">output</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"rss.xml\"</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token key atrule\">atom</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token key atrule\">enable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"node_modules/hexo-theme-shokax/layout/_alternate/atom.ejs\"</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token key atrule\">output</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"atom.xml\"</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token key atrule\">jsonFeed</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token key atrule\">enable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"node_modules/hexo-theme-shokax/layout/_alternate/json.ejs\"</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token key atrule\">output</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"feed.json\"</span></pre></td></tr></table></figure><p>停用默认代码高亮 (将下面两项更改为 <code>false</code> ):</p>\n<figure class=\"highlight yaml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">highlight</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token key atrule\">enable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token key atrule\">prismjs</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token key atrule\">enable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span></pre></td></tr></table></figure><p>搜索功能配置:</p>\n<figure class=\"highlight yaml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">algolia</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token key atrule\">appId</span><span class=\"token punctuation\">:</span> <span class=\"token comment\">#Your appId</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token key atrule\">apiKey</span><span class=\"token punctuation\">:</span> <span class=\"token comment\">#Your apiKey</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token key atrule\">adminApiKey</span><span class=\"token punctuation\">:</span> <span class=\"token comment\">#Your adminApiKey</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token key atrule\">chunkSize</span><span class=\"token punctuation\">:</span> <span class=\"token number\">5000</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token key atrule\">indexName</span><span class=\"token punctuation\">:</span> <span class=\"token comment\">#\"shokaX\"</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token key atrule\">fields</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token punctuation\">-</span> title <span class=\"token comment\">#必须配置</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token punctuation\">-</span> path <span class=\"token comment\">#必须配置</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">-</span> categories <span class=\"token comment\">#推荐配置</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">-</span> content<span class=\"token punctuation\">:</span>strip<span class=\"token punctuation\">:</span>truncate<span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">2000</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token punctuation\">-</span> gallery</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">-</span> photos</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token punctuation\">-</span> tags</pre></td></tr></table></figure>",
            "tags": [
                "网站建设",
                "shokaX",
                "shokaX"
            ]
        },
        {
            "id": "https://www.kaitaku.xyz/webbuild/hexo/indexnow/",
            "url": "https://www.kaitaku.xyz/webbuild/hexo/indexnow/",
            "title": "hexo-indexnow插件使用教程",
            "date_published": "2022-09-28T04:04:20.000Z",
            "content_html": "<h1 id=\"hexo-indexnow插件\"><a class=\"anchor\" href=\"#hexo-indexnow插件\">#</a> hexo-indexnow 插件</h1>\n<div class=\"note info\">\n<p>此插件仅提供了 <code>indexnow</code>  链接推送功能，建议搭配其他插件使用</p>\n</div>\n<div class=\"note primary\">\n<p>目前只有 <code>1.0.6+</code>  和 <code>1.0.3</code>  可以正常运行，请勿安装 <code>1.0.5</code>  <br />\n <code>1.0.3+</code>  均有 fetch 兼容支持</p>\n</div>\n<h2 id=\"安装插件和获取apikey\"><a class=\"anchor\" href=\"#安装插件和获取apikey\">#</a> 安装插件和获取 apikey</h2>\n<p>安装此插件:</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">yarn</span> <span class=\"token function\">add</span> hexo-indexnow</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\"># 或</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token function\">npm</span> i hexo-indexnow <span class=\"token parameter variable\">--save</span></pre></td></tr></table></figure><p>随后打开一个搜索引擎的 indexnow 界面，例如<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmluZy5jb20vaW5kZXhub3c=\">微软必应</span> <br />\n向下滑界面，找到 <code>Generate API Key</code> , 将值复制下来</p>\n<h2 id=\"配置hexo\"><a class=\"anchor\" href=\"#配置hexo\">#</a> 配置 hexo</h2>\n<p>在根目录 <code>_config.yml</code>  添加如下配置:</p>\n<figure class=\"highlight yaml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">hexo_indexnow</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token key atrule\">count</span><span class=\"token punctuation\">:</span> latest <span class=\"token comment\"># 数字或者 \"latest\"(=1)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token key atrule\">txt_name</span><span class=\"token punctuation\">:</span> indexnow.txt <span class=\"token comment\"># 链接文件名</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token key atrule\">apikey</span><span class=\"token punctuation\">:</span> xxxxxx <span class=\"token comment\"># 你的 apikey</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token key atrule\">server</span><span class=\"token punctuation\">:</span> bing <span class=\"token comment\"># indexnow 服务器，可选值有:bing、yandex、indexnow</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token key atrule\">deploy</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> indexnow_url_submitter</pre></td></tr></table></figure><p>随后 <code>hexo d</code>  即可</p>\n",
            "tags": [
                "网站建设",
                "hexo",
                "shoka"
            ]
        },
        {
            "id": "https://www.kaitaku.xyz/webbuild/shokajsdelivr/",
            "url": "https://www.kaitaku.xyz/webbuild/shokajsdelivr/",
            "title": "shoka主题速度优化-拆分jsdelivr",
            "date_published": "2022-08-27T04:10:02.000Z",
            "content_html": "<h1 id=\"前言\"><a class=\"anchor\" href=\"#前言\">#</a> 前言</h1>\n<p>众所周知，jsdelivr 在国内的速度可以用慢的一批来形容 <br />\n而 shoka 主题使用了 jsdelivr 的 combine 功能加载第三方 js, 而 combine 在国内没有镜像源<br />\n并且阻断了使用 CDN 并发加速的道路，本篇博文会将 jsdelivr 聚合拆分为几个独立的 js, 以便使用国内镜像源和异步加载</p>\n<div class=\"note info\">\n<p>此方案相较于本地化而言有较大速度优势，尤其在 CDN 并发加持下</p>\n</div>\n<h1 id=\"拆分jsdelivr\"><a class=\"anchor\" href=\"#拆分jsdelivr\">#</a> 拆分 jsdelivr</h1>\n<h2 id=\"更改模板\"><a class=\"anchor\" href=\"#更改模板\">#</a> 更改模板</h2>\n<p>打开 <code>shoka\\layout\\_partials\\layout.njk</code> , 找到第 144 行左右:</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://cdn.polyfill.io/v3/polyfill.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>&#123;&#123; _vendor_js() &#125;&#125;</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>&#123;&#123; _js('app.js')&#125;&#125;</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>&#123;&#123; partial('_partials/third-party/baidu-analytics.njk', &#123;&#125;, &#123;cache: true&#125;) &#125;&#125;</pre></td></tr></table></figure><p>更改为如下内容:</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://cdn.polyfill.io/v3/polyfill.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>&#123;%- if theme.advVendors.enable %&#125;</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\t&#123;% for i in _list_vendor_js() %&#125;</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>\t\t&#123;&#123; _adv_vendor_js(i) &#125;&#125;</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>\t&#123;% endfor %&#125;</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>&#123;%- else %&#125;</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>&#123;&#123; _vendor_js() &#125;&#125;</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>&#123;%- endif %&#125;</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>&#123;&#123; _js('app.js')&#125;&#125;</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>&#123;&#123; partial('_partials/third-party/baidu-analytics.njk', &#123;&#125;, &#123;cache: true&#125;) &#125;&#125;</pre></td></tr></table></figure><h2 id=\"注册helper\"><a class=\"anchor\" href=\"#注册helper\">#</a> 注册 helper</h2>\n<p>打开 <code>shoka\\scripts\\helpers\\asset.js</code> , 最后一行新建空行，增加如下内容:</p>\n<figure class=\"highlight javascript\"><figcaption data-lang=\"javascript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>hexo<span class=\"token punctuation\">.</span>extend<span class=\"token punctuation\">.</span>helper<span class=\"token punctuation\">.</span><span class=\"token function\">register</span><span class=\"token punctuation\">(</span><span class=\"token string\">'_list_vendor_js'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">return</span> hexo<span class=\"token punctuation\">.</span>theme<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">.</span>vendorsList<span class=\"token punctuation\">.</span>js<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>hexo<span class=\"token punctuation\">.</span>extend<span class=\"token punctuation\">.</span>helper<span class=\"token punctuation\">.</span><span class=\"token function\">register</span><span class=\"token punctuation\">(</span><span class=\"token string\">'_adv_vendor_js'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">js_name</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">const</span> config <span class=\"token operator\">=</span> hexo<span class=\"token punctuation\">.</span>theme<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">.</span>advVendors<span class=\"token punctuation\">.</span>js<span class=\"token punctuation\">[</span>js_name<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">const</span> src <span class=\"token operator\">=</span> config<span class=\"token punctuation\">[</span><span class=\"token string\">\"src\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">let</span> result<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>src<span class=\"token punctuation\">.</span><span class=\"token function\">indexOf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"http\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">!==</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        result <span class=\"token operator\">=</span> src<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>src<span class=\"token punctuation\">.</span><span class=\"token function\">indexOf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"combine\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">!==</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"The combine feature is not recommended!\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        result <span class=\"token operator\">=</span> hexo<span class=\"token punctuation\">.</span>theme<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">.</span>advVendors<span class=\"token punctuation\">.</span>combine <span class=\"token operator\">+</span> src<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>src<span class=\"token punctuation\">.</span><span class=\"token function\">indexOf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"npm\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">!==</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        result <span class=\"token operator\">=</span> hexo<span class=\"token punctuation\">.</span>theme<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">.</span>advVendors<span class=\"token punctuation\">.</span>npm <span class=\"token operator\">+</span> src<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>src<span class=\"token punctuation\">.</span><span class=\"token function\">indexOf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"gh\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">!==</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        result <span class=\"token operator\">=</span> hexo<span class=\"token punctuation\">.</span>theme<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">.</span>advVendors<span class=\"token punctuation\">.</span>github <span class=\"token operator\">+</span> src<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        result <span class=\"token operator\">=</span> <span class=\"token string\">\"/\"</span> <span class=\"token operator\">+</span> src<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token keyword\">let</span> attr <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token literal-property property\">src</span><span class=\"token operator\">:</span> result<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>config<span class=\"token punctuation\">[</span><span class=\"token string\">\"async\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> attr<span class=\"token punctuation\">[</span><span class=\"token string\">\"async\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"async\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>config<span class=\"token punctuation\">[</span><span class=\"token string\">\"data-pjax\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> attr<span class=\"token punctuation\">[</span><span class=\"token string\">\"data-pjax\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"data-pjax\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>config<span class=\"token punctuation\">[</span><span class=\"token string\">\"hash-value\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> attr<span class=\"token punctuation\">[</span><span class=\"token string\">\"integrity\"</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>config<span class=\"token punctuation\">[</span><span class=\"token string\">\"hash-value\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>config<span class=\"token punctuation\">[</span><span class=\"token string\">\"deferLoad\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token function\">htmlTag</span><span class=\"token punctuation\">(</span><span class=\"token string\">'script'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span><span class=\"token string-property property\">\"data-pjax\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\"></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        const script=document.createElement(\"script\");script.src=\"</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$&#123;</span>result<span class=\"token interpolation-punctuation punctuation\">&#125;</span></span><span class=\"token string\">\",script.async=true,document.body.appendChild(script)</pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token function\">htmlTag</span><span class=\"token punctuation\">(</span><span class=\"token string\">'script'</span><span class=\"token punctuation\">,</span> attr<span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h2 id=\"更改配置\"><a class=\"anchor\" href=\"#更改配置\">#</a> 更改配置</h2>\n<p>在 shoka 目录下 <code>_config.yml</code>  增加如下内容:</p>\n<div class=\"note info\">\n<p>推荐内容，可根据自己情况更改</p>\n</div>\n<figure class=\"highlight yaml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">advVendors</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token key atrule\">enable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token key atrule\">github</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"https://cdn.jsdelivr.net/gh/\"</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token key atrule\">combine</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"https://cdn.jsdelivr.net/\"</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token key atrule\">npm</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"https://unpkg.com/\"</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token key atrule\">js</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token key atrule\">pace</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>      <span class=\"token key atrule\">src</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//lf9<span class=\"token punctuation\">-</span>cdn<span class=\"token punctuation\">-</span>tos.bytecdntp.com/cdn/expire<span class=\"token punctuation\">-</span>1<span class=\"token punctuation\">-</span>M/pace/1.0.2/pace.min.js</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token key atrule\">pjax</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>      <span class=\"token key atrule\">src</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//lib.baomitu.com/pjax/0.2.8/pjax.min.js</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token key atrule\">fetch</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>      <span class=\"token key atrule\">src</span><span class=\"token punctuation\">:</span> npm/whatwg<span class=\"token punctuation\">-</span>fetch@3.4.0/dist/fetch.umd.js</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token key atrule\">anime</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>      <span class=\"token key atrule\">src</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//lf9<span class=\"token punctuation\">-</span>cdn<span class=\"token punctuation\">-</span>tos.bytecdntp.com/cdn/expire<span class=\"token punctuation\">-</span>1<span class=\"token punctuation\">-</span>M/animejs/3.2.0/anime.min.js</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token key atrule\">algolia</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>      <span class=\"token key atrule\">src</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//lf9<span class=\"token punctuation\">-</span>cdn<span class=\"token punctuation\">-</span>tos.bytecdntp.com/cdn/expire<span class=\"token punctuation\">-</span>1<span class=\"token punctuation\">-</span>M/algoliasearch/4.12.1/algoliasearch<span class=\"token punctuation\">-</span>lite.umd.min.js</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token key atrule\">instantsearch</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>      <span class=\"token key atrule\">src</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//lf9<span class=\"token punctuation\">-</span>cdn<span class=\"token punctuation\">-</span>tos.bytecdntp.com/cdn/expire<span class=\"token punctuation\">-</span>1<span class=\"token punctuation\">-</span>M/instantsearch.js/4.39.0/instantsearch.production.min.js</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token key atrule\">lazyload</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>      <span class=\"token key atrule\">src</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//lf9<span class=\"token punctuation\">-</span>cdn<span class=\"token punctuation\">-</span>tos.bytecdntp.com/cdn/expire<span class=\"token punctuation\">-</span>1<span class=\"token punctuation\">-</span>M/lozad.js/1.16.0/lozad.min.js</pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token key atrule\">quicklink</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>      <span class=\"token key atrule\">src</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//lf9<span class=\"token punctuation\">-</span>cdn<span class=\"token punctuation\">-</span>tos.bytecdntp.com/cdn/expire<span class=\"token punctuation\">-</span>1<span class=\"token punctuation\">-</span>M/quicklink/2.2.0/quicklink.umd.min.js</pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token key atrule\">fancybox</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>      <span class=\"token key atrule\">src</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//lf26<span class=\"token punctuation\">-</span>cdn<span class=\"token punctuation\">-</span>tos.bytecdntp.com/cdn/expire<span class=\"token punctuation\">-</span>1<span class=\"token punctuation\">-</span>M/<span class=\"token punctuation\">?</span><span class=\"token punctuation\">?</span>jquery/3.5.1/jquery.min.js<span class=\"token punctuation\">,</span>fancybox/3.5.7/jquery.fancybox.min.js<span class=\"token punctuation\">,</span>justifiedGallery/3.8.1/js/jquery.justifiedGallery.min.js</pre></td></tr><tr><td data-num=\"25\"></td><td><pre>      <span class=\"token key atrule\">async</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token key atrule\">copy_tex</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>      <span class=\"token key atrule\">src</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//lf9<span class=\"token punctuation\">-</span>cdn<span class=\"token punctuation\">-</span>tos.bytecdntp.com/cdn/expire<span class=\"token punctuation\">-</span>1<span class=\"token punctuation\">-</span>M/KaTeX/0.12.0/contrib/copy<span class=\"token punctuation\">-</span>tex.min.js</pre></td></tr><tr><td data-num=\"28\"></td><td><pre>      <span class=\"token key atrule\">async</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token key atrule\">chart</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>      <span class=\"token key atrule\">src</span><span class=\"token punctuation\">:</span> npm/frappe<span class=\"token punctuation\">-</span>charts@1.5.0/dist/frappe<span class=\"token punctuation\">-</span>charts.min.iife.js</pre></td></tr><tr><td data-num=\"31\"></td><td><pre></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token key atrule\">vendorsList</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>  <span class=\"token key atrule\">js</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token punctuation\">-</span> pace</pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    <span class=\"token punctuation\">-</span> pjax</pre></td></tr><tr><td data-num=\"36\"></td><td><pre>    <span class=\"token punctuation\">-</span> fetch</pre></td></tr><tr><td data-num=\"37\"></td><td><pre>    <span class=\"token punctuation\">-</span> anime</pre></td></tr><tr><td data-num=\"38\"></td><td><pre>    <span class=\"token punctuation\">-</span> algolia</pre></td></tr><tr><td data-num=\"39\"></td><td><pre>    <span class=\"token punctuation\">-</span> instantsearch</pre></td></tr><tr><td data-num=\"40\"></td><td><pre>    <span class=\"token punctuation\">-</span> lazyload</pre></td></tr><tr><td data-num=\"41\"></td><td><pre>    <span class=\"token punctuation\">-</span> quicklink</pre></td></tr><tr><td data-num=\"42\"></td><td><pre>    <span class=\"token punctuation\">-</span> fancybox</pre></td></tr><tr><td data-num=\"43\"></td><td><pre>    <span class=\"token punctuation\">-</span> copy_tex</pre></td></tr><tr><td data-num=\"44\"></td><td><pre>    <span class=\"token punctuation\">-</span> chart</pre></td></tr></table></figure><p>下面为结构详解:</p>\n<figure class=\"highlight yaml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">advVendors</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\t<span class=\"token key atrule\">enable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span> <span class=\"token comment\">#是否开启，关闭使用主题默认加载</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\t<span class=\"token key atrule\">github</span><span class=\"token punctuation\">:</span> <span class=\"token comment\">#github 使用的加载源，需要协议头和末尾斜杠</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>\t<span class=\"token key atrule\">combine</span><span class=\"token punctuation\">:</span> <span class=\"token comment\">#聚合 js 使用的加载源 (不建议使用)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>\t<span class=\"token key atrule\">npm</span><span class=\"token punctuation\">:</span> <span class=\"token comment\">#npm 的加载源</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>\t<span class=\"token key atrule\">js</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\t\t<span class=\"token key atrule\">jspackage</span><span class=\"token punctuation\">:</span> <span class=\"token comment\">#js 名，可以与文件名不一致</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>\t\t\t<span class=\"token key atrule\">src</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"资源地址,详情见后面\"</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>\t\t\t<span class=\"token comment\"># async: true 异步加载此 js</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>\t\t\t<span class=\"token comment\"># data-pjax: true 在 pjax 加载时刷新此 js</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>\t\t\t<span class=\"token comment\"># hash-value: 这个资源的 integrity 值，用于防 XXS</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>\t\t\t<span class=\"token comment\"># deferLoad: true 使用动态 DOM 节点添加延迟 js 加载 (实验性)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token key atrule\">vendorsList</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token key atrule\">js</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  \t<span class=\"token punctuation\">-</span> jspackage <span class=\"token comment\">#与上方 jspackage 一致即可</span></pre></td></tr></table></figure><p>资源地址格式如下:</p>\n<ul>\n<li><code>https://example.com/xxx.js</code>  使用 http (s) 地址加载 js</li>\n<li><code>combine/xxx.js,xxx.js</code>  使用 jsdelivr 的 combine 功能加载 (不推荐)</li>\n<li><code>npm/xxx/xxx.js</code>  使用 npm 源加载 js</li>\n<li><code>gh/xxx/xxx.js</code>  使用 gh 源加载 js</li>\n<li><code>xxx.js</code>  从本地加载 js <br />\n优先级如下: <br />\n <code>http&gt;combine&gt;npm&gt;gh&gt;本地</code></li>\n</ul>\n",
            "tags": [
                "网站建设",
                "shoka"
            ]
        },
        {
            "id": "https://www.kaitaku.xyz/webbuild/hexo/hexoweb2/",
            "url": "https://www.kaitaku.xyz/webbuild/hexo/hexoweb2/",
            "title": "从0搭建hexo博客-安装主题",
            "date_published": "2022-08-23T04:12:10.000Z",
            "content_html": "<div class=\"note danger\">\n<p>本文正在重写，现不建议阅读</p>\n</div>\n<h1 id=\"安装shoka主题\"><a class=\"anchor\" href=\"#安装shoka主题\">#</a> 安装 shoka 主题</h1>\n<p>克隆 shoka 主题到本地</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token builtin class-name\">cd</span> <span class=\"token operator\">&lt;</span>your_blog<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\"># git clone https://github.com/amehime/hexo-theme-shoka.git ./themes/shoka 作者提供的 github 源，需要网络较好</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token function\">git</span> clone https://gitee.com/zkz0/hexo-theme-shoka.git ./themes/shoka <span class=\"token comment\">#gitee 镜像源</span></pre></td></tr></table></figure><p>将文件夹改名为 <code>shoka</code> , 打开根目录 <code>_config.yml</code>  <br />\n更改为如下内容:</p>\n<figure class=\"highlight yaml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># Extensions</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">## Plugins: https://hexo.io/plugins/</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">## Themes: https://hexo.io/themes/</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token key atrule\">theme</span><span class=\"token punctuation\">:</span> shoka</pre></td></tr></table></figure><h2 id=\"安装shoka的md渲染插件\"><a class=\"anchor\" href=\"#安装shoka的md渲染插件\">#</a> 安装 shoka 的 md 渲染插件</h2>\n<p>安装 shoka 主题的 md 渲染器插件:</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># cd &lt;your_blog></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">yarn</span> remove hexo-renderer-marked</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># cnpm i hexo-renderer-multi-markdown-it</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token function\">yarn</span> <span class=\"token function\">add</span> hexo-renderer-multi-next-markdown-it <span class=\"token comment\">#博主制作的全新版本渲染器，建议安装</span></pre></td></tr></table></figure><p>如果报错替换为下列指令:</p>\n<div class=\"note info\">\n<p>如果安装 <code>hexo-renderer-multi-next-markdown-it</code>  则不会存在此问题</p>\n</div>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>cnpm i hexo-renderer-multi-markdown-it --ignore-scripts</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>cnpm un puppeteer</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>cnpm i puppeteer</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>cnpm i bufferutil</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>cnpm i utf-8-validate</pre></td></tr></table></figure><h2 id=\"安装shoka的插件\"><a class=\"anchor\" href=\"#安装shoka的插件\">#</a> 安装 shoka 的插件</h2>\n<p>执行如下命令:</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">yarn</span> <span class=\"token function\">add</span> hexo-autoprefixer</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">yarn</span> <span class=\"token function\">add</span> hexo-algoliasearch</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token function\">yarn</span> <span class=\"token function\">add</span> hexo-symbols-count-time</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token function\">yarn</span> <span class=\"token function\">add</span> hexo-feed</pre></td></tr></table></figure><h1 id=\"配置shoka主题\"><a class=\"anchor\" href=\"#配置shoka主题\">#</a> 配置 shoka 主题</h1>\n<h2 id=\"配置hexo-renderer-multi-markdown-it\"><a class=\"anchor\" href=\"#配置hexo-renderer-multi-markdown-it\">#</a> 配置 hexo-renderer-multi-markdown-it</h2>\n<p>在根目录下 <code>_config.yml</code>  加入 md 配置和 minify 配置:</p>\n<figure class=\"highlight yaml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">markdown</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token key atrule\">render</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># 渲染器设置</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token key atrule\">html</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span> <span class=\"token comment\"># 过滤 HTML 标签</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token key atrule\">xhtmlOut</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span> <span class=\"token comment\"># 使用 '/' 来闭合单标签 （比如 &lt;br />）。</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token key atrule\">breaks</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span> <span class=\"token comment\"># 转换段落里的 '\\n' 到 &lt;br>。</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token key atrule\">linkify</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span> <span class=\"token comment\"># 将类似 URL 的文本自动转换为链接。</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token key atrule\">typographer</span><span class=\"token punctuation\">:</span> </pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token key atrule\">quotes</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'“”‘’'</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token key atrule\">plugins</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># markdown-it 插件设置</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">plugin</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> markdown<span class=\"token punctuation\">-</span>it<span class=\"token punctuation\">-</span>toc<span class=\"token punctuation\">-</span>and<span class=\"token punctuation\">-</span>anchor</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token key atrule\">enable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token key atrule\">options</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># 文章目录以及锚点应用的 class 名称，shoka 主题必须设置成这样</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>          <span class=\"token key atrule\">tocClassName</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'toc'</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>          <span class=\"token key atrule\">anchorClassName</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'anchor'</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">plugin</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> markdown<span class=\"token punctuation\">-</span>it<span class=\"token punctuation\">-</span>multimd<span class=\"token punctuation\">-</span>table</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token key atrule\">enable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token key atrule\">options</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>          <span class=\"token key atrule\">multiline</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>          <span class=\"token key atrule\">rowspan</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>          <span class=\"token key atrule\">headerless</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">plugin</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> ./markdown<span class=\"token punctuation\">-</span>it<span class=\"token punctuation\">-</span>furigana</pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        <span class=\"token key atrule\">enable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token key atrule\">options</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>          <span class=\"token key atrule\">fallbackParens</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"()\"</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">plugin</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> ./markdown<span class=\"token punctuation\">-</span>it<span class=\"token punctuation\">-</span>spoiler</pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        <span class=\"token key atrule\">enable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>        <span class=\"token key atrule\">options</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>          <span class=\"token key atrule\">title</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"你知道得太多了\"</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token key atrule\">minify</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>  <span class=\"token key atrule\">html</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>    <span class=\"token key atrule\">enable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>    <span class=\"token key atrule\">exclude</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># 排除 hexo-feed 用到的模板文件</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token string\">'**/json.ejs'</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token string\">'**/atom.ejs'</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token string\">'**/rss.ejs'</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>  <span class=\"token key atrule\">css</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>    <span class=\"token key atrule\">enable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>    <span class=\"token key atrule\">exclude</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token string\">'**/*.min.css'</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>  <span class=\"token key atrule\">js</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>    <span class=\"token key atrule\">enable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>    <span class=\"token key atrule\">mangle</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>      <span class=\"token key atrule\">toplevel</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>    <span class=\"token key atrule\">output</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>    <span class=\"token key atrule\">compress</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>    <span class=\"token key atrule\">exclude</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token string\">'**/*.min.js'</span></pre></td></tr></table></figure><p>随后关闭 hexo 自带代码高亮:</p>\n<figure class=\"highlight yaml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">highlight</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token key atrule\">enable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token key atrule\">prismjs</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token key atrule\">enable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span></pre></td></tr></table></figure><h2 id=\"配置其他功能\"><a class=\"anchor\" href=\"#配置其他功能\">#</a> 配置其他功能</h2>\n<p>根目录 yaml 加入如下配置:</p>\n<figure class=\"highlight yaml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">autoprefixer</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token key atrule\">exclude</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token punctuation\">-</span> <span class=\"token string\">'*.min.css'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token key atrule\">keywords</span><span class=\"token punctuation\">:</span> <span class=\"token comment\">#站点关键词，用 “,” 分隔</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token key atrule\">feed</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token key atrule\">limit</span><span class=\"token punctuation\">:</span> <span class=\"token number\">20</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token key atrule\">order_by</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"-date\"</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token key atrule\">tag_dir</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token key atrule\">category_dir</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token key atrule\">rss</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token key atrule\">enable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"themes/shoka/layout/_alternate/rss.ejs\"</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token key atrule\">output</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"rss.xml\"</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  <span class=\"token key atrule\">atom</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token key atrule\">enable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"themes/shoka/layout/_alternate/atom.ejs\"</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token key atrule\">output</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"atom.xml\"</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>  <span class=\"token key atrule\">jsonFeed</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token key atrule\">enable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"themes/shoka/layout/_alternate/json.ejs\"</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token key atrule\">output</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"feed.json\"</span></pre></td></tr></table></figure><h2 id=\"配置搜索功能\"><a class=\"anchor\" href=\"#配置搜索功能\">#</a> 配置搜索功能</h2>\n<p>在根目录 <code>_config.yml</code>  加入如下配置:</p>\n<figure class=\"highlight yaml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">algolia</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token key atrule\">appId</span><span class=\"token punctuation\">:</span> <span class=\"token comment\">#Your appId</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token key atrule\">apiKey</span><span class=\"token punctuation\">:</span> <span class=\"token comment\">#Your apiKey</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token key atrule\">adminApiKey</span><span class=\"token punctuation\">:</span> <span class=\"token comment\">#Your adminApiKey</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token key atrule\">chunkSize</span><span class=\"token punctuation\">:</span> <span class=\"token number\">5000</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token key atrule\">indexName</span><span class=\"token punctuation\">:</span> <span class=\"token comment\">#\"shoka\"</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token key atrule\">fields</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token punctuation\">-</span> title <span class=\"token comment\">#必须配置</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token punctuation\">-</span> path <span class=\"token comment\">#必须配置</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">-</span> categories <span class=\"token comment\">#推荐配置</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">-</span> content<span class=\"token punctuation\">:</span>strip<span class=\"token punctuation\">:</span>truncate<span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">2000</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token punctuation\">-</span> gallery</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">-</span> photos</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token punctuation\">-</span> tags</pre></td></tr></table></figure><p>获取 APPID 步骤:<br />\n 进入<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYWxnb2xpYS5jb20v\"> algolia</span> , 点击右上角的 <code>start free</code> , 根据提示填入信息即可 <br />\n数据库位置可自行选择，随后创建应用，点击左下角齿轮，选择 <code>api keys</code>  <br />\n然后将 apikeys 填入对应选项:</p>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>appId 对应 Application ID</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>apiKey 对应 Search-Only API Key</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>adminApiKey 对应 Admin API Key</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>indexName 填入你的项目 index 名</pre></td></tr></table></figure><div class=\"note info\">\n<p>shoka 主题剩余配置可自行查看文档 <br />\n如遇到问题可以在评论区提问</p>\n</div>\n<h1 id=\"配置hexo\"><a class=\"anchor\" href=\"#配置hexo\">#</a> 配置 hexo</h1>\n<p>打开根目录 <code>_config.yml</code></p>\n<div class=\"note info\">\n<p>仅关注站点配置部分，部署及增强日后再聊</p>\n</div>\n<p>Site 部分:</p>\n<figure class=\"highlight yaml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># Site</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token key atrule\">title</span><span class=\"token punctuation\">:</span> <span class=\"token comment\">#你的站点名 (中标题，大标题是主题的 alternate 选项)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token key atrule\">subtitle</span><span class=\"token punctuation\">:</span> <span class=\"token comment\">#副标题 (小标题)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token key atrule\">description</span><span class=\"token punctuation\">:</span> <span class=\"token comment\">#站点描述，不建议小于 15 字</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token key atrule\">keywords</span><span class=\"token punctuation\">:</span> <span class=\"token comment\">#关键字，用半角逗号分隔</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token key atrule\">author</span><span class=\"token punctuation\">:</span> <span class=\"token comment\">#作者名</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token key atrule\">language</span><span class=\"token punctuation\">:</span> zh<span class=\"token punctuation\">-</span>CN <span class=\"token comment\">#中文为 zh-CN</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token key atrule\">timezone</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'Asia/Shanghai'</span> <span class=\"token comment\">#东八区时区</span></pre></td></tr></table></figure><p>url 部分:</p>\n<figure class=\"highlight yaml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># URL</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">## Set your site url here. For example, if you use GitHub Page, set url as 'https://username.github.io/project'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token key atrule\">url</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//www.kaitaku.xyz <span class=\"token comment\">#你的 url, 需要协议头</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># permalink: :year/:month/:day/:title/</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token key atrule\">permalink</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">:</span>title/ <span class=\"token comment\">#推荐这样，有利于 SEO</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token key atrule\">permalink_defaults</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token key atrule\">pretty_urls</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token key atrule\">trailing_index</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span> <span class=\"token comment\"># Set to false to remove trailing 'index.html' from permalinks</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token key atrule\">trailing_html</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span> <span class=\"token comment\"># Set to false to remove trailing '.html' from permalinks</span></pre></td></tr></table></figure><p>推荐安装 <code>hexo-filter-nofollow</code>  优化 SEO:</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>cnpm i hexo-filter-nofollow</pre></td></tr></table></figure><p>在根目录 <code>config.yml</code>  添加如下内容:</p>\n<figure class=\"highlight yaml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">nofollow</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token key atrule\">enable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span> <span class=\"token comment\"># 是否启用</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token key atrule\">field</span><span class=\"token punctuation\">:</span> site <span class=\"token comment\">#site 全站，post 仅文章</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token key atrule\">exclude</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token punctuation\">-</span> <span class=\"token string\">'www.kaitaku.xyz'</span> <span class=\"token comment\">#例外网站</span></pre></td></tr></table></figure>",
            "tags": [
                "网站建设",
                "hexo",
                "shoka"
            ]
        },
        {
            "id": "https://www.kaitaku.xyz/webbuild/hexo/hexoweb1/",
            "url": "https://www.kaitaku.xyz/webbuild/hexo/hexoweb1/",
            "title": "从0搭建hexo博客-环境搭建",
            "date_published": "2022-08-18T12:24:03.000Z",
            "content_html": "<h1 id=\"hexo的优势\"><a class=\"anchor\" href=\"#hexo的优势\">#</a> hexo 的优势</h1>\n<p>hexo 是<strong>静态博客生成器</strong> (SSG), 这意味着它不需要服务端来进行渲染，只需要将文件发送给客户端即可 <br />\n因此，hexo 脱离了服务器的限制，可以在 <code>github pages</code>  等静态页面托管平台上部署 <br />\nhexo 基于 NODEJS, 具有较强的扩展性，性能也相对较高</p>\n<h1 id=\"前期准备工作\"><a class=\"anchor\" href=\"#前期准备工作\">#</a> 前期准备工作</h1>\n<p>需要的软件如下:</p>\n<h2 id=\"nodejs\"><a class=\"anchor\" href=\"#nodejs\">#</a> node.js</h2>\n<p>打开<span class=\"exturl\" data-url=\"aHR0cDovL25vZGVqcy5jbi9kb3dubG9hZC8=\"> nodejs 官网</span>，选择自己的平台对应的安装包即可<br />\n安装成功后请在命令行输入 <code>node -v</code>  和 <code>npm -v</code>  检验安装是否成功</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># npm install -g cnpm --registry=https://registry.npmmirror.com</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">npm</span> <span class=\"token function\">install</span> <span class=\"token parameter variable\">-g</span> <span class=\"token function\">yarn</span> <span class=\"token comment\">#安装 yarn 即可</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre> <span class=\"token function\">yarn</span> config <span class=\"token builtin class-name\">set</span> registry https://registry.npmmirror.com</pre></td></tr></table></figure><h2 id=\"git\"><a class=\"anchor\" href=\"#git\">#</a> git</h2>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXQtc2NtLmNvbS9kb3dubG9hZC8=\">点我</span>下载对应版本的 git 安装包，直接安装即可<br />\n右键有 <code>git bash</code>  选项就是成功了</p>\n<div class=\"note info\">\n<p>Markdown 编辑软件可以用 <code>Typora</code> , 博主使用的是 <code>IDEA</code></p>\n</div>\n<h1 id=\"安装hexo\"><a class=\"anchor\" href=\"#安装hexo\">#</a> 安装 hexo</h1>\n<h2 id=\"安装并初始化hexo\"><a class=\"anchor\" href=\"#安装并初始化hexo\">#</a> 安装并初始化 hexo</h2>\n<p>下面的步骤在你的博客文件夹进行，例如 <code>D:\\hexo</code> <br />\n 安装 hexo 框架:</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>cnpm <span class=\"token function\">install</span> <span class=\"token parameter variable\">-g</span> hexo-cli</pre></td></tr></table></figure><p>初始化 hexo 框架:</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>hexo init <span class=\"token comment\">#报错换成 npx hexo init</span></pre></td></tr></table></figure><p>随后安装对应 NPM 包:</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>cnpm i</pre></td></tr></table></figure><p>然后就可以开始启动博客了:</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>hexo g <span class=\"token comment\"># 报错换成 npx hexo g</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>hexo s <span class=\"token comment\"># 报错换成 npx hexo s</span></pre></td></tr></table></figure><p>等待控制台输出如下内容:</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>INFO  Validating config</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>INFO  Start processing</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>INFO  Hexo is running at http://localhost:4000 <span class=\"token builtin class-name\">.</span> Press Ctrl+C to stop.</pre></td></tr></table></figure><p>随后打开<span class=\"exturl\" data-url=\"aHR0cDovL2xvY2FsaG9zdDo0MDAw\"> http://localhost:4000</span> 就能看到博客了<br />\n界面应该如下:<br />\n<img data-src=\"https://d33wubrfki0l68.cloudfront.net/5997a40576f3beca7bbbd86fe79a795e9d520d8e/87f88/themes/screenshots/landscape.png\" alt=\"landscape的图片\" /></p>\n<h2 id=\"hexo的文件结构\"><a class=\"anchor\" href=\"#hexo的文件结构\">#</a> hexo 的文件结构</h2>\n<p>在进入下一步前，我们需要先看一下 hexo 的文件结构:</p>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>hexo&#x2F; </pre></td></tr><tr><td data-num=\"2\"></td><td><pre>|-- node_modules&#x2F; </pre></td></tr><tr><td data-num=\"3\"></td><td><pre>|-- scaffolds&#x2F;</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>|-- source&#x2F;</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>|-- themes&#x2F;</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>|-- _config.xxx.yml</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>|-- _config.yml</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>|-- package.json</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>|-- package-lock.json</pre></td></tr></table></figure><ul>\n<li><code>node_modules</code>  用于放置 NPM 包，无需注意</li>\n<li><code>scaffolds</code>  储存文章模板， <code>hexo new</code>  时会用到</li>\n<li><code>source</code>  储存文章和部分资源</li>\n<li><code>themes</code>  储存主题</li>\n<li><code>_config.xxx.yml</code>  是主题的 plus 版配置文件 (xxx 须更改为主题名)</li>\n<li><code>_config.yml</code>  是 hexo 的配置文件</li>\n<li><code>package.json</code> NPM 的包 json, 无需注意</li>\n</ul>\n<div class=\"note info\">\n<p>shoka 主题的配置在下一篇</p>\n</div>\n",
            "tags": [
                "网站建设",
                "hexo",
                "shoka"
            ]
        },
        {
            "id": "https://www.kaitaku.xyz/webbuild/nginx-quic/",
            "url": "https://www.kaitaku.xyz/webbuild/nginx-quic/",
            "title": "使用nginx-quic开启HTTP/3协议支持",
            "date_published": "2022-07-14T07:02:04.000Z",
            "content_html": "<h1 id=\"使用nginx-quic开启http3\"><a class=\"anchor\" href=\"#使用nginx-quic开启http3\">#</a> 使用 nginx-quic 开启 HTTP/3</h1>\n<p>QUIC 是什么博主已经在以前的文章中提到过了，故不在赘述 <br />\n本次使用 nginx-quic 开启 HTTP/3 支持，基于 ubuntu 22.04LTS 系统和宝塔面板</p>\n<h2 id=\"开始之前的准备\"><a class=\"anchor\" href=\"#开始之前的准备\">#</a> 开始之前的准备</h2>\n<p>你的宝塔 nginx 必须是<strong> 1.22</strong> 版本或更高版本，如果不是请 <code>卸载-&gt;编译安装</code>  <br />\n记得备份 nginx 主配置文件 (/www/server/nginx/conf/nginx.conf), 下面开始安装前置库:</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">apt</span> <span class=\"token function\">install</span> build-essential ca-certificates zlib1g-dev libpcre3 libpcre3-dev <span class=\"token function\">tar</span> <span class=\"token function\">unzip</span> libssl-dev <span class=\"token function\">wget</span> <span class=\"token function\">curl</span> <span class=\"token function\">git</span> cmake ninja-build golang</pre></td></tr></table></figure><p>随后执行:</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">apt</span> <span class=\"token function\">install</span> hgsubversion</pre></td></tr></table></figure><p>如果报错，更改为:</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">apt</span> <span class=\"token function\">install</span> mercurial</pre></td></tr></table></figure><h2 id=\"编译boringssl\"><a class=\"anchor\" href=\"#编译boringssl\">#</a> 编译 boringssl</h2>\n<p>众所周知，openssl 已经把 QUIC 支持扔到一边了，所以本次使用 boringssl 提供 ssl 支持 <br />\n执行下列指令编译 boringssl:</p>\n<div class=\"note info\">\n<p>下列指令需要 gcc 支持 C++14 或更高标准，建议升级为 gcc9 以上版本</p>\n</div>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">git</span> clone <span class=\"token parameter variable\">--depth</span><span class=\"token operator\">=</span><span class=\"token number\">1</span> https://github.com/google/boringssl.git </pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\"># github 速度问题自行解决</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token builtin class-name\">cd</span> boringssl</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token function\">mkdir</span> build</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token builtin class-name\">cd</span> build</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>cmake <span class=\"token parameter variable\">-GNinja</span> <span class=\"token punctuation\">..</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>ninja</pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token builtin class-name\">cd</span> <span class=\"token punctuation\">..</span>/<span class=\"token punctuation\">..</span></pre></td></tr></table></figure><p>如果出现了网络问题，执行如下命令:</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>go <span class=\"token function\">env</span> <span class=\"token parameter variable\">-w</span> <span class=\"token assign-left variable\">GOPROXY</span><span class=\"token operator\">=</span>https://goproxy.cn,direct</pre></td></tr></table></figure><div class=\"note danger\">\n<p>如果站点的 SSL 配置使用了 OSCP 装订 ( <code>ssl_stapling</code> ) 请直接注释 <br />\nboringssl 不支持 OSCP 装订，会导致后续步骤无法执行</p>\n</div>\n<h2 id=\"获取并编译nginx-quic\"><a class=\"anchor\" href=\"#获取并编译nginx-quic\">#</a> 获取并编译 nginx-quic</h2>\n<h3 id=\"获取nginx-quic\"><a class=\"anchor\" href=\"#获取nginx-quic\">#</a> 获取 nginx-quic</h3>\n<p>使用 hg 获取 nginx-quic 的代码:</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">hg</span> clone <span class=\"token parameter variable\">-b</span> quic https://hg.nginx.org/nginx-quic</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">apt-get</span> build-dep nginx</pre></td></tr></table></figure><p>获取 nginx 编译参数:</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>nginx <span class=\"token parameter variable\">-V</span> <span class=\"token comment\">#或 /www/server/nginx/sbin/nginx -V</span></pre></td></tr></table></figure><p>结果应该类似于下面:</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>nginx version: nginx/1.22.0</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>built by gcc <span class=\"token number\">11.2</span>.0 <span class=\"token punctuation\">(</span>Ubuntu <span class=\"token number\">11.2</span>.0-19ubuntu1<span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"3\"></td><td><pre>built with OpenSSL <span class=\"token number\">1.1</span>.1o</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>TLS SNI support enabled</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>configure arguments: <span class=\"token parameter variable\">--user</span><span class=\"token operator\">=</span>www <span class=\"token parameter variable\">--group</span><span class=\"token operator\">=</span>www <span class=\"token parameter variable\">--prefix</span><span class=\"token operator\">=</span>/www/server/nginx --add-module<span class=\"token operator\">=</span>/www/server/nginx/src/ngx_devel_kit --add-module<span class=\"token operator\">=</span>/www/server/nginx/src/lua_nginx_module --add-module<span class=\"token operator\">=</span>/www/server/nginx/src/ngx_cache_purge --add-module<span class=\"token operator\">=</span>/www/server/nginx/src/nginx-sticky-module --with-openssl<span class=\"token operator\">=</span>/www/server/nginx/src/openssl --with-pcre<span class=\"token operator\">=</span>pcre-8.43 --with-http_v2_module --with-stream --with-stream_ssl_module --with-stream_ssl_preread_module --with-http_stub_status_module --with-http_ssl_module --with-http_image_filter_module --with-http_gzip_static_module --with-http_gunzip_module --with-ipv6 --with-http_sub_module --with-http_flv_module --with-http_addition_module --with-http_realip_module --with-http_mp4_module --with-ld-opt<span class=\"token operator\">=</span>-Wl,-E --with-cc-opt<span class=\"token operator\">=</span>-Wno-error --with-ld-opt<span class=\"token operator\">=</span>-ljemalloc --with-http_dav_module --add-module<span class=\"token operator\">=</span>/www/server/nginx/src/nginx-dav-ext-module</pre></td></tr></table></figure><p>将 <code>configure arguments</code>  记住并做更改：将 <code>--with-openssl</code>  参数删除，修改 <code>--with-pcre=pcre-8.43</code>  为 <code>--with-pcre=/www/server/nginx/src/pcre-8.43</code>  <br />\n添加下列参数在末尾:  <code>--with-http_v3_module --with-stream_quic_module --with-cc-opt=-I../boringssl/include --with-ld-opt='-L../boringssl/build/ssl -L../boringssl/build/crypto'</code> (boringssl 路径注意一下)</p>\n<h3 id=\"编译nginx-quic\"><a class=\"anchor\" href=\"#编译nginx-quic\">#</a> 编译 nginx-quic</h3>\n<p>执行下列命令:</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token builtin class-name\">cd</span> nginx-quic</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>./auto/configure <span class=\"token string\">\"你的configure arguments\"</span></pre></td></tr></table></figure><p>等到配置结束后，删除 <code>objs/Makefile</code>  中的 <code>-Werror</code>  参数<br />\n随后更改 nginx 模块源码，让部分模块适配 nginx 1.23<br />\n 打开 <code>/www/server/nginx/src/lua_nginx_module/src/ngx_http_lua_headers_in.c</code>  文件，转到 162 行，将 cookies 更改为 cookie<br />\n 更改后的代码如下:</p>\n<figure class=\"highlight cpp\"><figcaption data-lang=\"C++\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">offsetof</span><span class=\"token punctuation\">(</span>ngx_http_headers_in_t<span class=\"token punctuation\">,</span> cookie<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr></table></figure><p>打开 <code>/www/server/nginx/src/nginx-sticky-module/ngx_http_sticky_module.c</code>  文件，转到 207 行，将代码更改为如下内容:</p>\n<figure class=\"highlight cpp\"><figcaption data-lang=\"C++\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">ngx_http_parse_multi_header_lines</span><span class=\"token punctuation\">(</span>r<span class=\"token punctuation\">,</span> r<span class=\"token operator\">-></span>headers_in<span class=\"token punctuation\">.</span>cookie<span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>iphp<span class=\"token operator\">-></span>sticky_conf<span class=\"token operator\">-></span>cookie_name<span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>route<span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr></table></figure><p>随后开始编译:</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">make</span> <span class=\"token parameter variable\">-j8</span> <span class=\"token comment\"># -j 后为你的 CPU 核心数乘以 2</span></pre></td></tr></table></figure><h3 id=\"替换nginx\"><a class=\"anchor\" href=\"#替换nginx\">#</a> 替换 nginx</h3>\n<p>开始替换原本的 nginx:</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">mv</span> /www/server/nginx/sbin/nginx<span class=\"token punctuation\">&#123;</span>,.bak<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">cp</span> objs/nginx /www/server/nginx/sbin</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token function\">make</span> upgrade</pre></td></tr></table></figure><h2 id=\"配置http3\"><a class=\"anchor\" href=\"#配置http3\">#</a> 配置 HTTP/3</h2>\n<p>打开站点配置文件，在 <code>listen 443 ssl http2</code>  后增加:</p>\n<figure class=\"highlight nginx\"><figcaption data-lang=\"nginx\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token directive\"><span class=\"token keyword\">listen</span> <span class=\"token number\">443</span> quic reuseport</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><div class=\"note info\">\n<p>添加后所有站点都会开启 HTTP/3, 不要重复配置 (会报错)</p>\n</div>\n<p>在 <code>root xxx</code>  之后添加:</p>\n<figure class=\"highlight nginx\"><figcaption data-lang=\"nginx\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token directive\"><span class=\"token keyword\">add_header</span> Alt-Svc <span class=\"token string\">'h3=\":443\"; ma=86400'</span></span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>随后开启防火墙 udp (推荐使用宝塔防火墙应用), 将 443 端口更改为 <code>tcp/udp</code>  <br />\n服务器安全组也需要开启 UDP443 端口</p>\n<h2 id=\"检验http3是否生效\"><a class=\"anchor\" href=\"#检验http3是否生效\">#</a> 检验 HTTP/3 是否生效</h2>\n<p>edge 浏览器进入 <code>edge://flags/</code> , 搜索 <code>Experimental QUIC protocol</code>  调整为 <code>enable</code>  即可打开<br />\n建议安装 <code>http-indicator</code> , 当小闪电变成橙色时 HTTP/3 就开启了<br />\n也可以使用网络面板，如果资源为 <code>h3</code>  协议，代表开启了 HTTP/3</p>\n<h2 id=\"常见问题\"><a class=\"anchor\" href=\"#常见问题\">#</a> 常见问题</h2>\n<blockquote>\n<p>Q: 出现 <code>nginx: [warn] &quot;ssl_stapling&quot; ignored, not supported</code>  导致 <code>make upgrade</code>  无法运行 <br />\nA: 调整站点配置文件 <code>/www/server/panel/vhost/nginx/*.conf</code> , 将 <code>ssl_stapling</code>  和 <code>ssl_stapling_verify</code>  删除</p>\n</blockquote>\n<blockquote>\n<p>Q: 出现无原因的 <code>nginx conf test failed</code>  <br />\nA: 卸载宝塔 nginx 防火墙后应该会解决</p>\n</blockquote>\n<h2 id=\"参考文章\"><a class=\"anchor\" href=\"#参考文章\">#</a> 参考文章</h2>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLm9yYW5naWkuY24vMjAyMi9idC1wYW5lbC1lbmFibGUtaHR0cDMv\">教程：宝塔编译 Nginx 开启 HTTP/3</span> <br />\n<span class=\"exturl\" data-url=\"aHR0cHM6Ly9iaXRidWNrZXQub3JnL25naW54LWdvb2RpZXMvbmdpbngtc3RpY2t5LW1vZHVsZS1uZy9wdWxsLXJlcXVlc3RzLzU=\">make it compatible with nginx 1.23</span></p>\n",
            "tags": [
                "网站建设",
                "nginx",
                "quic"
            ]
        },
        {
            "id": "https://www.kaitaku.xyz/python/easy/pythonexe/",
            "url": "https://www.kaitaku.xyz/python/easy/pythonexe/",
            "title": "python打包exe-pyinstaller和nuitka",
            "date_published": "2022-06-01T05:15:31.000Z",
            "content_html": "<h1 id=\"引言\"><a class=\"anchor\" href=\"#引言\">#</a> 引言</h1>\n<p>python 的编写十分简单，而且 linux 内置 python 解释器，无需额外安装<br />\n但 windows 系统需要手动安装 python 解释器，一般来说会提高用户上手难度<br />\n本文会介绍两种 python 文件打包为 exe 的方式</p>\n<h1 id=\"pyinstaller\"><a class=\"anchor\" href=\"#pyinstaller\">#</a> pyinstaller</h1>\n<h2 id=\"基础操作\"><a class=\"anchor\" href=\"#基础操作\">#</a> 基础操作</h2>\n<p>pyinstaller 是最常见的 python 文件打包器，也是最易于使用的<br />\n先使用 pip 安装:</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>pip <span class=\"token function\">install</span> pyinstaller</pre></td></tr></table></figure><p>然后 cd 到你的 python 项目目录下，本次使用作者的网络工具箱测试:</p>\n<div class=\"note info\">\n<p>工具箱包含了 requests、os、socket 等库，大约 300 行左右</p>\n</div>\n<p>假设这个文件为 <code>main.py</code> , 下面进行打包:</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>pyinstaller <span class=\"token parameter variable\">-c</span> main.py</pre></td></tr></table></figure><p>随后开始漫长的打包，等到出现:</p>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>XXXXX INFO: Building COLLECT COLLECT-00.toc completed successfully.</pre></td></tr></table></figure><p>打包就完成了，可以前往 dist 文件夹下查看 <code>main.exe</code></p>\n<h2 id=\"进阶玩法\"><a class=\"anchor\" href=\"#进阶玩法\">#</a> 进阶玩法</h2>\n<h3 id=\"打包成单个exe\"><a class=\"anchor\" href=\"#打包成单个exe\">#</a> 打包成单个 exe</h3>\n<p>刚刚打包出来的文件是一个文件夹，还需要二次压缩，可以变更一下指令:</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>pyinstaller <span class=\"token parameter variable\">-F</span> <span class=\"token parameter variable\">-c</span> main.py</pre></td></tr></table></figure><p>这样打包出来的就是一个 exe 文件了，体积会大一点</p>\n<h3 id=\"upx压缩\"><a class=\"anchor\" href=\"#upx压缩\">#</a> upx 压缩</h3>\n<p>前往<span class=\"exturl\" data-url=\"aHR0cHM6Ly91cHguZ2l0aHViLmlvLw==\"> upx 官网</span> 下载 upx, 将 <code>upx.exe</code>  放在项目目录下<br />\n然后执行 <code>pyinstaller -F -c main.py</code>  即可</p>\n<div class=\"note info\">\n<p>upx 压缩后占用空间会小很多，但执行速度会慢一点 <br />\n如果使用 numpy 等底层为 C 的第三方库，请不要使用 upx</p>\n</div>\n<h1 id=\"nuitka\"><a class=\"anchor\" href=\"#nuitka\">#</a> nuitka</h1>\n<p>pyinstaller 打包十分简便，但也存在以下问题:</p>\n<ul>\n<li>python 本身执行速度就很慢</li>\n<li>执行速度较慢，比 python 还慢</li>\n<li>反编译非常容易<span class=\"spoiler\" title=\"你知道得太多了\">一条龙 pyinstaller 反编译产业链了属于是</span></li>\n</ul>\n<p>而本次的 <code>nuitka</code>  便可以解决上述的问题，它的会先将 python 文件转成 <code>C++</code>  代码，随后进行编译 <br />\n这就让 <code>nuitka</code>  编译出的文件具有 <code>C++</code>  的速度和反反编译能力 \\</p>\n<h2 id=\"安装\"><a class=\"anchor\" href=\"#安装\">#</a> 安装</h2>\n<p>先安装 nuitka:</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>pip <span class=\"token function\">install</span> nuitka</pre></td></tr></table></figure><p>然后安装<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2JyZWNodHNhbmRlcnMvd2lubGlic19taW5ndy9yZWxlYXNlcy90YWcvMTIuMS4wLTEwLjAuMC1tc3ZjcnQtcjE=\"> winlibs</span><br />\n 注意事项:</p>\n<ul>\n<li>i686=32 位，x86_64=64 位</li>\n<li>选择 7z 结尾的文件</li>\n<li>如果太慢了，可以使用<span class=\"exturl\" data-url=\"aHR0cHM6Ly9tb2V5eS5jbi9naC1wcm94eS8=\"> moeyy 的 github 加速</span> 进行加速</li>\n</ul>\n<p>然后将这个文件夹放在任意位置，自行添加 path 到 <code>mingw64\\bin</code>  目录<br />\n输入 <code>gcc --version</code> , 如果有正常输出，就是成功了</p>\n<h2 id=\"使用\"><a class=\"anchor\" href=\"#使用\">#</a> 使用</h2>\n<p>打开你的项目文件，运行下列命令:</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>nuitka <span class=\"token parameter variable\">--mingw64</span> <span class=\"token parameter variable\">--standalone</span> --show-progress --show-memory --output-dir<span class=\"token operator\">=</span>out main.py</pre></td></tr></table></figure><p>选项的用途:</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">选项</th>\n<th style=\"text-align:center\">用途</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">--mingw64</td>\n<td style=\"text-align:center\">指定 mingw64 编译器编译，默认为 msvc</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">--standalone</td>\n<td style=\"text-align:center\">指定独立环境运行，不然无法独立运行</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">--show-progress</td>\n<td style=\"text-align:center\">显示编译进度</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">--show-memory</td>\n<td style=\"text-align:center\">显示占用内存</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">--output-dir</td>\n<td style=\"text-align:center\">指定输出目录</td>\n</tr>\n</tbody>\n</table>\n<p>随后，你的终端会和这个一样:<br />\n<img data-src=\"https://static.aichat.net/chat/202206/454346ba-e5fa-49cc-8418-fe0cb9c6cf1f.png\" alt=\"image.png\" /><br />\n 在这里会弹出来一个选择，问你需不需要 ccache 进行加速，如果你的网络环境良好 (github 下载 2MB/S 以上) 可以输入 yes, 反之选 no</p>\n<div class=\"note info\">\n<p>如果不是 ccache 可以参考第一步重新下载 winlibs</p>\n</div>\n<p>选择过后:<br />\n<img data-src=\"https://static.aichat.net/chat/202206/bc433154-3802-4727-823e-f6ac805184ca.png\" alt=\"image.png\" /><br />\n 还会弹出一个选项，应该是 DLL 分析的，选 YES<br />\n 随后等一段时间，编译就完成了，可以到 <code>out/main.dist</code>  下找到 EXE 文件</p>\n<h2 id=\"单文件打包与压缩\"><a class=\"anchor\" href=\"#单文件打包与压缩\">#</a> 单文件打包与压缩</h2>\n<p><code>nuitka</code>  支持使用 <code>zstd</code>  算法进行压缩，可以通过 <code>pip</code>  安装</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>pip <span class=\"token function\">install</span> zstandard</pre></td></tr></table></figure><p>随后更改命令行:</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>nuitka <span class=\"token parameter variable\">--mingw64</span> <span class=\"token parameter variable\">--standalone</span> --show-progress --show-memory --output-dir<span class=\"token operator\">=</span>out <span class=\"token parameter variable\">--onefile</span> main.py</pre></td></tr></table></figure><div class=\"note info\">\n<p>可以加入 <code>--lto=yes</code>  来启用 LTO 优化</p>\n</div>\n<p>随后在执行时会输出:</p>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>Nuitka-Scons:INFO: Onefile C compiler: gcc (gcc).</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>Nuitka-Scons:INFO: Onefile linking program (no progress information available).</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>Nuitka-Onefile:INFO: Using compression for onefile payload.</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>Nuitka-Onefile:INFO: Onefile payload compression ratio (30.72%) size 24183275 to 7429408.</pre></td></tr></table></figure><p>这代表单文件打包和文件压缩已经完成，文件会输出在 <code>out</code>  目录下</p>\n",
            "tags": [
                "python",
                "基础篇",
                "python"
            ]
        },
        {
            "id": "https://www.kaitaku.xyz/webbuild/shokapatch/",
            "url": "https://www.kaitaku.xyz/webbuild/shokapatch/",
            "title": "shoka主题-对shoka主题的小修小补",
            "date_published": "2022-05-30T11:58:57.000Z",
            "content_html": "<div class=\"note info\">\n<p>本篇为本站 LTS 文章，会长期更新</p>\n</div>\n<h1 id=\"引言\"><a class=\"anchor\" href=\"#引言\">#</a> 引言</h1>\n<p>最近摸了一个月鱼没有更新什么正经文章，基本都是 shoka 的改造<br />\n近期在<span class=\"spoiler\" title=\"你知道得太多了\">摸鱼</span>时发现 shoka 主题的 js 有近 200 个弱警告和 10 余个警告，就想处理一下这些警告</p>\n<div class=\"note info\">\n<p>本文基本是兼容性换性能和未来支持，基本 IE 系列就全系不支持了</p>\n</div>\n<h1 id=\"es6语法\"><a class=\"anchor\" href=\"#es6语法\">#</a> ES6 语法</h1>\n<h2 id=\"升级uglifyjs\"><a class=\"anchor\" href=\"#升级uglifyjs\">#</a> 升级 uglifyjs</h2>\n<div class=\"note info\">\n<p>建议使用 <code>hexo-renderer-multi-next-markdown-it</code> , 卸载 <code>hexo-renderer-multi-markdown-it</code>  后安装即可</p>\n</div>\n<p>铺面而来的就是 <code>使用了var而非let或const</code>  这个警告，随后就直接使用了 WebStorm 的快速修复，然后 <code>hexo g</code> :</p>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>ERROR: Unexpected token: keyword «const»</pre></td></tr></table></figure><p>网上针对这个的教程都是替换为 <code>uglify-es</code> , 但在<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvdWdsaWZ5LWVz\"> npm 主页</span> 中明确写道:  <code>support for ECMAScript is superseded by 'uglify-js' as of v3.13.0</code> <br />\n 所以直接升级 uglify-js 即可:<br />\n 打开 <code>yourblog\\node_modules\\hexo-renderer-multi-markdown-it\\</code> , 随后运行 <code>cnpm i uglify-js</code> , 等待安装完毕。<br />\n随后打开 <code>node_modules\\hexo-renderer-multi-markdown-it\\lib\\filter.js</code> , 打开第 90 行左右:</p>\n<figure class=\"highlight javascript\"><figcaption data-lang=\"javascript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">var</span> result <span class=\"token operator\">=</span> UglifyJS<span class=\"token punctuation\">.</span><span class=\"token function\">minify</span><span class=\"token punctuation\">(</span>str<span class=\"token punctuation\">,</span> options<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">var</span> saved <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>str<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> result<span class=\"token punctuation\">.</span>code<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> str<span class=\"token punctuation\">.</span>length <span class=\"token operator\">*</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>options<span class=\"token punctuation\">.</span>logger<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">var</span> log <span class=\"token operator\">=</span> hexo<span class=\"token punctuation\">.</span>log <span class=\"token operator\">||</span> console<span class=\"token punctuation\">.</span>log<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    log<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'minify the js: %s [ %s saved]'</span><span class=\"token punctuation\">,</span> path<span class=\"token punctuation\">,</span> saved <span class=\"token operator\">+</span> <span class=\"token string\">'%'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">var</span> js_result <span class=\"token operator\">=</span> result<span class=\"token punctuation\">.</span>code<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>options<span class=\"token punctuation\">.</span>stamp<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">var</span> prefix <span class=\"token operator\">=</span> <span class=\"token string\">'// build time:'</span> <span class=\"token operator\">+</span> <span class=\"token function\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toLocaleString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"\\n\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">var</span> end <span class=\"token operator\">=</span> <span class=\"token string\">'\\n//rebuild by hrmmi '</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    js_result <span class=\"token operator\">=</span> prefix <span class=\"token operator\">+</span> js_result <span class=\"token operator\">+</span> end<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">return</span> js_result<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>更改为:</p>\n<figure class=\"highlight javascript\"><figcaption data-lang=\"javascript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">const</span> uglify_v3_allow_options <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"parse\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"compress\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"mangle\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"output\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"sourceMap\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"nameCache\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"toplevel\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"warnings\"</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">const</span> uglify_options <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> key <span class=\"token keyword\">of</span> uglify_v3_allow_options<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>options<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">!==</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span> uglify_options<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> options<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">var</span> result <span class=\"token operator\">=</span> UglifyJS<span class=\"token punctuation\">.</span><span class=\"token function\">minify</span><span class=\"token punctuation\">(</span>str<span class=\"token punctuation\">,</span> uglify_options<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>result<span class=\"token punctuation\">.</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token keyword\">var</span> saved <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>str<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> result<span class=\"token punctuation\">.</span>code<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> str<span class=\"token punctuation\">.</span>length <span class=\"token operator\">*</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>options<span class=\"token punctuation\">.</span>logger<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            <span class=\"token keyword\">var</span> log <span class=\"token operator\">=</span> hexo<span class=\"token punctuation\">.</span>log <span class=\"token operator\">||</span> console<span class=\"token punctuation\">.</span>log<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            log<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'minify the js: %s [ %s saved]'</span><span class=\"token punctuation\">,</span> path<span class=\"token punctuation\">,</span> saved <span class=\"token operator\">+</span> <span class=\"token string\">'%'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token keyword\">var</span> js_result <span class=\"token operator\">=</span> result<span class=\"token punctuation\">.</span>code<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>options<span class=\"token punctuation\">.</span>stamp<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>            <span class=\"token keyword\">var</span> prefix <span class=\"token operator\">=</span> <span class=\"token string\">'// build time:'</span> <span class=\"token operator\">+</span> <span class=\"token function\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toLocaleString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"\\n\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            <span class=\"token keyword\">var</span> end <span class=\"token operator\">=</span> <span class=\"token string\">'\\n//rebuild by kaitaku'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>            js_result <span class=\"token operator\">=</span> prefix <span class=\"token operator\">+</span> js_result <span class=\"token operator\">+</span> end<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">throw</span> result<span class=\"token punctuation\">.</span>error<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token keyword\">return</span> js_result<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h2 id=\"替换var\"><a class=\"anchor\" href=\"#替换var\">#</a> 替换 var</h2>\n<p>建议直接使用 WebStorm 的快速修复替换，没有更快的方法了<br />\n但是需要将以下几行代码重新排序:</p>\n<figure class=\"highlight javascript\"><figcaption data-lang=\"javascript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$<span class=\"token punctuation\">.</span><span class=\"token function\">each</span><span class=\"token punctuation\">(</span>p <span class=\"token operator\">+</span> <span class=\"token string\">' .md img:not(.emoji):not(.vemoji)'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">element</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>                <span class=\"token keyword\">const</span> $image <span class=\"token operator\">=</span> <span class=\"token function\">q</span><span class=\"token punctuation\">(</span>element<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 放到这个位置</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>                <span class=\"token keyword\">const</span> imageLink <span class=\"token operator\">=</span> $image<span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data-src'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> $image<span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'src'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 放到这个位置</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>                <span class=\"token keyword\">const</span> $imageWrapLink <span class=\"token operator\">=</span> $image<span class=\"token punctuation\">.</span><span class=\"token function\">wrap</span><span class=\"token punctuation\">(</span><span class=\"token string\">'&lt;a class=\"fancybox\" href=\"'</span> <span class=\"token operator\">+</span> imageLink <span class=\"token operator\">+</span> <span class=\"token string\">'\" itemscope itemtype=\"http://schema.org/ImageObject\" itemprop=\"url\">&lt;/a>'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">parent</span><span class=\"token punctuation\">(</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>                <span class=\"token keyword\">let</span> info<span class=\"token punctuation\">,</span> captionClass <span class=\"token operator\">=</span> <span class=\"token string\">'image-info'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>$image<span class=\"token punctuation\">.</span><span class=\"token function\">is</span><span class=\"token punctuation\">(</span><span class=\"token string\">'a img'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>                    $image<span class=\"token punctuation\">.</span><span class=\"token function\">data</span><span class=\"token punctuation\">(</span><span class=\"token string\">'safe-src'</span><span class=\"token punctuation\">,</span> imageLink<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>                    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>$image<span class=\"token punctuation\">.</span><span class=\"token function\">is</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.gallery img'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>                        $imageWrapLink<span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data-fancybox'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'default'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'rel'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'default'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>                    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>                        captionClass <span class=\"token operator\">=</span> <span class=\"token string\">'jg-caption'</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>                    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><div class=\"note warning\">\n<p>下面的代码块是错误的代码块，请手动替换下面函数内的 <code>const</code>  和 <code>let</code> , 不要使用 WebStorm 的自动替换</p>\n</div>\n<figure class=\"highlight javascript\"><figcaption data-lang=\"javascript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$<span class=\"token punctuation\">.</span><span class=\"token function\">each</span><span class=\"token punctuation\">(</span><span class=\"token string\">'figure.highlight'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">element</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>        <span class=\"token keyword\">const</span> code_container <span class=\"token operator\">=</span> element<span class=\"token punctuation\">.</span><span class=\"token function\">child</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.code-container'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 放到这</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token keyword\">const</span> showBtn <span class=\"token operator\">=</span> code_container<span class=\"token punctuation\">.</span><span class=\"token function\">child</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.show-btn'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">hideCode</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>            code_container<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>maxHeight <span class=\"token operator\">=</span> <span class=\"token string\">\"300px\"</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>            showBtn<span class=\"token punctuation\">.</span><span class=\"token function\">removeClass</span><span class=\"token punctuation\">(</span><span class=\"token string\">'open'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h1 id=\"处理部分弃用语法\"><a class=\"anchor\" href=\"#处理部分弃用语法\">#</a> 处理部分弃用语法</h1>\n<h2 id=\"杂项属性\"><a class=\"anchor\" href=\"#杂项属性\">#</a> 杂项属性</h2>\n<p><code>global.js</code>  中第 196 行的 <code>pageYOffset</code>  已经被标记为了弃用，可以使用 <code>scrollY</code>  代替，直接全局替换即可<br />\n <code>player.js</code>  第 470 行的 <code>webkitTransform</code>  已被标记为弃用，可以直接删除</p>\n<h2 id=\"execcommand处理\"><a class=\"anchor\" href=\"#execcommand处理\">#</a> execCommand 处理</h2>\n<p>主题使用了 <code>execCommand</code>  进行代码块复制操作，但现在 <code>execCommand</code>  已经被标记为了弃用<br />\n现在已经推出了新的<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWIvQVBJL0NsaXBib2FyZA==\"> ClipboardAPI</span> 来进行剪切板操作，这个 API 有以下优点:</p>\n<ul>\n<li>底层为异步，速度较快</li>\n<li>代码复杂度低，逻辑简单</li>\n<li>主流浏览器支持较好 (对于一个新兴 API 而言)</li>\n</ul>\n<div class=\"note info\">\n<p><code>clipboardAPI</code>  只能在安全上下文 (HTTPS) 中使用</p>\n</div>\n<p>打开 <code>global.js</code>  第 276 行，找到如下代码:</p>\n<figure class=\"highlight javascript\"><figcaption data-lang=\"javascript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">clipBoard</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">str<span class=\"token punctuation\">,</span> callback</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">const</span> ta <span class=\"token operator\">=</span> <span class=\"token constant\">BODY</span><span class=\"token punctuation\">.</span><span class=\"token function\">createChild</span><span class=\"token punctuation\">(</span><span class=\"token string\">'textarea'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token literal-property property\">style</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>            <span class=\"token literal-property property\">top</span><span class=\"token operator\">:</span> window<span class=\"token punctuation\">.</span>scrollY <span class=\"token operator\">+</span> <span class=\"token string\">'px'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// Prevent page scrolling</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>            <span class=\"token literal-property property\">position</span><span class=\"token operator\">:</span> <span class=\"token string\">'absolute'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>            <span class=\"token literal-property property\">opacity</span><span class=\"token operator\">:</span> <span class=\"token string\">'0'</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token literal-property property\">readOnly</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> str</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">const</span> selection <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getSelection</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token keyword\">const</span> selected <span class=\"token operator\">=</span> selection<span class=\"token punctuation\">.</span>rangeCount <span class=\"token operator\">></span> <span class=\"token number\">0</span> <span class=\"token operator\">?</span> selection<span class=\"token punctuation\">.</span><span class=\"token function\">getRangeAt</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    ta<span class=\"token punctuation\">.</span><span class=\"token function\">select</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    ta<span class=\"token punctuation\">.</span><span class=\"token function\">setSelectionRange</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> str<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    ta<span class=\"token punctuation\">.</span>readOnly <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">execCommand</span><span class=\"token punctuation\">(</span><span class=\"token string\">'copy'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    callback <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">callback</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    ta<span class=\"token punctuation\">.</span><span class=\"token function\">blur</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// For iOS</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>selected<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        selection<span class=\"token punctuation\">.</span><span class=\"token function\">removeAllRanges</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        selection<span class=\"token punctuation\">.</span><span class=\"token function\">addRange</span><span class=\"token punctuation\">(</span>selected<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token constant\">BODY</span><span class=\"token punctuation\">.</span><span class=\"token function\">removeChild</span><span class=\"token punctuation\">(</span>ta<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>将其更改为如下代码:</p>\n<figure class=\"highlight javascript\"><figcaption data-lang=\"javascript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">clipBoard</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">str<span class=\"token punctuation\">,</span> callback</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>navigator<span class=\"token punctuation\">.</span>clipboard <span class=\"token operator\">&amp;&amp;</span> window<span class=\"token punctuation\">.</span>isSecureContext<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"使用clipboard复制\"</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 测试</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        navigator<span class=\"token punctuation\">.</span>clipboard<span class=\"token punctuation\">.</span><span class=\"token function\">writeText</span><span class=\"token punctuation\">(</span>str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>            callback <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">callback</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>            callback <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">callback</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"使用execCommand复制\"</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 测试</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token keyword\">const</span> ta <span class=\"token operator\">=</span> <span class=\"token constant\">BODY</span><span class=\"token punctuation\">.</span><span class=\"token function\">createChild</span><span class=\"token punctuation\">(</span><span class=\"token string\">'textarea'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            <span class=\"token literal-property property\">style</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>                <span class=\"token literal-property property\">top</span><span class=\"token operator\">:</span> window<span class=\"token punctuation\">.</span>scrollY <span class=\"token operator\">+</span> <span class=\"token string\">'px'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// Prevent page scrolling</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>                <span class=\"token literal-property property\">position</span><span class=\"token operator\">:</span> <span class=\"token string\">'absolute'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>                <span class=\"token literal-property property\">opacity</span><span class=\"token operator\">:</span> <span class=\"token string\">'0'</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            <span class=\"token literal-property property\">readOnly</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>            <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> str</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token keyword\">const</span> selection <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getSelection</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token keyword\">const</span> selected <span class=\"token operator\">=</span> selection<span class=\"token punctuation\">.</span>rangeCount <span class=\"token operator\">></span> <span class=\"token number\">0</span> <span class=\"token operator\">?</span> selection<span class=\"token punctuation\">.</span><span class=\"token function\">getRangeAt</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        ta<span class=\"token punctuation\">.</span><span class=\"token function\">select</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        ta<span class=\"token punctuation\">.</span><span class=\"token function\">setSelectionRange</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> str<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        ta<span class=\"token punctuation\">.</span>readOnly <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">execCommand</span><span class=\"token punctuation\">(</span><span class=\"token string\">'copy'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        callback <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">callback</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        ta<span class=\"token punctuation\">.</span><span class=\"token function\">blur</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// For iOS</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>selected<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>            selection<span class=\"token punctuation\">.</span><span class=\"token function\">removeAllRanges</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>            selection<span class=\"token punctuation\">.</span><span class=\"token function\">addRange</span><span class=\"token punctuation\">(</span>selected<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>        <span class=\"token constant\">BODY</span><span class=\"token punctuation\">.</span><span class=\"token function\">removeChild</span><span class=\"token punctuation\">(</span>ta<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>随后重新生成静态文件，打开任意界面复制代码，如果控制台输出了 <code>使用clipboard复制</code> ，就可以把两行带有测试注释的代码删掉了</p>\n<div class=\"note info\">\n<p>目前修补仍在缓慢进行中，此文章会不定期更新</p>\n</div>\n",
            "tags": [
                "网站建设",
                "shoka"
            ]
        },
        {
            "id": "https://www.kaitaku.xyz/notice/",
            "url": "https://www.kaitaku.xyz/notice/",
            "title": "公告",
            "date_published": "2022-05-14T00:35:17.000Z",
            "content_html": "<h1 id=\"本站公告\"><a class=\"anchor\" href=\"#本站公告\">#</a> 本站公告</h1>\n<h2 id=\"公告区\"><a class=\"anchor\" href=\"#公告区\">#</a> 公告区</h2>\n<p>本站已正式更换为 shokaX 主题</p>\n<h3 id=\"维护计划\"><a class=\"anchor\" href=\"#维护计划\">#</a> 维护计划</h3>\n<ul>\n<li>在 2 月可能会有一次较长时间的停机更新</li>\n</ul>\n<hr />\n<h2 id=\"更新计划\"><a class=\"anchor\" href=\"#更新计划\">#</a> 更新计划</h2>\n<ul class=\"task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_0\" disabled=\"true\" /><label for=\"cbx_0\"> 浓缩 python 基础篇</label></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_1\" checked=\"true\" disabled=\"true\" /><label for=\"cbx_1\"> 再逝逝 QUIC-nginx</label></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_2\" checked=\"true\" disabled=\"true\" /><label for=\"cbx_2\"> 给 twikoo 加亿点表情</label></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_3\" disabled=\"true\" /><label for=\"cbx_3\"> 写个更友好的 404 界面</label></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_4\" disabled=\"true\" /><label for=\"cbx_4\"> 加入亿点点毛玻璃特效 <span class=\"spoiler\" title=\"你知道得太多了\">¿</span></label></li>\n</ul>\n",
            "tags": []
        },
        {
            "id": "https://www.kaitaku.xyz/webbuild/shokatwikoo/",
            "url": "https://www.kaitaku.xyz/webbuild/shokatwikoo/",
            "title": "shoka主题-更换评论区为twikoo",
            "date_published": "2022-04-23T12:52:28.000Z",
            "content_html": "<h1 id=\"更改评论区\"><a class=\"anchor\" href=\"#更改评论区\">#</a> 更改评论区</h1>\n<h2 id=\"更改njk模板\"><a class=\"anchor\" href=\"#更改njk模板\">#</a> 更改 njk 模板</h2>\n<p>打开 <code>yourblog\\themes\\shoka\\layout\\_macro\\comment.njk</code> , 然后把代码改为如下格式:</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>&#123;% macro render() %&#125;</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>&#123;%- if page.comment !== false %&#125;</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  &#123;%- if theme.twikoo.enable %&#125;</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>tcomments<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://cdn.jsdelivr.net/npm/twikoo@1.5.4/dist/twikoo.all.min.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    &#123;%- if theme.twikoo.mode === \"vercel\" %&#125;</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">data-pjax</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\"></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>      twikoo<span class=\"token punctuation\">.</span><span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>      <span class=\"token literal-property property\">envId</span><span class=\"token operator\">:</span> <span class=\"token string\">\"&#123;&#123; theme.twikoo.envId &#125;&#125;\"</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 腾讯云环境填 envId；Vercel 环境填地址（https://xxx.vercel.app）</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>      <span class=\"token literal-property property\">el</span><span class=\"token operator\">:</span> <span class=\"token string\">'#tcomments'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 容器元素</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>      <span class=\"token comment\">//region: 'ap-guangzhou', // 环境地域，默认为 ap-shanghai，腾讯云环境填 ap-shanghai 或 ap-guangzhou；Vercel 环境不填</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>      <span class=\"token comment\">//path: 'window.location.pathname', // 用于区分不同文章的自定义 js 路径，如果您的文章路径不是 location.pathname，需传此参数</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>      <span class=\"token comment\">//lang: 'zh-CN', // 用于手动设定评论区语言，支持的语言列表 https://github.com/imaegoo/twikoo/blob/main/src/js/utils/i18n/index.js</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>      </span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    &#123;%- else %&#125;</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">data-pjax</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>      twikoo.init(&#123;</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>      envId: \"&#123;&#123; theme.twikoo.envId &#125;&#125;\", // 腾讯云环境填 envId；Vercel 环境填地址（https://xxx.vercel.app）</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>      el: '#tcomments', // 容器元素</pre></td></tr><tr><td data-num=\"21\"></td><td><pre>      region: '&#123;&#123; theme.twikoo.region &#125;&#125;', // 环境地域，默认为 ap-shanghai，腾讯云环境填 ap-shanghai 或 ap-guangzhou；Vercel 环境不填</pre></td></tr><tr><td data-num=\"22\"></td><td><pre>      // path: 'window.location.pathname', // 用于区分不同文章的自定义 js 路径，如果您的文章路径不是 location.pathname，需传此参数</pre></td></tr><tr><td data-num=\"23\"></td><td><pre>      // lang: 'zh-CN', // 用于手动设定评论区语言，支持的语言列表 https://github.com/imaegoo/twikoo/blob/main/src/js/utils/i18n/index.js</pre></td></tr><tr><td data-num=\"24\"></td><td><pre>      &#125;)</pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    &#123;%- endif %&#125;</pre></td></tr><tr><td data-num=\"26\"></td><td><pre>  &#123;%- else %&#125;</pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrap<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>comments<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>  &#123;%- endif %&#125;</pre></td></tr><tr><td data-num=\"29\"></td><td><pre>&#123;%- endif %&#125;</pre></td></tr><tr><td data-num=\"30\"></td><td><pre>&#123;% endmacro %&#125;</pre></td></tr></table></figure><div class=\"note info\">\n<p>如果代码没加载出来，可以直接去<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL3prejA5OC9oZXhvLXRoZW1lLXNob2th\"> github</span> 看代码</p>\n</div>\n<h2 id=\"加入配置选项\"><a class=\"anchor\" href=\"#加入配置选项\">#</a> 加入配置选项</h2>\n<p>在 <code>yourblog/themes/shoka/_config.yml</code>  加入如下代码:</p>\n<figure class=\"highlight yaml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">twikoo</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token key atrule\">enable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token key atrule\">mode</span><span class=\"token punctuation\">:</span> vercel <span class=\"token comment\"># vercel 或 tencent</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token key atrule\">envId</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"https://xxx.vercel.app\"</span> <span class=\"token comment\"># twikoo 环境 ID,vercel 填地址</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token key atrule\">region</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"none\"</span> <span class=\"token comment\">#tencent 填对应 ap 地域，vercel 随便填</span></pre></td></tr></table></figure><div class=\"note info\">\n<p>填写内容见<span class=\"exturl\" data-url=\"aHR0cHM6Ly90d2lrb28uanMub3JnL3F1aWNrLXN0YXJ0Lmh0bWw=\"> twikoo 文档</span></p>\n</div>\n<h1 id=\"pjax问题\"><a class=\"anchor\" href=\"#pjax问题\">#</a> pjax 问题</h1>\n<h2 id=\"js引入\"><a class=\"anchor\" href=\"#js引入\">#</a> js 引入</h2>\n<p>打开 <code>shoka\\layout\\_partials\\head\\head.njk</code> , 在最后加入:</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://cdn.staticfile.org/twikoo/1.5.11/twikoo.min.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>问题即可解决</p>\n<h2 id=\"评论区不刷新问题\"><a class=\"anchor\" href=\"#评论区不刷新问题\">#</a> 评论区不刷新问题</h2>\n<p>打开 <code>shoka\\source\\js\\_app\\pjax.js</code>  第 110 行，更改为如下内容:</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>pjax <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Pjax</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>        <span class=\"token literal-property property\">selectors</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>            <span class=\"token string\">'head title'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>            <span class=\"token string\">'.languages'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>            <span class=\"token string\">'.twikoo'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>            <span class=\"token string\">'.pjax'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>            <span class=\"token string\">'.leancloud-recent-comment'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>            <span class=\"token string\">'script[data-config]'</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token literal-property property\">analytics</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token literal-property property\">cacheBust</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>随后打开 <code>shoka\\layout\\_macro\\comment.njk</code>  第 2 行，更改为如下内容:<br />\n 在将第一个 <code>twikoo.init</code>  更改为如下形式:</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>        twikoo<span class=\"token punctuation\">.</span><span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>          <span class=\"token literal-property property\">envId</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 腾讯云环境填 envId；Vercel 环境填地址（https://xxx.vercel.app）</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>          <span class=\"token literal-property property\">el</span><span class=\"token operator\">:</span> <span class=\"token string\">'#tcomments'</span> <span class=\"token comment\">// 容器元素</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>第二个:</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>        twikoo<span class=\"token punctuation\">.</span><span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>          <span class=\"token literal-property property\">envId</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 腾讯云环境填 envId；Vercel 环境填地址（https://xxx.vercel.app）</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>          <span class=\"token literal-property property\">el</span><span class=\"token operator\">:</span> <span class=\"token string\">'#tcomments'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 容器元素</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>          <span class=\"token literal-property property\">region</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span> <span class=\"token comment\">// 环境地域，默认为 ap-shanghai，腾讯云环境填 ap-shanghai 或 ap-guangzhou；Vercel 环境不填</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h1 id=\"其他内容\"><a class=\"anchor\" href=\"#其他内容\">#</a> 其他内容</h1>\n<h2 id=\"访问量统计\"><a class=\"anchor\" href=\"#访问量统计\">#</a> 访问量统计</h2>\n<p>更改为 twikoo 会导致最新评论、访问量统计失效，<br />\n修复访问量统计，打开 <code>themes\\shoka\\layout\\_partials\\post\\footer.njk</code> , 大概在 20 行左右:</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>&#123;%- if theme.valine.appId and theme.valine.appKey and theme.valine.visitor %&#125;</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>&#123;&#123; page.path | replace('index.html', '') &#125;&#125;<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>item leancloud_visitors<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">data-flag-title</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>&#123;&#123; post.title &#125;&#125;<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">title</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>&#123;&#123; __('post.views') &#125;&#125;<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>icon<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>i</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>ic i-eye<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>i</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>&#123;&#123; __('post.views') &#125;&#125;<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>leancloud-visitors-count<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>&#123;&#123; __('symbols_count_time.view') &#125;&#125;<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  &#123;%- endif %&#125;</pre></td></tr></table></figure><p>删去 <code>&lt;span class=&quot;leancloud-visitors-count&quot;&gt;&lt;/span&gt;</code> , 在第 3 行添加如下内容:</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>icon<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>i</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>ic i-eye<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>i</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span>此文章已被阅读次数: <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>twikoo_visitors<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>正在加载...<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>访问量统计就会重新出现</p>\n<h2 id=\"移除minivaline\"><a class=\"anchor\" href=\"#移除minivaline\">#</a> 移除 miniValine</h2>\n<p>这样处理完后 miniValine 仍会加载、拖慢加载速度，需要手动移除依赖<br />\n打开 <code>shoka/source/js/pjax.js</code>  第 58 行:</p>\n<figure class=\"highlight javascript\"><figcaption data-lang=\"javascript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">vendorJs</span><span class=\"token punctuation\">(</span><span class=\"token string\">'valine'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">var</span> options <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">CONFIG</span><span class=\"token punctuation\">.</span>valine<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    options <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span>options<span class=\"token punctuation\">,</span> <span class=\"token constant\">LOCAL</span><span class=\"token punctuation\">.</span>valine<span class=\"token operator\">||</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    options<span class=\"token punctuation\">.</span>el <span class=\"token operator\">=</span> <span class=\"token string\">'#comments'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    options<span class=\"token punctuation\">.</span>pathname <span class=\"token operator\">=</span> <span class=\"token constant\">LOCAL</span><span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    options<span class=\"token punctuation\">.</span>pjax <span class=\"token operator\">=</span> pjax<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    options<span class=\"token punctuation\">.</span>lazyload <span class=\"token operator\">=</span> lazyload<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">new</span> <span class=\"token class-name\">MiniValine</span><span class=\"token punctuation\">(</span>options<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>      <span class=\"token function\">positionInit</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>      <span class=\"token function\">postFancybox</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.v'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> window<span class=\"token punctuation\">.</span>MiniValine<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>将这一段全部注释或删除即可</p>\n<h2 id=\"最新评论\"><a class=\"anchor\" href=\"#最新评论\">#</a> 最新评论</h2>\n<p>打开 <code>shoka\\layout\\_macro\\widgets.njk</code> , 第 26 行:<br />\n 改成如下代码块:</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>rpost pjax<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">></span></span>最新评论<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>leancloud-recent-comment<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>twikoo_comment<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>然后打开 <code>shoka\\layout\\_partials\\layout.njk</code> , 最底下:</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://cdn.polyfill.io/v3/polyfill.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><div class=\"note info\">\n<p>部分代码可能会加载不成功，请讲下面的代码放在 <code>partial</code>  那行之后</p>\n</div>\n<p>加入如下代码块:</p>\n<div class=\"note info\">\n<p>标准版更易读，适用于二次开发 <br />\n混淆版体积小，适用于生产环境 (uglify-js 不会压缩 <code>getRecentComments</code>  这个函数的内容)</p>\n</div>\n<div class=\"tab\" data-id=\"id1\" data-title=\"标准版\">\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">data-pjax</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\"></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    twikoo<span class=\"token punctuation\">.</span><span class=\"token function\">getRecentComments</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token literal-property property\">envId</span><span class=\"token operator\">:</span> <span class=\"token string\">\"&#123;&#123; theme.twikoo.envId &#125;&#125;\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token literal-property property\">pageSize</span><span class=\"token operator\">:</span> <span class=\"token number\">10</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        res<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>            <span class=\"token keyword\">let</span> siteLink <span class=\"token operator\">=</span> item<span class=\"token punctuation\">.</span>url <span class=\"token operator\">+</span> <span class=\"token string\">\"#\"</span> <span class=\"token operator\">+</span> item<span class=\"token punctuation\">.</span>id</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>            <span class=\"token keyword\">let</span> commentList <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"twikoo_comment\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>            <span class=\"token keyword\">let</span> commentElement <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"li\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>commentElement<span class=\"token punctuation\">.</span>className <span class=\"token operator\">=</span> <span class=\"token string\">\"item\"</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            <span class=\"token keyword\">let</span> commentLink <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"a\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            commentLink<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"href\"</span><span class=\"token punctuation\">,</span> siteLink<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            commentLink<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"data-pjax-state\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"data-pjax-state\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            <span class=\"token keyword\">let</span> commenterAndTime <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"span\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            commenterAndTime<span class=\"token punctuation\">.</span>innerText <span class=\"token operator\">=</span> item<span class=\"token punctuation\">.</span>nick <span class=\"token operator\">+</span> <span class=\"token string\">\"@\"</span> <span class=\"token operator\">+</span> item<span class=\"token punctuation\">.</span>relativeTime</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            commenterAndTime<span class=\"token punctuation\">.</span>className <span class=\"token operator\">=</span> <span class=\"token string\">\"breadcrumb\"</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>            <span class=\"token keyword\">let</span> commentTextNode <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"span\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            commentTextNode<span class=\"token punctuation\">.</span>innerText <span class=\"token operator\">=</span> item<span class=\"token punctuation\">.</span>commentText</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>            commentLink<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>commenterAndTime<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>            commentLink<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>commentTextNode<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>            commentElement<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>commentLink<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>            commentList<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>commentElement<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure></div>\n<div class=\"tab\" data-id=\"id1\" data-title=\"混淆版\">\n<figure class=\"highlight javascript\"><figcaption data-lang=\"javascript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>twikoo<span class=\"token punctuation\">.</span><span class=\"token function\">getRecentComments</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token literal-property property\">envId</span><span class=\"token operator\">:</span><span class=\"token string\">\"&#123;&#123; theme.twikoo.envId &#125;&#125;\"</span><span class=\"token punctuation\">,</span><span class=\"token literal-property property\">pageSize</span><span class=\"token operator\">:</span><span class=\"token number\">10</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">d</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>d<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span><span class=\"token keyword\">var</span> b<span class=\"token operator\">=</span>a<span class=\"token punctuation\">.</span>url<span class=\"token operator\">+</span><span class=\"token string\">\"#\"</span><span class=\"token operator\">+</span>a<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span>g<span class=\"token operator\">=</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"twikoo_comment\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>e<span class=\"token operator\">=</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"li\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>e<span class=\"token punctuation\">.</span>className<span class=\"token operator\">=</span><span class=\"token string\">\"item\"</span><span class=\"token punctuation\">;</span><span class=\"token keyword\">var</span> c<span class=\"token operator\">=</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"a\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>c<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"href\"</span><span class=\"token punctuation\">,</span>b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>c<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"data-pjax-state\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"data-pjax-state\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>b<span class=\"token operator\">=</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"span\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>b<span class=\"token punctuation\">.</span>innerText<span class=\"token operator\">=</span>a<span class=\"token punctuation\">.</span>nick<span class=\"token operator\">+</span><span class=\"token string\">\"@\"</span><span class=\"token operator\">+</span>a<span class=\"token punctuation\">.</span>relativeTime<span class=\"token punctuation\">;</span>b<span class=\"token punctuation\">.</span>className<span class=\"token operator\">=</span><span class=\"token string\">\"breadcrumb\"</span><span class=\"token punctuation\">;</span><span class=\"token keyword\">var</span> f<span class=\"token operator\">=</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"span\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>f<span class=\"token punctuation\">.</span>innerText<span class=\"token operator\">=</span>a<span class=\"token punctuation\">.</span>commentText<span class=\"token punctuation\">;</span>c<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>c<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>e<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>g<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">d</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>d<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure></div>\n<p>随后最新评论功能就回来了</p>\n<div class=\"note info\">\n<p>获取最新评论较慢，可能有 0.3-3s 的延迟</p>\n</div>\n",
            "tags": [
                "网站建设",
                "shoka",
                "twikoo"
            ]
        },
        {
            "id": "https://www.kaitaku.xyz/python/app/pythonrsa/",
            "url": "https://www.kaitaku.xyz/python/app/pythonrsa/",
            "title": "python实现RSA加密文件",
            "date_published": "2022-04-15T07:13:54.000Z",
            "content_html": "<h1 id=\"rsa加密的python实现\"><a class=\"anchor\" href=\"#rsa加密的python实现\">#</a> RSA 加密的 python 实现</h1>\n<h2 id=\"rsa库安装\"><a class=\"anchor\" href=\"#rsa库安装\">#</a> RSA 库安装</h2>\n<p>在 python 中，有一个库已经了 RSA 加解密的功能，就是 rsa 库<span class=\"spoiler\" title=\"你知道得太多了\">库如其名</span><br />\n使用 pip 安装 rsa 库:</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>pip <span class=\"token function\">install</span> rsa</pre></td></tr></table></figure><h2 id=\"rsa库使用\"><a class=\"anchor\" href=\"#rsa库使用\">#</a> RSA 库使用</h2>\n<h3 id=\"生成密钥\"><a class=\"anchor\" href=\"#生成密钥\">#</a> 生成密钥</h3>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> rsa</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">(</span>pubKey<span class=\"token punctuation\">,</span>privKey<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> rsa<span class=\"token punctuation\">.</span>newkeys<span class=\"token punctuation\">(</span><span class=\"token number\">2048</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>使用 <code>rsa.newkeys</code>  生成密钥对，括号内的参数为 RSA 位数</p>\n<div class=\"note info\">\n<p>不建议使用 RSA1024 及位以下的密钥，因为 RSA1024 及以下已被破解 (或较易被破解)</p>\n</div>\n<p>可以加入参数 <code>poolsize=int</code>  来使用多线程计算，<span class=\"spoiler\" title=\"你知道得太多了\"> 概率出现程序循环的问题</span></p>\n<div class=\"note warning\">\n<p>3072 位以上的 RSA 秘钥生成可能需要 1 分钟或更长，请确保你有足够的耐心</p>\n</div>\n<h3 id=\"保存与加载秘钥\"><a class=\"anchor\" href=\"#保存与加载秘钥\">#</a> 保存与加载秘钥</h3>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> rsa</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">(</span>pubKey<span class=\"token punctuation\">,</span>privKey<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> rsa<span class=\"token punctuation\">.</span>newkeys<span class=\"token punctuation\">(</span><span class=\"token number\">2048</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">with</span> <span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"pubkey.pem\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"wb\"</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> f<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>\tf<span class=\"token punctuation\">.</span>write<span class=\"token punctuation\">(</span>pubKey<span class=\"token punctuation\">.</span>save_pkcs1<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">with</span> <span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"privkey.pem\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"wb\"</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> f<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    f<span class=\"token punctuation\">.</span>write<span class=\"token punctuation\">(</span>privKey<span class=\"token punctuation\">.</span>save_pkcs1<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><div class=\"note info\">\n<p>使用 <code>wb</code> 、 <code>rb</code>  等方法读取出来的都是 bytes 格式，无需二次转换</p>\n</div>\n<p>将 pub/privkey 对象转换为 bytes 的方法为 <code>key.save_pkcs1</code></p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> rsa</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">with</span> <span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"pubkey.pem\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"rb\"</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> f<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    pubKey <span class=\"token operator\">=</span> rsa<span class=\"token punctuation\">.</span>PublicKey<span class=\"token punctuation\">.</span>load_pkcs1<span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">.</span>read<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre> </pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">with</span> <span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"privkey\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"rb\"</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> f<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    privKey <span class=\"token operator\">=</span> rsa<span class=\"token punctuation\">.</span>PrivateKey<span class=\"token punctuation\">.</span>load_pkcs1<span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">.</span>read<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>使用 <code>rsa.PublicKey(或PrivateKey).load_pkcs1</code>  方法可以加载字节内的秘钥</p>\n<h3 id=\"加密和解密\"><a class=\"anchor\" href=\"#加密和解密\">#</a> 加密和解密</h3>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> rsa</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">(</span>pubKey<span class=\"token punctuation\">,</span>privKey<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> rsa<span class=\"token punctuation\">.</span>newkeys<span class=\"token punctuation\">(</span><span class=\"token number\">2048</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>text <span class=\"token operator\">=</span> <span class=\"token string\">b\"hello world\"</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>rsa<span class=\"token punctuation\">.</span>encrypt<span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">,</span> pubKey<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>会输出一串 bytes, 这个就是加密后的结果</p>\n<div class=\"note info\">\n<p>公钥加密，私钥解密</p>\n</div>\n<div class=\"note info\">\n<p>RSA 库加密必须使用 bytes 格式，str 可以用 <code>str.encode(&quot;utf-8&quot;)</code>  转换为 bytes</p>\n</div>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> rsa</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">(</span>pubKey<span class=\"token punctuation\">,</span>privKey<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> rsa<span class=\"token punctuation\">.</span>newkeys<span class=\"token punctuation\">(</span><span class=\"token number\">2048</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>text <span class=\"token operator\">=</span> <span class=\"token string\">b\"加密后的内容\"</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>rsa<span class=\"token punctuation\">.</span>decrypt<span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">,</span> privKey<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><div class=\"note info\">\n<p>python 中 RSA 库的加密是有长度上限的，一般为: RSA 位数 / 8/3 (或者 2) 个中文字符<br />\n RSA 4.0 后已经删除了 bigfile 模块，后续可能会出一篇解决方案</p>\n</div>\n<h1 id=\"rsa与其他算法\"><a class=\"anchor\" href=\"#rsa与其他算法\">#</a> RSA 与其他算法</h1>\n<h2 id=\"rsa加密流程\"><a class=\"anchor\" href=\"#rsa加密流程\">#</a> RSA 加密流程</h2>\n<p>首先，加密双方必须生成一对秘钥对 (长度最好一致)<br />\n 然后互相交换 publickey 文件:<br />\n<img data-src=\"https://static.aichat.net/chat/202204/00d8d190-b3f2-4db9-a247-6e0042f7c7cb.png\" alt=\"加密的理想状态\" /><br />\n但假如现在出现了一个中间人，他会保存所有监听到的东西:<br />\n<img data-src=\"https://static.aichat.net/chat/202204/279c87a2-42b0-480a-ac8a-b1e962cc8a5c.png\" alt=\"出现中间人\" /><br />\n然后双方使用对方的秘钥进行加密，将密文发送给对方，对方使用自己的私钥解密:<br />\n<img data-src=\"https://static.aichat.net/chat/202204/e20b7278-c6ba-4511-9f0e-47a7bfadad8a.png\" alt=\"发送数据\" /><br />\n此时，双方可以顺利的解密对方发来的数据并进行解密，但中间人呢？<br />\n中间人手里只有密文和公钥，并无法进行解密，且不可能暴力破解 <br />\n这样就实现了信息的安全传输，且私钥并没有外泄</p>\n<h2 id=\"aes算法\"><a class=\"anchor\" href=\"#aes算法\">#</a> AES 算法</h2>\n<p>首先，AES 算法是对称加密算法，这意味着它加解密使用同一个秘钥<br />\n现在有用户 A、B, 他们会通过网络交换密文:<br />\n<img data-src=\"https://static.aichat.net/chat/202204/fecad802-5c72-4393-8021-7db40f599b8c.png\" alt=\"image.png\" /><br />\n 然后熟悉的中间人又出现了，他还是会监听并保存所有内容:<br />\n<img data-src=\"https://static.aichat.net/chat/202204/2b075559-0aef-4fd4-9cfb-582c04a417db.png\" alt=\"image.png\" /><br />\n 交换秘钥和密文:<br />\n<img data-src=\"https://static.aichat.net/chat/202204/a46a7723-0a04-414f-a75f-6d517bbd3043.png\" alt=\"image.png\" /><br />\n 这时中间人已经可以解密双方的密文了，所以 AES 并不适合在不安全网络下传播</p>\n<div class=\"note info\">\n<p>算法各有优点，见总结部分</p>\n</div>\n<h2 id=\"总结\"><a class=\"anchor\" href=\"#总结\">#</a> 总结</h2>\n<p>AES (对称加密) 算法更适用于在安全环境下加密大量数据 <br />\nRSA (非对称加密) 算法适用于在不安全环境下加密少量数据</p>\n<div class=\"note info\">\n<p>RSA 加密大量数据太慢了，大量数据可以试试 ECC (假如真的不想用 AES)</p>\n</div>\n<div class=\"note info\">\n<p>RSA 加密原理、大文件下一篇再说</p>\n</div>\n",
            "tags": [
                "python",
                "应用篇",
                "python",
                "非对称加密"
            ]
        },
        {
            "id": "https://www.kaitaku.xyz/misc/windbg/",
            "url": "https://www.kaitaku.xyz/misc/windbg/",
            "title": "记一次用windbg分析蓝屏原因",
            "date_published": "2022-04-09T10:18:49.000Z",
            "content_html": "<h1 id=\"前言\"><a class=\"anchor\" href=\"#前言\">#</a> 前言</h1>\n<p>这次帮一个朋友解决蓝屏，但无法进行现场检测<span class=\"spoiler\" title=\"你知道得太多了\">懒得出去</span>，远程也看不到蓝屏代码<br />\n只能使用 windbg 来分析内存文件检测蓝屏原因</p>\n<h1 id=\"windbg使用\"><a class=\"anchor\" href=\"#windbg使用\">#</a> windbg 使用</h1>\n<h2 id=\"下载和安装\"><a class=\"anchor\" href=\"#下载和安装\">#</a> 下载和安装</h2>\n<p>本文使用 windowsSDK 进行安装，安装地址<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXIubWljcm9zb2Z0LmNvbS96aC1jbi93aW5kb3dzL2Rvd25sb2Fkcy93aW5kb3dzLXNkay8=\">点我</span><br />\n进入后选择下载应用程序:<br />\n<img data-src=\"https://static.aichat.net/chat/202204/9c3d11ff-6a92-4904-adbb-321b64c3b475.png\" alt=\"微软官网界面\" /><br />\n选择下载路径:<br />\n<img data-src=\"https://static.aichat.net/chat/202204/47b26ffb-9d54-4298-9a6f-860eb9d3ea60.png\" alt=\"SDK位置\" /><br />\n勾选第二项即可:<br />\n<img data-src=\"https://static.aichat.net/chat/202204/b05d765c-ca9d-4e69-a168-c5b12f4aa2a2.png\" alt=\"选择安装部分\" /><br />\n安装完成后到下载路径 (下载路径 / Installers/X64 Debuggers And Tools-x64_en-us.msi) 双击安装即可</p>\n<h2 id=\"配置符号表\"><a class=\"anchor\" href=\"#配置符号表\">#</a> 配置符号表</h2>\n<p>在开始菜单内找到 windbg, 打开后界面点击 file-&gt;Symbol File Path<br />\n 在弹出来的对话框内填入如下内容:</p>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>srv*c:\\symbols*https:&#x2F;&#x2F;msdl.microsoft.com&#x2F;download&#x2F;symbols</pre></td></tr></table></figure><p>选择 OK</p>\n<h2 id=\"开始分析崩溃文件\"><a class=\"anchor\" href=\"#开始分析崩溃文件\">#</a> 开始分析崩溃文件</h2>\n<p>首先，你需要从目标电脑的 % SystemRoot%(一般为 C:/windows) 下找到 MEMORY.DMP 文件<br />\n将其放到合适位置后，点击 File -&gt; Open Crash Dump 选择崩溃文件<br />\n弹出来的界面应该如下 (这个崩溃文件是 win7 SP1 的文件)<br />\n<img data-src=\"https://static.aichat.net/chat/202204/504b5ca4-35ee-485a-b7a6-5154aecabf02.png\" alt=\"image.png\" /><br />\n 然后输入 <code>!analyze -v</code>  对文件进行深入分析<br />\n然后看输出的内容:</p>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>*******************************************************************************</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>*                                                                             *</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>*                        Bugcheck Analysis                                    *</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>*                                                                             *</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>*******************************************************************************</pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>PAGE_FAULT_IN_NONPAGED_AREA (50)</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>Invalid system memory was referenced.  This cannot be protected by try-except.</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>Typically the address is just plain bad or it is pointing at freed memory.</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>Arguments:</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>Arg1: fffff8817cdadbc0, memory referenced.</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>Arg2: 0000000000000000, value 0 &#x3D; read operation, 1 &#x3D; write operation.</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>Arg3: fffff880088da185, If non-zero, the instruction address which referenced the bad memory</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>\taddress.</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>Arg4: 0000000000000005, (reserved)</pre></td></tr></table></figure><p>输出的第一行为崩溃原因，一般和 win10 的蓝屏代码是一致的</p>\n<div class=\"note info\">\n<p>括号内的为 win7 版本，本案例就是 <code>0x0000050</code></p>\n</div>\n<div class=\"note warning\">\n<p>这个代码的本意为崩溃原因和代码，并不只针对于 windows</p>\n</div>\n<p>然后就可以去搜索此错误代码了，一般有对应的解决方案</p>\n<div class=\"note info\">\n<p>本案例到最后也没查到根本原因🤣</p>\n</div>\n<p>但是，在下面还有一<span class=\"spoiler\" title=\"你知道得太多了\">亿</span>些内容，在里面有两条比较重要的</p>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>Unable to load image \\SystemRoot\\system32\\DRIVERS\\igdpmd64.sys, Win32 error 0n2</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>Unable to load image \\SystemRoot\\system32\\DRIVERS\\atikmpag.sys, Win32 error 0n2</pre></td></tr></table></figure><p>这两条代表 <code>igdpmd64.sys</code>  和 <code>atikmpag.sys</code>  驱动是概率存在问题的<br />\n后来收到了对方发来的蓝屏图片，里面的关键内容如下:</p>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>STOP: 0x00000050 </pre></td></tr><tr><td data-num=\"2\"></td><td><pre>igdpmd64.sys - Address FFFFF88007AE0185 base at XXXX...</pre></td></tr></table></figure><p>证实了是 <code>igdpmd64.sys</code>  导致的蓝屏，并且代码为 50<br />\n 后查询得知这个是 AMD 显卡的驱动文件，结合蓝屏的使用经历 (屏幕共享功能导致), 基本可以得出是显卡驱动导致蓝屏</p>\n<div class=\"note info\">\n<p>电脑上的显卡是 ATI radeon HD 7450M, 确实有亿点老</p>\n</div>\n",
            "tags": [
                "杂项",
                "windbg",
                "windows"
            ]
        },
        {
            "id": "https://www.kaitaku.xyz/golang/go5/",
            "url": "https://www.kaitaku.xyz/golang/go5/",
            "title": "go语言-函数与作用域",
            "date_published": "2022-03-27T08:56:51.000Z",
            "content_html": "<h1 id=\"函数\"><a class=\"anchor\" href=\"#函数\">#</a> 函数</h1>\n<h2 id=\"定义\"><a class=\"anchor\" href=\"#定义\">#</a> 定义</h2>\n<figure class=\"highlight go\"><figcaption data-lang=\"go\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> main</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token string\">\"fmt\"</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">func</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span>x <span class=\"token builtin\">int</span><span class=\"token punctuation\">,</span> y <span class=\"token builtin\">int</span><span class=\"token punctuation\">)</span> <span class=\"token builtin\">int</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>\t<span class=\"token keyword\">return</span> x <span class=\"token operator\">+</span> y</pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">func</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>\t<span class=\"token keyword\">var</span> a<span class=\"token punctuation\">,</span> b <span class=\"token builtin\">int</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>\tfmt<span class=\"token punctuation\">.</span><span class=\"token function\">Scanln</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>a<span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>b<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>\tfmt<span class=\"token punctuation\">.</span><span class=\"token function\">Println</span><span class=\"token punctuation\">(</span><span class=\"token function\">sum</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>go 语言函数的定义格式如下:</p>\n<figure class=\"highlight go\"><figcaption data-lang=\"go\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">func</span> <span class=\"token function\">funcName</span><span class=\"token punctuation\">(</span>param <span class=\"token keyword\">type</span><span class=\"token punctuation\">)</span> returnType <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    code</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p><code>func</code>  为关键字，go 语言中使用 func 定义函数 <br />\n <code>funcName</code>  为函数名，推荐使用小驼峰写法 (下文介绍) <br />\n <code>param</code>  为参数名称， <code>type</code>  为参数类型 <br />\n <code>returnType</code>  为函数返回值，不返回可以不写 <br />\n <code>code</code>  为代码块</p>\n<div class=\"note info\">\n<p>smallFontOutput 就是小驼峰写法，即为首字母小写，其他单词的首字母大写</p>\n</div>\n<p>如果需要多个参数，把参数写为 <code>param type, param type</code>  即可<br />\n go 语言可以返回多个变量，如下:</p>\n<figure class=\"highlight go\"><figcaption data-lang=\"go\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> main</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token string\">\"fmt\"</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">func</span> <span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>a <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> b <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>\t<span class=\"token keyword\">return</span> b<span class=\"token punctuation\">,</span> a</pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">func</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>\t<span class=\"token keyword\">var</span> a<span class=\"token punctuation\">,</span> b <span class=\"token operator\">=</span> <span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"world\"</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>\tfmt<span class=\"token punctuation\">.</span><span class=\"token function\">Println</span><span class=\"token punctuation\">(</span><span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h2 id=\"变量作用域\"><a class=\"anchor\" href=\"#变量作用域\">#</a> 变量作用域</h2>\n<figure class=\"highlight go\"><figcaption data-lang=\"go\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> main</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token string\">\"fmt\"</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">// 这里不可以用 c</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">func</span> <span class=\"token function\">demo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\t<span class=\"token keyword\">var</span> c <span class=\"token operator\">=</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>\tfmt<span class=\"token punctuation\">.</span><span class=\"token function\">Println</span><span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>\t<span class=\"token comment\">// 这里可以用 c</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\">// 这里不可以用 c</span></pre></td></tr></table></figure><p>这里的 c 就是局部变量，仅在函数内可用</p>\n<figure class=\"highlight go\"><figcaption data-lang=\"go\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> main</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token string\">\"fmt\"</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">var</span> c <span class=\"token operator\">=</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">func</span> <span class=\"token function\">demo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\tfmt<span class=\"token punctuation\">.</span><span class=\"token function\">Println</span><span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">// 所有地方都可以用</span></pre></td></tr></table></figure><p>这里的 c 是全局变量，整个文件内可用</p>\n<div class=\"note info\">\n<p>闭包在后面会提及</p>\n</div>\n<h2 id=\"defer语句\"><a class=\"anchor\" href=\"#defer语句\">#</a> defer 语句</h2>\n<p>Go 语言中的 defer 语句会将语句推迟到函数退出时执行</p>\n<figure class=\"highlight go\"><figcaption data-lang=\"go\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> main</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token string\">\"fmt\"</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">func</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>\tfmt<span class=\"token punctuation\">.</span><span class=\"token function\">Println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"start\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\t<span class=\"token keyword\">defer</span> fmt<span class=\"token punctuation\">.</span><span class=\"token function\">Println</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>\tfmt<span class=\"token punctuation\">.</span><span class=\"token function\">Println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"end\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>输出结果:</p>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>start</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>end</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>1</pre></td></tr></table></figure>",
            "tags": [
                "GO语言学习笔记",
                "go"
            ]
        },
        {
            "id": "https://www.kaitaku.xyz/python/app/pythona1/",
            "url": "https://www.kaitaku.xyz/python/app/pythona1/",
            "title": "python-用企业微信机器人发天气预报",
            "date_published": "2022-03-18T06:25:21.000Z",
            "content_html": "<div class=\"note info\">\n<p>本文实际上是企业微信机器人 + 天气预报，但拆开有点短，所以组合到一起了</p>\n</div>\n<h1 id=\"企业微信机器人\"><a class=\"anchor\" href=\"#企业微信机器人\">#</a> 企业微信机器人</h1>\n<h2 id=\"数据和模块准备\"><a class=\"anchor\" href=\"#数据和模块准备\">#</a> 数据和模块准备</h2>\n<p>请求头:</p>\n<figure class=\"highlight py\"><figcaption data-lang=\"Python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>head <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token string\">'Content-Type'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'application/json'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\"># 声明为 json 类型</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>数据 (负载):</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>data <span class=\"token operator\">=</span> <span class=\"token triple-quoted-string string\">'''&#123;</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>        \"msgtype\": \"markdown\",</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        \"markdown\": &#123;</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>            \"content\": \"暂时留空\"</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>         &#125;'''</span></pre></td></tr></table></figure><div class=\"note info\">\n<p>这里作者选用了 markdown 格式，markdown 语法可自行百度。</p>\n</div>\n<p>安装 requests 库:</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>pip <span class=\"token function\">install</span> requests</pre></td></tr></table></figure><h2 id=\"定义post函数\"><a class=\"anchor\" href=\"#定义post函数\">#</a> 定义 post 函数</h2>\n<div class=\"note info\">\n<p>使用 requests 自带的 post 函数，如果数据内有中文会无法编码，需要包装函数</p>\n</div>\n<p>代码如下:</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> requests</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">post</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">,</span> data<span class=\"token operator\">=</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span> header<span class=\"token operator\">=</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        data <span class=\"token operator\">=</span> data<span class=\"token punctuation\">.</span>encode<span class=\"token punctuation\">(</span><span class=\"token string\">\"utf-8\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        res <span class=\"token operator\">=</span> requests<span class=\"token punctuation\">.</span>post<span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">,</span> data<span class=\"token operator\">=</span>data<span class=\"token punctuation\">,</span> headers<span class=\"token operator\">=</span>header<span class=\"token punctuation\">,</span> verify<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token keyword\">return</span> res</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">except</span> BaseException <span class=\"token keyword\">as</span> error<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"post请求错误，错误原因：%s\"</span> <span class=\"token operator\">%</span> error<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">raise</span> error</pre></td></tr></table></figure><h2 id=\"准备运行用代码\"><a class=\"anchor\" href=\"#准备运行用代码\">#</a> 准备运行用代码</h2>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>res <span class=\"token operator\">=</span> post<span class=\"token punctuation\">(</span><span class=\"token string\">\"yourwebhook&amp;debug=1\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>           header<span class=\"token operator\">=</span>head<span class=\"token punctuation\">,</span> data<span class=\"token operator\">=</span>data<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">.</span>json<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><div class=\"note info\">\n<p>带上 <code>&amp;debug=1</code>  参数是方便排查错误，如果你有信心可以不加</p>\n</div>\n<h1 id=\"天气预报api\"><a class=\"anchor\" href=\"#天气预报api\">#</a> 天气预报 API</h1>\n<div class=\"note info\">\n<p>本文选择<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXYucXdlYXRoZXIuY29tLw==\">和风天气 API</span> 进行开发 <br />\n本文为<strong>现在天气</strong></p>\n</div>\n<h2 id=\"发送get请求\"><a class=\"anchor\" href=\"#发送get请求\">#</a> 发送 get 请求</h2>\n<div class=\"note info\">\n<p>请求内容不涉及中文，使用系统 get 函数即可</p>\n</div>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>r <span class=\"token operator\">=</span> requests<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>yoururl<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>r_dict <span class=\"token operator\">=</span> r<span class=\"token punctuation\">.</span>json<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>&lt;yoururl&gt; 格式如下:</p>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>https:&#x2F;&#x2F;devapi.qweather.com&#x2F;v7&#x2F;weather&#x2F;now?key&#x3D;&amp;location&#x3D;</pre></td></tr></table></figure><p>在 key 的等号后写入你的应用 key,location 查询见<span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTMxOTMzNjMvYXJ0aWNsZS9kZXRhaWxzLzQ0ODUxODk3P3NwbT0xMDAxLjIxMDEuMzAwMS42NjUwLjImYW1wO3V0bV9tZWRpdW09ZGlzdHJpYnV0ZS5wY19yZWxldmFudC5ub25lLXRhc2stYmxvZy0yJTdFZGVmYXVsdCU3RUNUUkxJU1QlN0VSYXRlLTIucGNfcmVsZXZhbnRfZGVmYXVsdCZhbXA7ZGVwdGhfMS11dG1fc291cmNlPWRpc3RyaWJ1dGUucGNfcmVsZXZhbnQubm9uZS10YXNrLWJsb2ctMiU3RWRlZmF1bHQlN0VDVFJMSVNUJTdFUmF0ZS0yLnBjX3JlbGV2YW50X2RlZmF1bHQmYW1wO3V0bV9yZWxldmFudF9pbmRleD01\">这篇文章</span></p>\n<h2 id=\"结果处理\"><a class=\"anchor\" href=\"#结果处理\">#</a> 结果处理</h2>\n<p>返回格式应该如下</p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token property\">\"code\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"200\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token property\">\"updateTime\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2022-03-18T09:27+08:00\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token property\">\"fxLink\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"http://hfx.link/2bp1\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token property\">\"now\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token property\">\"obsTime\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2022-03-18T09:13+08:00\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token property\">\"temp\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token property\">\"feelsLike\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"0\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token property\">\"icon\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"104\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token property\">\"text\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"阴\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token property\">\"wind360\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"135\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token property\">\"windDir\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"东南风\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token property\">\"windScale\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token property\">\"windSpeed\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"4\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token property\">\"humidity\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"76\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token property\">\"precip\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"0.0\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token property\">\"pressure\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1017\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token property\">\"vis\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"8\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token property\">\"cloud\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"100\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token property\">\"dew\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span><span class=\"token number\">-4</span><span class=\"token string\">\"\"</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>  <span class=\"token property\">\"refer\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token property\">\"sources\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>      <span class=\"token string\">\"QWeather\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>      <span class=\"token string\">\"NMC\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>      <span class=\"token string\">\"ECMWF\"</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token property\">\"license\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>      <span class=\"token string\">\"no commercial use\"</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><div class=\"note info\">\n<p>有可能是单引号的，但不影响使用</p>\n</div>\n<p>上面的 <code>r_dict</code>  变量已经是 dict 类型了，无需 <code>eval()</code></p>\n<h1 id=\"发送到企业微信\"><a class=\"anchor\" href=\"#发送到企业微信\">#</a> 发送到企业微信</h1>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> requests</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">post</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">,</span> data<span class=\"token operator\">=</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">file</span><span class=\"token operator\">=</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span> header<span class=\"token operator\">=</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span> cookie<span class=\"token operator\">=</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token comment\"># data = json.dumps(data)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        data <span class=\"token operator\">=</span> data<span class=\"token punctuation\">.</span>encode<span class=\"token punctuation\">(</span><span class=\"token string\">\"utf-8\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        res <span class=\"token operator\">=</span> requests<span class=\"token punctuation\">.</span>post<span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">,</span> data<span class=\"token operator\">=</span>data<span class=\"token punctuation\">,</span> files<span class=\"token operator\">=</span><span class=\"token builtin\">file</span><span class=\"token punctuation\">,</span> headers<span class=\"token operator\">=</span>header<span class=\"token punctuation\">,</span> cookies<span class=\"token operator\">=</span>cookie<span class=\"token punctuation\">,</span> verify<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token keyword\">return</span> res</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">except</span> BaseException <span class=\"token keyword\">as</span> e<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"post请求错误，错误原因：%s\"</span> <span class=\"token operator\">%</span> e<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">raise</span> e</pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">get</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">,</span> data<span class=\"token operator\">=</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">file</span><span class=\"token operator\">=</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span> header<span class=\"token operator\">=</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span> cookie<span class=\"token operator\">=</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token comment\"># data = json.dumps(data)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        data <span class=\"token operator\">=</span> data<span class=\"token punctuation\">.</span>encode<span class=\"token punctuation\">(</span><span class=\"token string\">\"utf-8\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        res <span class=\"token operator\">=</span> requests<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">,</span> data<span class=\"token operator\">=</span>data<span class=\"token punctuation\">,</span> files<span class=\"token operator\">=</span><span class=\"token builtin\">file</span><span class=\"token punctuation\">,</span> headers<span class=\"token operator\">=</span>header<span class=\"token punctuation\">,</span> cookies<span class=\"token operator\">=</span>cookie<span class=\"token punctuation\">,</span> verify<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token keyword\">return</span> res</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token keyword\">except</span> BaseException <span class=\"token keyword\">as</span> e<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"get请求错误，错误原因：%s\"</span> <span class=\"token operator\">%</span> e<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token keyword\">raise</span> e</pre></td></tr><tr><td data-num=\"22\"></td><td><pre>head <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token string\">'Content-Type'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'application/json'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>r <span class=\"token operator\">=</span> requests<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">\"https://devapi.qweather.com/v7/weather/now?key=&amp;location=\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>r_dict <span class=\"token operator\">=</span> r<span class=\"token punctuation\">.</span>json<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>str1 <span class=\"token operator\">=</span> <span class=\"token string-interpolation\"><span class=\"token string\">f\"\"\"</pre></td></tr><tr><td data-num=\"29\"></td><td><pre>天气beta版 \\n</pre></td></tr><tr><td data-num=\"30\"></td><td><pre>>更新时间:**</span><span class=\"token interpolation\"><span class=\"token punctuation\">&#123;</span>r_dict<span class=\"token punctuation\">[</span><span class=\"token string\">\"updateTime\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">&#125;</span></span><span class=\"token string\">**</pre></td></tr><tr><td data-num=\"31\"></td><td><pre>>观测时间:**</span><span class=\"token interpolation\"><span class=\"token punctuation\">&#123;</span>r_dict<span class=\"token punctuation\">[</span><span class=\"token string\">\"now\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"obsTime\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">&#125;</span></span><span class=\"token string\">**</pre></td></tr><tr><td data-num=\"32\"></td><td><pre>>温度:**</span><span class=\"token interpolation\"><span class=\"token punctuation\">&#123;</span>r_dict<span class=\"token punctuation\">[</span><span class=\"token string\">\"now\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"temp\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">&#125;</span></span><span class=\"token string\">**℃</pre></td></tr><tr><td data-num=\"33\"></td><td><pre>>体感温度:**</span><span class=\"token interpolation\"><span class=\"token punctuation\">&#123;</span>r_dict<span class=\"token punctuation\">[</span><span class=\"token string\">\"now\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"feelsLike\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">&#125;</span></span><span class=\"token string\">**℃</pre></td></tr><tr><td data-num=\"34\"></td><td><pre>>天气:**</span><span class=\"token interpolation\"><span class=\"token punctuation\">&#123;</span>r_dict<span class=\"token punctuation\">[</span><span class=\"token string\">\"now\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"text\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">&#125;</span></span><span class=\"token string\">**</pre></td></tr><tr><td data-num=\"35\"></td><td><pre>>风向:**</span><span class=\"token interpolation\"><span class=\"token punctuation\">&#123;</span>r_dict<span class=\"token punctuation\">[</span><span class=\"token string\">\"now\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"windDir\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">&#125;</span></span><span class=\"token string\">**</pre></td></tr><tr><td data-num=\"36\"></td><td><pre>>风力:**</span><span class=\"token interpolation\"><span class=\"token punctuation\">&#123;</span>r_dict<span class=\"token punctuation\">[</span><span class=\"token string\">\"now\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"windScale\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">&#125;</span></span><span class=\"token string\">**级</pre></td></tr><tr><td data-num=\"37\"></td><td><pre>>湿度:**</span><span class=\"token interpolation\"><span class=\"token punctuation\">&#123;</span>r_dict<span class=\"token punctuation\">[</span><span class=\"token string\">\"now\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"humidity\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">&#125;</span></span><span class=\"token string\">**%</pre></td></tr><tr><td data-num=\"38\"></td><td><pre>>降水量:**</span><span class=\"token interpolation\"><span class=\"token punctuation\">&#123;</span>r_dict<span class=\"token punctuation\">[</span><span class=\"token string\">\"now\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"precip\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">&#125;</span></span><span class=\"token string\">**mm</pre></td></tr><tr><td data-num=\"39\"></td><td><pre>\"\"\"</span></span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>str1<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>data <span class=\"token operator\">=</span> <span class=\"token triple-quoted-string string\">'''&#123;</pre></td></tr><tr><td data-num=\"42\"></td><td><pre>        \"msgtype\": \"markdown\",</pre></td></tr><tr><td data-num=\"43\"></td><td><pre>        \"markdown\": &#123;</pre></td></tr><tr><td data-num=\"44\"></td><td><pre>            \"content\": \"%s\"</pre></td></tr><tr><td data-num=\"45\"></td><td><pre>         &#125;'''</span><span class=\"token operator\">%</span> str1</pre></td></tr><tr><td data-num=\"46\"></td><td><pre></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>bot <span class=\"token operator\">=</span> post<span class=\"token punctuation\">(</span><span class=\"token string\">\"https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=any&amp;debug=1\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>           header<span class=\"token operator\">=</span>head<span class=\"token punctuation\">,</span> data<span class=\"token operator\">=</span>data<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>bot<span class=\"token punctuation\">.</span>json<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>这个就是完整代码了，建议使用 f-string 格式化，在 data 里<strong>必须使用</strong> <code>%</code>  格式化<br />\n假如一切正常，运行完后会输出:</p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token property\">\"errcode\"</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token property\">\"errmsg\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ok. Warning: wrong json format. \"</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>企业微信里的机器人应该会正确的发出消息<span class=\"spoiler\" title=\"你知道得太多了\">不正确多半是排版错误</span></p>\n",
            "tags": [
                "python",
                "应用篇",
                "python"
            ]
        },
        {
            "id": "https://www.kaitaku.xyz/golang/go4/",
            "url": "https://www.kaitaku.xyz/golang/go4/",
            "title": "go语言-数组与循环",
            "date_published": "2022-03-15T04:29:14.000Z",
            "content_html": "<h1 id=\"数组\"><a class=\"anchor\" href=\"#数组\">#</a> 数组</h1>\n<h2 id=\"定义\"><a class=\"anchor\" href=\"#定义\">#</a> 定义</h2>\n<figure class=\"highlight go\"><figcaption data-lang=\"go\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> main</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token string\">\"fmt\"</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">func</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>\t<span class=\"token keyword\">var</span> a <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token builtin\">int32</span><span class=\"token punctuation\">&#123;</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\tfmt<span class=\"token punctuation\">.</span><span class=\"token function\">Println</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>这个例子中 a 就是<strong>数组</strong>，数组是具有相同唯一类型的一组已编号且长度固定的数据项序列。<br />\n定义格式如下: <code>var var1 = [size]type&#123;value&#125;</code> , 数组内只能存储同一种数据，不可以像 python 一样存储多种数据</p>\n<div class=\"note info\">\n<p>数字的长度可以不填，代表由值自动决定长度</p>\n</div>\n<h2 id=\"读取\"><a class=\"anchor\" href=\"#读取\">#</a> 读取</h2>\n<figure class=\"highlight go\"><figcaption data-lang=\"go\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> main</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token string\">\"fmt\"</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">func</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>\t<span class=\"token keyword\">var</span> a <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token builtin\">int32</span><span class=\"token punctuation\">&#123;</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\tfmt<span class=\"token punctuation\">.</span><span class=\"token function\">Println</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>通过在数组后加 <code>[index]</code>  就可以访问到指定的值，同理，它也可以被赋值给其他变量<br />\n索引从 0 开始，到长度 - 1 结束。</p>\n<div class=\"note info\">\n<p>类型转换下一节再写</p>\n</div>\n<figure class=\"highlight go\"><figcaption data-lang=\"go\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> main</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token string\">\"fmt\"</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">func</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">var</span> a <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token builtin\">int32</span><span class=\"token punctuation\">&#123;</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">var</span> b <span class=\"token operator\">=</span> a<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">:</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    fmt<span class=\"token punctuation\">.</span><span class=\"token function\">Println</span><span class=\"token punctuation\">(</span>b<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>index 可以是 [start:end] 格式的，但务必注意:<strong> 切片含头不含尾</strong>。</p>\n<h2 id=\"改写\"><a class=\"anchor\" href=\"#改写\">#</a> 改写</h2>\n<figure class=\"highlight go\"><figcaption data-lang=\"go\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> main</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token string\">\"fmt\"</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">func</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>\t<span class=\"token keyword\">var</span> a <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token builtin\">int32</span><span class=\"token punctuation\">&#123;</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\ta<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">3</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>\tfmt<span class=\"token punctuation\">.</span><span class=\"token function\">Println</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 输出内容:[1 3 3 4]</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>格式: <code>arr[index]=value</code> <br />\n 使用 <code>arr=append(arr,arr...)</code>  来合并数组， <code>...</code>  代表解压切片</p>\n<figure class=\"highlight go\"><figcaption data-lang=\"go\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> main</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token string\">\"fmt\"</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">func</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>\t<span class=\"token keyword\">var</span> a <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token builtin\">int32</span><span class=\"token punctuation\">&#123;</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\t<span class=\"token keyword\">var</span> b <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token builtin\">int32</span><span class=\"token punctuation\">&#123;</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span> <span class=\"token number\">7</span><span class=\"token punctuation\">,</span> <span class=\"token number\">8</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>\ta <span class=\"token operator\">=</span> <span class=\"token function\">append</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> b<span class=\"token operator\">...</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>\tfmt<span class=\"token punctuation\">.</span><span class=\"token function\">Println</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h1 id=\"循环\"><a class=\"anchor\" href=\"#循环\">#</a> 循环</h1>\n<h2 id=\"for循环格式\"><a class=\"anchor\" href=\"#for循环格式\">#</a> for 循环格式</h2>\n<p>首先，go 语言没有 while 循环，只有 for 循环<br />\n格式如下：</p>\n<figure class=\"highlight go\"><figcaption data-lang=\"go\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">for</span> init<span class=\"token punctuation\">;</span>condition<span class=\"token punctuation\">;</span>post<span class=\"token punctuation\">&#123;</span> code <span class=\"token punctuation\">&#125;</span> <span class=\"token comment\">// 类似于 C 的 for 结构</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">for</span> condition<span class=\"token punctuation\">&#123;</span> code <span class=\"token punctuation\">&#125;</span> <span class=\"token comment\">// 类似于 C 的 while 循环</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//for 死循环</span></pre></td></tr></table></figure><p>init 为初始值，condition 为布尔表达式，post 为自增 / 减操作符</p>\n<div class=\"note info\">\n<p>布尔表达式为满足条件时退出，而非满足条件运行</p>\n</div>\n<p>这是一个输出从 1 到 10 数字的程序</p>\n<figure class=\"highlight go\"><figcaption data-lang=\"go\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> main</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token string\">\"fmt\"</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">func</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>\t<span class=\"token keyword\">for</span> a <span class=\"token operator\">:=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> a <span class=\"token operator\">&lt;=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span> a<span class=\"token operator\">++</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\t\tfmt<span class=\"token punctuation\">.</span><span class=\"token function\">Println</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>\t<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h2 id=\"遍历\"><a class=\"anchor\" href=\"#遍历\">#</a> 遍历</h2>\n<figure class=\"highlight go\"><figcaption data-lang=\"go\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> main</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token string\">\"fmt\"</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">func</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>\t<span class=\"token keyword\">var</span> arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token builtin\">int8</span><span class=\"token punctuation\">&#123;</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\t<span class=\"token keyword\">for</span> <span class=\"token boolean\">_</span><span class=\"token punctuation\">,</span> value <span class=\"token operator\">:=</span> <span class=\"token keyword\">range</span> arr <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>\t\tfmt<span class=\"token punctuation\">.</span><span class=\"token function\">Println</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>\t<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>go 中 for 遍历数组 (或其他容器数据), 格式如下： <code>for index,value := range oldMap &#123; code &#125;</code> <br />\n 索引或值不需要可以用 <code>_</code> 代替。</p>\n<h1 id=\"类型转换\"><a class=\"anchor\" href=\"#类型转换\">#</a> 类型转换</h1>\n<p>使用类名 +() 即可，例如 <code>string(var1)</code></p>\n",
            "tags": [
                "GO语言学习笔记",
                "go"
            ]
        },
        {
            "id": "https://www.kaitaku.xyz/golang/go2/",
            "url": "https://www.kaitaku.xyz/golang/go2/",
            "title": "go语言-语法和数据类型",
            "date_published": "2022-03-05T12:31:31.000Z",
            "content_html": "<h1 id=\"语法\"><a class=\"anchor\" href=\"#语法\">#</a> 语法</h1>\n<h2 id=\"行分隔符\"><a class=\"anchor\" href=\"#行分隔符\">#</a> 行分隔符</h2>\n<p>先看一下 c++ 的 hello world:</p>\n<figure class=\"highlight cpp\"><figcaption data-lang=\"C++\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;iostream></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">using</span> <span class=\"token keyword\">namespace</span> std<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    cout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"hello world\"</span> <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>然后再看一下 go 的:</p>\n<figure class=\"highlight go\"><figcaption data-lang=\"go\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> main</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token string\">\"fmt\"</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">func</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>\tfmt<span class=\"token punctuation\">.</span><span class=\"token function\">Println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello world\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>可以看出以下几点差异:</p>\n<ul>\n<li>C++ 使用 main 函数定位项目入口，go 使用 main 包定位项目入口</li>\n<li>C++ 使用分号作为行尾分隔符，go 无需分隔符</li>\n<li>C++ 使用 <code>include</code> ,go 使用 <code>import</code></li>\n</ul>\n<p>go 也可以使用分号，适用于一行多语句</p>\n<h1 id=\"变量\"><a class=\"anchor\" href=\"#变量\">#</a> 变量</h1>\n<h2 id=\"创建变量\"><a class=\"anchor\" href=\"#创建变量\">#</a> 创建变量</h2>\n<figure class=\"highlight go\"><figcaption data-lang=\"go\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> main</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token string\">\"fmt\"</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">func</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>\t<span class=\"token keyword\">var</span> a <span class=\"token builtin\">int</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\ta <span class=\"token operator\">=</span> <span class=\"token number\">10</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>\tfmt<span class=\"token punctuation\">.</span><span class=\"token function\">Println</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>go 中的变量创建格式为: <code>var name type</code> ,type 会在下文提到<br />\n也可以省略 type, 代码如下:</p>\n<figure class=\"highlight go\"><figcaption data-lang=\"go\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> main</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token string\">\"fmt\"</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">func</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>\t<span class=\"token keyword\">var</span> a <span class=\"token operator\">=</span> <span class=\"token number\">10</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\tfmt<span class=\"token punctuation\">.</span><span class=\"token function\">Println</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>go 编译器就会自动推断类型为 <code>int</code> , 无需额外指定 type</p>\n<div class=\"note info\">\n<p>后两种方法都需要初始赋值</p>\n</div>\n<p>再把 var 也省略掉:</p>\n<figure class=\"highlight go\"><figcaption data-lang=\"go\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> main</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token string\">\"fmt\"</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">func</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>\ta <span class=\"token operator\">:=</span> <span class=\"token number\">10</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\tfmt<span class=\"token punctuation\">.</span><span class=\"token function\">Println</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>这里赋值格式为: <code>name := value</code></p>\n<div class=\"note info\">\n<p>这种赋值方法仅适用于未声明变量</p>\n</div>\n<h2 id=\"数据类型\"><a class=\"anchor\" href=\"#数据类型\">#</a> 数据类型</h2>\n<h3 id=\"整数类型\"><a class=\"anchor\" href=\"#整数类型\">#</a> 整数类型</h3>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">名称</th>\n<th style=\"text-align:center\">描述</th>\n<th style=\"text-align:left\">范围</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">uint8</td>\n<td style=\"text-align:center\">无符号 8 位整型</td>\n<td style=\"text-align:left\">0-255</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">uint16</td>\n<td style=\"text-align:center\">无符号 16 位整型</td>\n<td style=\"text-align:left\">0-65535</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">uint32</td>\n<td style=\"text-align:center\">无符号 32 位整型</td>\n<td style=\"text-align:left\">0-4294967295</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">uint64</td>\n<td style=\"text-align:center\">无符号 64 位整型</td>\n<td style=\"text-align:left\">0-18446744073709551615</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">int8</td>\n<td style=\"text-align:center\">有符号 8 位整形</td>\n<td style=\"text-align:left\">-128-127</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">int16</td>\n<td style=\"text-align:center\">有符号 16 位整形</td>\n<td style=\"text-align:left\">-32768-32767</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">int32</td>\n<td style=\"text-align:center\">有符号 32 位整形</td>\n<td style=\"text-align:left\">-2147483648-2147483647</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">int64</td>\n<td style=\"text-align:center\">有符号 64 位整形</td>\n<td style=\"text-align:left\">-9223372036854775808-9223372036854775807</td>\n</tr>\n</tbody>\n</table>\n<div class=\"note info\">\n<p>有或无符号指是否有一位符号位，无符号正数范围更大<strong>但不能储存负数</strong></p>\n</div>\n<h3 id=\"小数类型\"><a class=\"anchor\" href=\"#小数类型\">#</a> 小数类型</h3>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">名称</th>\n<th style=\"text-align:center\">描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">float32</td>\n<td style=\"text-align:center\">IEEE-754 32 位浮点型数</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">float64</td>\n<td style=\"text-align:center\">IEEE-754 64 位浮点型数</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">complex64</td>\n<td style=\"text-align:center\">32 位实数和虚数</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">complex128</td>\n<td style=\"text-align:center\">64 位实数和虚数</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"其他数字类型\"><a class=\"anchor\" href=\"#其他数字类型\">#</a> 其他数字类型</h3>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">名称</th>\n<th style=\"text-align:center\">描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">byte</td>\n<td style=\"text-align:center\">类似 uint8</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">rune</td>\n<td style=\"text-align:center\">类似 int32</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">int</td>\n<td style=\"text-align:center\">为 int32/64</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">uint</td>\n<td style=\"text-align:center\">为 uint32/64</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">uintptr</td>\n<td style=\"text-align:center\">无符号整型，用于存放一个指针</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"其他类型\"><a class=\"anchor\" href=\"#其他类型\">#</a> 其他类型</h3>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">名称</th>\n<th style=\"text-align:center\">描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">string</td>\n<td style=\"text-align:center\">字符串类型</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">bool</td>\n<td style=\"text-align:center\">布尔值 (真或假)</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"注意事项\"><a class=\"anchor\" href=\"#注意事项\">#</a> 注意事项</h3>\n<p>go 语言中的局部变量，只要声明，<strong> 必须使用</strong></p>\n<h2 id=\"输入\"><a class=\"anchor\" href=\"#输入\">#</a> 输入</h2>\n<p>go 输入方法为 <code>fmt.Scan</code>  和 <code>fmt.Scanln</code></p>\n<figure class=\"highlight go\"><figcaption data-lang=\"go\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> main</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token string\">\"fmt\"</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">func</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>\t<span class=\"token keyword\">var</span> a <span class=\"token builtin\">string</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\tfmt<span class=\"token punctuation\">.</span><span class=\"token function\">Scan</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>a<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>\tfmt<span class=\"token punctuation\">.</span><span class=\"token function\">Println</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><div class=\"note info\">\n<p>Scan 的参数为变量的<strong>指针</strong>，务必加上 &amp;</p>\n</div>\n",
            "tags": [
                "GO语言学习笔记",
                "go"
            ]
        },
        {
            "id": "https://www.kaitaku.xyz/golang/go3/",
            "url": "https://www.kaitaku.xyz/golang/go3/",
            "title": "go语言-运算符和分支结构",
            "date_published": "2022-03-05T12:31:31.000Z",
            "content_html": "<h1 id=\"运算符\"><a class=\"anchor\" href=\"#运算符\">#</a> 运算符</h1>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">符号</th>\n<th style=\"text-align:left\">描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">+</td>\n<td style=\"text-align:left\">变量相加</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">-</td>\n<td style=\"text-align:left\">数字相减</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">*</td>\n<td style=\"text-align:left\">数字相乘</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">/</td>\n<td style=\"text-align:left\">数字相除</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">%</td>\n<td style=\"text-align:left\">数字求余</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">++</td>\n<td style=\"text-align:left\">自加</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">--</td>\n<td style=\"text-align:left\">自减</td>\n</tr>\n</tbody>\n</table>\n<p>一个实例:</p>\n<figure class=\"highlight go\"><figcaption data-lang=\"go\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> main</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token string\">\"fmt\"</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">func</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>   <span class=\"token keyword\">var</span> a <span class=\"token builtin\">int</span> <span class=\"token operator\">=</span> <span class=\"token number\">21</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>   <span class=\"token keyword\">var</span> b <span class=\"token builtin\">int</span> <span class=\"token operator\">=</span> <span class=\"token number\">10</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>   <span class=\"token keyword\">var</span> c <span class=\"token builtin\">int</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>   c <span class=\"token operator\">=</span> a <span class=\"token operator\">+</span> b</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>   fmt<span class=\"token punctuation\">.</span><span class=\"token function\">Printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"第一行 - c 的值为 %d\\n\"</span><span class=\"token punctuation\">,</span> c <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>   c <span class=\"token operator\">=</span> a <span class=\"token operator\">-</span> b</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>   fmt<span class=\"token punctuation\">.</span><span class=\"token function\">Printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"第二行 - c 的值为 %d\\n\"</span><span class=\"token punctuation\">,</span> c <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>   c <span class=\"token operator\">=</span> a <span class=\"token operator\">*</span> b</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>   fmt<span class=\"token punctuation\">.</span><span class=\"token function\">Printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"第三行 - c 的值为 %d\\n\"</span><span class=\"token punctuation\">,</span> c <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>   c <span class=\"token operator\">=</span> a <span class=\"token operator\">/</span> b</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>   fmt<span class=\"token punctuation\">.</span><span class=\"token function\">Printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"第四行 - c 的值为 %d\\n\"</span><span class=\"token punctuation\">,</span> c <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>   c <span class=\"token operator\">=</span> a <span class=\"token operator\">%</span> b</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>   fmt<span class=\"token punctuation\">.</span><span class=\"token function\">Printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"第五行 - c 的值为 %d\\n\"</span><span class=\"token punctuation\">,</span> c <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>   a<span class=\"token operator\">++</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>   fmt<span class=\"token punctuation\">.</span><span class=\"token function\">Printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"第六行 - c 的值为 %d\\n\"</span><span class=\"token punctuation\">,</span> a <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>   a<span class=\"token operator\">--</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>   fmt<span class=\"token punctuation\">.</span><span class=\"token function\">Printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"第七行 - c 的值为 %d\\n\"</span><span class=\"token punctuation\">,</span> a <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h1 id=\"分支结构\"><a class=\"anchor\" href=\"#分支结构\">#</a> 分支结构</h1>\n<h2 id=\"单分支\"><a class=\"anchor\" href=\"#单分支\">#</a> 单分支</h2>\n<h3 id=\"if结构\"><a class=\"anchor\" href=\"#if结构\">#</a> if 结构</h3>\n<figure class=\"highlight go\"><figcaption data-lang=\"go\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> main</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token string\">\"fmt\"</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">func</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>\t<span class=\"token keyword\">var</span> a <span class=\"token builtin\">int</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\tfmt<span class=\"token punctuation\">.</span><span class=\"token function\">Scanln</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>a<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>\t<span class=\"token keyword\">if</span> a <span class=\"token operator\">></span> <span class=\"token number\">10</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>\t\tfmt<span class=\"token punctuation\">.</span><span class=\"token function\">Println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"a大于10\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>\t<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>if 表达式格式如下:  <code>if 布尔表达式 &#123;语句&#125;</code> <br />\n 为真执行语句，为假不执行</p>\n<h2 id=\"双分支\"><a class=\"anchor\" href=\"#双分支\">#</a> 双分支</h2>\n<h3 id=\"if-else结构\"><a class=\"anchor\" href=\"#if-else结构\">#</a> if else 结构</h3>\n<figure class=\"highlight go\"><figcaption data-lang=\"go\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> main</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token string\">\"fmt\"</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">func</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>\t<span class=\"token keyword\">var</span> a <span class=\"token builtin\">int</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\tfmt<span class=\"token punctuation\">.</span><span class=\"token function\">Scanln</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>a<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>\t<span class=\"token keyword\">if</span> a <span class=\"token operator\">></span> <span class=\"token number\">10</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>\t\tfmt<span class=\"token punctuation\">.</span><span class=\"token function\">Println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"a大于10\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>\t<span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>\t\tfmt<span class=\"token punctuation\">.</span><span class=\"token function\">Println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"a小于等于10\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>\t<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>大括号后接 else 即可，无需条件<br />\n当布尔表达式为假时，执行 else 代码块</p>\n<h2 id=\"多分支\"><a class=\"anchor\" href=\"#多分支\">#</a> 多分支</h2>\n<h3 id=\"if-else-if结构\"><a class=\"anchor\" href=\"#if-else-if结构\">#</a> if else if 结构</h3>\n<figure class=\"highlight go\"><figcaption data-lang=\"go\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> main</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token string\">\"fmt\"</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">func</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>\t<span class=\"token keyword\">var</span> a <span class=\"token builtin\">int</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\tfmt<span class=\"token punctuation\">.</span><span class=\"token function\">Scanln</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>a<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>\t<span class=\"token keyword\">if</span> a <span class=\"token operator\">></span> <span class=\"token number\">10</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>\t\tfmt<span class=\"token punctuation\">.</span><span class=\"token function\">Println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"a大于10\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>\t<span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> a <span class=\"token operator\">></span> <span class=\"token number\">5</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>\t\tfmt<span class=\"token punctuation\">.</span><span class=\"token function\">Println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"a大于5\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>\t<span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> a <span class=\"token operator\">></span> <span class=\"token number\">0</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>\t\tfmt<span class=\"token punctuation\">.</span><span class=\"token function\">Println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"a大于0\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>\t<span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>\t\tfmt<span class=\"token punctuation\">.</span><span class=\"token function\">Println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"a小于0\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>\t<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>一个分支结构可以有零、一或无数个 else if 代码块<br />\n当 if 的表达式不满足时，继续检查 else if 的表达式，都不满足执行 else</p>\n<div class=\"note info\">\n<p>一个 if else 结构至多执行一个代码块，多个代码块需要 if...if... 结构</p>\n</div>\n<h3 id=\"switch结构\"><a class=\"anchor\" href=\"#switch结构\">#</a> switch 结构</h3>\n<figure class=\"highlight go\"><figcaption data-lang=\"go\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> main</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token string\">\"fmt\"</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">func</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>\t<span class=\"token keyword\">var</span> a <span class=\"token builtin\">int</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\tfmt<span class=\"token punctuation\">.</span><span class=\"token function\">Scanln</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>a<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>\t<span class=\"token keyword\">switch</span> a <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>\t<span class=\"token keyword\">case</span> <span class=\"token number\">5</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>\t\tfmt<span class=\"token punctuation\">.</span><span class=\"token function\">Println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"a为5\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>\t<span class=\"token keyword\">case</span> <span class=\"token number\">10</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>\t\tfmt<span class=\"token punctuation\">.</span><span class=\"token function\">Println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"a为10\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>\t<span class=\"token keyword\">default</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>\t\tfmt<span class=\"token punctuation\">.</span><span class=\"token function\">Println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"a不为5或10\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>\t<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>switch 的语法如下:</p>\n<figure class=\"highlight go\"><figcaption data-lang=\"go\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">switch</span> anyvar <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">case</span> var1<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token comment\">// code</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">case</span> var2<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token comment\">// code</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">default</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token comment\">// code</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><div class=\"note info\">\n<p>switch...case...<strong> 不是通过缩进识别结构</strong>，是在这个 case 到下个 case 之间的代码<br />\n都视作一个代码块</p>\n</div>\n<p>case 后是一个准确的变量 / 值，不是布尔表达式<br />\n如果没有任何一个 case 执行，则执行 default 代码块</p>\n<div class=\"note info\">\n<p>select 结构放在信道里将，这里先跳过</p>\n</div>\n",
            "tags": [
                "GO语言学习笔记",
                "go"
            ]
        }
    ]
}