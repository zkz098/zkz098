var CONFIG={version:"0.2.5",hostname:"https://www.kaitaku.xyz",root:"/",statics:"/",favicon:{normal:"images/favicon.ico",hidden:"images/failure.ico"},darkmode:false,auto_dark:{enable:true,start:20,end:7},auto_scroll:true,js:{chart:"npm/frappe-charts@1.5.0/dist/frappe-charts.min.iife.min.js",copy_tex:"npm/katex@0.12.0/dist/contrib/copy-tex.min.js",fancybox:"combine/npm/jquery@3.5.1/dist/jquery.min.js,npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js,npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js"},css:{valine:"css/comment.css",katex:"npm/katex@0.12.0/dist/katex.min.css",mermaid:"css/mermaid.css",fancybox:"combine/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css,npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"},loader:{start:true,"switch":false},search:{appID:"Z90S0X07N8",apiKey:"8770deb4853046c6fb7f786f02ab69be",indexName:"kaitaku-blog",hits:{per_page:10}},valine:{appId:null,appKey:null,placeholder:"ヽ(○´∀`)ﾉ♪",avatar:"mp",pageSize:10,lang:"zh-CN",visitor:true,NoRecordIP:false,serverURLs:null,powerMode:true,tagMeta:{visitor:"新朋友",master:"主人",friend:"小伙伴"},tagColor:{master:"var(--color-orange)",friend:"var(--color-aqua)"},tagMember:{master:["2de7163f67f0a70f80092ba199a5c6d3"],friend:["f85cfd95e12ab76153f440a184567a04","0062e907b5b82d231af37c0db7a15dde"]}},quicklink:{timeout:3e3,priority:true},audio:[{title:"列表1",list:["https://music.163.com/#/playlist?id=2943811283","https://music.163.com/#/playlist?id=2297706586"]},{title:"列表2",list:["https://music.163.com/#/playlist?id=2031842656"]}],fireworks:["rgba(255,182,185,.9)","rgba(250,227,217,.9)","rgba(187,222,214,.9)","rgba(138,198,209,.9)"]};const getRndInteger=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};const getDocHeight=function(){return $("main > .inner").offsetHeight};const getScript=function(e,t,a){if(a){t()}else{var i=document.createElement("script");i.onload=i.onreadystatechange=function(e,a){if(a||!i.readyState||/loaded|complete/.test(i.readyState)){i.onload=i.onreadystatechange=null;i=undefined;if(!a&&t)setTimeout(t,0)}};i.src=e;document.head.appendChild(i)}};const assetUrl=function(e,t){var a=CONFIG[e][t];if(a.indexOf("npm")>-1||a.indexOf("gh")>-1||a.indexOf("combine")>-1)return"https://cdn1.tianli0.top/"+a;if(a.indexOf("http")>-1)return a;return"/"+a};const vendorJs=function(e,t,a){if(LOCAL[e]){getScript(assetUrl("js",e),t||function(){window[e]=true},a||window[e])}};const vendorCss=function(e,t){if(window["css"+e])return;if(LOCAL[e]){document.head.createChild("link",{rel:"stylesheet",href:assetUrl("css",e)});window["css"+e]=true}};const pjaxScript=function(e){var t=e.text||e.textContent||e.innerHTML||"";var a=e.parentNode;a.removeChild(e);var i=document.createElement("script");if(e.id){i.id=e.id}if(e.className){i.className=e.className}if(e.type){i.type=e.type}if(e.src){i.src=e.src;i.async=false}if(e.dataset.pjax!==undefined){i.dataset.pjax=""}if(t!==""){i.appendChild(document.createTextNode(t))}a.appendChild(i)};const pageScroll=function(e,t,a){var i={targets:typeof t=="number"?e.parentNode:document.scrollingElement,duration:500,easing:"easeInOutQuad",scrollTop:t||(typeof e=="number"?e:e?e.top()+document.documentElement.scrollTop-siteNavHeight:0),complete:function(){a&&a()}};anime(i)};const transition=function(e,t,a){var i={};var n="none";switch(t){case 0:i={opacity:[1,0]};break;case 1:i={opacity:[0,1]};n="block";break;case"bounceUpIn":i={begin:function(t){e.display("block")},translateY:[{value:-60,duration:200},{value:10,duration:200},{value:-5,duration:200},{value:0,duration:200}],opacity:[0,1]};n="block";break;case"shrinkIn":i={begin:function(t){e.display("block")},scale:[{value:1.1,duration:300},{value:1,duration:200}],opacity:1};n="block";break;case"slideRightIn":i={begin:function(t){e.display("block")},translateX:[100,0],opacity:[0,1]};n="block";break;case"slideRightOut":i={translateX:[0,100],opacity:[1,0]};break;default:i=t;n=t.display;break}anime(Object.assign({targets:e,duration:200,easing:"linear"},i)).finished.then(function(){e.display(n);a&&a()})};const store={get:function(e){return localStorage.getItem(e)},set:function(e,t){localStorage.setItem(e,t);return t},del:function(e){localStorage.removeItem(e)}};var $=function(e,t){t=t||document;if(e.indexOf("#")===0){return t.getElementById(e.replace("#",""))}return t.querySelector(e)};$.all=function(e,t){t=t||document;return t.querySelectorAll(e)};$.each=function(e,t,a){return $.all(e,a).forEach(t)};Object.assign(HTMLElement.prototype,{createChild:function(e,t,a){var i=document.createElement(e);Object.assign(i,t);switch(a){case"after":this.insertAfter(i);break;case"replace":this.innerHTML="";default:this.appendChild(i)}return i},wrap:function(e){var t=document.createElement("div");Object.assign(t,e);this.parentNode.insertBefore(t,this);this.parentNode.removeChild(this);t.appendChild(this)},height:function(e){if(e){this.style.height=typeof e=="number"?e+"rem":e}return this.getBoundingClientRect().height},width:function(e){if(e){this.style.width=typeof e=="number"?e+"rem":e}return this.getBoundingClientRect().width},top:function(){return this.getBoundingClientRect().top},left:function(){return this.getBoundingClientRect().left},attr:function(e,t){if(t===null){return this.removeAttribute(e)}if(t){this.setAttribute(e,t);return this}else{return this.getAttribute(e)}},insertAfter:function(e){var t=this.parentNode;if(t.lastChild==this){t.appendChild(e)}else{t.insertBefore(e,this.nextSibling)}},display:function(e){if(e==null){return this.style.display}else{this.style.display=e;return this}},child:function(e){return $(e,this)},find:function(e){return $.all(e,this)},_class:function(e,t,a){var i=t.indexOf(" ")?t.split(" "):[t];var n=this;i.forEach(function(t){if(e=="toggle"){n.classList.toggle(t,a)}else{n.classList[e](t)}})},addClass:function(e){this._class("add",e);return this},removeClass:function(e){this._class("remove",e);return this},toggleClass:function(e,t){this._class("toggle",e,t);return this},hasClass:function(e){return this.classList.contains(e)}});var NOWPLAYING=null;var isMobile=/mobile/i.test(window.navigator.userAgent);var mediaPlayer=function(e,t){var a={el:null,data:[],index:-1,errnum:0,add:function(e,t){var a=this;t.forEach(function(t,i){t.group=e;t.name=t.name||t.title||"Meida name";t.artist=t.artist||t.author||"Anonymous";t.cover=t.cover||t.pic;t.type=t.type||"normal";a.data.push(t)})},clear:function(){this.data=[];this.el.innerHTML="";if(this.index!==-1){this.index=-1;e.player.fetch()}},create:function(){var t=this.el;this.data.map(function(i,n){if(i.el)return;var r="list-"+e.player._id+"-"+i.group;var o=$("#"+r);if(!o){o=t.createChild("div",{id:r,className:e.player.group?"tab":"",innerHTML:"<ol></ol>"});if(e.player.group){o.attr("data-title",e.player.options.rawList[i.group]["title"]).attr("data-id",e.player._id)}}i.el=o.child("ol").createChild("li",{title:i.name+" - "+i.artist,innerHTML:'<span class="info"><span>'+i.name+"</span><span>"+i.artist+"</span></span>",onclick:function(t){var i=t.currentTarget;if(a.index===n&&c.el){if(s.paused){e.player.play()}else{e.player.seek(s.duration*c.percent(t,i))}return}e.player.switch(n);e.player.play()}});return i});tabFormat()},current:function(){return this.data[this.index]},scroll:function(){var e=this.current();var t=this.el.child("li.active");t&&t.removeClass("active");var a=this.el.child(".tab.active");a&&a.removeClass("active");t=this.el.find(".nav li")[e.group];t&&t.addClass("active");a=this.el.find(".tab")[e.group];a&&a.addClass("active");pageScroll(e.el,e.el.offsetTop);return this},title:function(){if(s.paused)return;var e=this.current();document.title="Now Playing..."+e["name"]+" - "+e["artist"]+" | "+originTitle},error:function(){var e=this.current();e.el.removeClass("current").addClass("error");e.error=true;this.errnum++}};var i={el:null,create:function(){if(this.el)return;this.el=e.createChild("div",{className:"player-info",innerHTML:(e.player.options.type=="audio"?'<div class="preview"></div>':"")+'<div class="controller"></div><div class="playlist"></div>'},"after");l.el=this.el.child(".preview");a.el=this.el.child(".playlist");d.el=this.el.child(".controller")},hide:function(){var e=this.el;e.addClass("hide");window.setTimeout(function(){e.removeClass("show hide")},300)}};var n={type:"audio",mode:"random",btns:["play-pause","music"],controls:["mode","backward","play-pause","forward","volume"],events:{"play-pause":function(t){if(s.paused){e.player.play()}else{e.player.pause()}},music:function(e){if(i.el.hasClass("show")){i.hide()}else{i.el.addClass("show");a.scroll().title()}}}},r={random:function(e){return Math.floor(Math.random()*e)},parse:function(e){var t=[];[["music.163.com.*song.*id=(\\d+)","netease","song"],["music.163.com.*album.*id=(\\d+)","netease","album"],["music.163.com.*artist.*id=(\\d+)","netease","artist"],["music.163.com.*playlist.*id=(\\d+)","netease","playlist"],["music.163.com.*discover/toplist.*id=(\\d+)","netease","playlist"],["y.qq.com.*song/(\\w+).html","tencent","song"],["y.qq.com.*album/(\\w+).html","tencent","album"],["y.qq.com.*singer/(\\w+).html","tencent","artist"],["y.qq.com.*playsquare/(\\w+).html","tencent","playlist"],["y.qq.com.*playlist/(\\w+).html","tencent","playlist"],["xiami.com.*song/(\\w+)","xiami","song"],["xiami.com.*album/(\\w+)","xiami","album"],["xiami.com.*artist/(\\w+)","xiami","artist"],["xiami.com.*collect/(\\w+)","xiami","playlist"]].forEach(function(a){var i=new RegExp(a[0]);var n=i.exec(e);if(n!==null){t=[a[1],a[2],n[1]]}});return t},fetch:function(e){var t=[];return new Promise(function(a,i){e.forEach(function(e){var i=r.parse(e);if(i[0]){var n=JSON.stringify(i);var s=store.get(n);if(s){t.push.apply(t,JSON.parse(s));a(t)}else{fetch("https://api.i-meto.com/meting/api?server="+i[0]+"&type="+i[1]+"&id="+i[2]+"&r="+Math.random()).then(function(e){return e.json()}).then(function(e){store.set(n,JSON.stringify(e));t.push.apply(t,e);a(t)}).catch(function(e){})}}else{t.push(e);a(t)}})})},secondToTime:function(e){var t=function(e){return isNaN(e)?"00":e<10?"0"+e:""+e};var a=Math.floor(e/3600);var i=Math.floor((e-a*3600)/60);var n=Math.floor(e-a*3600-i*60);return(a>0?[a,i,n]:[i,n]).map(t).join(":")},nameMap:{dragStart:isMobile?"touchstart":"mousedown",dragMove:isMobile?"touchmove":"mousemove",dragEnd:isMobile?"touchend":"mouseup"}},s=null;e.player={_id:r.random(999999),group:true,load:function(e){var t="";var i=this;if(e&&e.length>0){if(this.options.rawList!==e){this.options.rawList=e;a.clear()}}else{t="none";this.pause()}for(var n in h.el){h.el[n].display(t)}return this},fetch:function(){var e=this;return new Promise(function(t,i){if(a.data.length>0){t()}else{if(e.options.rawList){var n=[];e.options.rawList.forEach(function(t,i){n.push(new Promise(function(n,s){var o=i;var l;if(!t.list){o=0;e.group=false;l=[t]}else{e.group=true;l=t.list}r.fetch(l).then(function(e){a.add(o,e);n()})}))});Promise.all(n).then(function(){t(true)})}}}).then(function(t){if(t){a.create();d.create();e.mode()}})},mode:function(){var e=a.data.length;if(!e||a.errnum==e)return;var t=d.step=="next"?1:-1;var i=function(){var i=a.index+t;if(i>e||i<0){i=d.step=="next"?0:e-1}a.index=i};var n=function(){var t=r.random(e);if(a.index!==t){a.index=t}else{i()}};switch(this.options.mode){case"random":n();break;case"order":i();break;case"loop":if(d.step)i();if(a.index==-1)n();break}this.init()},"switch":function(e){if(typeof e=="number"&&e!=a.index&&a.current()&&!a.current().error){a.index=e;this.init()}},init:function(){var e=a.current();if(!e||e["error"]){this.mode();return}var t=false;if(!s.paused){t=true;this.stop()}s.attr("src",e.url);s.attr("title",e.name+" - "+e.artist);this.volume(store.get("_PlayerVolume")||"0.7");this.muted(store.get("_PlayerMuted"));c.create();if(this.options.type=="audio")l.create();if(t==true){this.play()}},play:function(){NOWPLAYING&&NOWPLAYING.player.pause();if(a.current().error){this.mode();return}var e=this;s.play().then(function(){a.scroll()}).catch(function(e){})},pause:function(){s.pause();document.title=originTitle},stop:function(){s.pause();s.currentTime=0;document.title=originTitle},seek:function(e){e=Math.max(e,0);e=Math.min(e,s.duration);s.currentTime=e;c.update(e/s.duration)},muted:function(e){if(e=="muted"){s.muted=e;store.set("_PlayerMuted",e);d.update(0)}else{store.del("_PlayerMuted");s.muted=false;d.update(s.volume)}},volume:function(e){if(!isNaN(e)){d.update(e);store.set("_PlayerVolume",e);s.volume=e}},mini:function(){i.hide()}};var o={el:null,data:null,index:0,create:function(e){var t=a.index;var i=this;var n=a.current().lrc;var r=function(n){if(t!==a.index)return;i.data=i.parse(n);var r="";i.data.forEach(function(e,t){r+="<p"+(t===0?' class="current"':"")+">"+e[1]+"</p>"});i.el=e.createChild("div",{className:"inner",innerHTML:r},"replace");i.index=0};if(n.startsWith("http"))this.fetch(n,r);else r(n)},update:function(e){if(!this.data)return;if(this.index>this.data.length-1||e<this.data[this.index][0]||(!this.data[this.index+1]||e>=this.data[this.index+1][0])){for(var t=0;t<this.data.length;t++){if(e>=this.data[t][0]&&(!this.data[t+1]||e<this.data[t+1][0])){this.index=t;var a=-(this.index-1);this.el.style.transform="translateY("+a+"rem)";this.el.style.webkitTransform="translateY("+a+"rem)";this.el.getElementsByClassName("current")[0].removeClass("current");this.el.getElementsByTagName("p")[t].addClass("current")}}}},parse:function(e){if(e){e=e.replace(/([^\]^\n])\[/g,function(e,t){return t+"\n["});var t=e.split("\n");var a=[];var i=t.length;for(var n=0;n<i;n++){var r=t[n].match(/\[(\d{2}):(\d{2})(\.(\d{2,3}))?]/g);var s=t[n].replace(/.*\[(\d{2}):(\d{2})(\.(\d{2,3}))?]/g,"").replace(/<(\d{2}):(\d{2})(\.(\d{2,3}))?>/g,"").replace(/^\s+|\s+$/g,"");if(r){var o=r.length;for(var l=0;l<o;l++){var c=/\[(\d{2}):(\d{2})(\.(\d{2,3}))?]/.exec(r[l]);var d=c[1]*60;var u=parseInt(c[2]);var h=c[4]?parseInt(c[4])/((c[4]+"").length===2?100:1e3):0;var f=d+u+h;a.push([f,s])}}}a=a.filter(function(e){return e[1]});a.sort(function(e,t){return e[0]-t[0]});return a}else{return[]}},fetch:function(e,t){fetch(e).then(function(e){return e.text()}).then(function(e){t(e)}).catch(function(e){})}};var l={el:null,create:function(){var t=a.current();this.el.innerHTML='<div class="cover"><div class="disc"><img src="'+t.cover+'" class="blur" /></div></div>'+'<div class="info"><h4 class="title">'+t.name+"</h4><span>"+t.artist+"</span>"+'<div class="lrc"></div></div>';this.el.child(".cover").addEventListener("click",e.player.options.events["play-pause"]);o.create(this.el.child(".lrc"))}};var c={el:null,bar:null,create:function(){var e=a.current().el;if(e){if(this.el){this.el.parentNode.removeClass("current").removeEventListener(r.nameMap.dragStart,this.drag);this.el.remove()}this.el=e.createChild("div",{className:"progress"});this.el.attr("data-dtime",r.secondToTime(0));this.bar=this.el.createChild("div",{className:"bar"});e.addClass("current");e.addEventListener(r.nameMap.dragStart,this.drag);a.scroll()}},update:function(e){this.bar.width(Math.floor(e*100)+"%");this.el.attr("data-ptime",r.secondToTime(e*s.duration))},seeking:function(e){if(e)this.el.addClass("seeking");else this.el.removeClass("seeking")},percent:function(e,t){var a=((e.clientX||e.changedTouches[0].clientX)-t.left())/t.width();a=Math.max(a,0);return Math.min(a,1)},drag:function(t){t.preventDefault();var i=a.current().el;var n=function(e){e.preventDefault();var t=c.percent(e,i);c.update(t);o.update(t*s.duration)};var l=function(t){t.preventDefault();i.removeEventListener(r.nameMap.dragEnd,l);i.removeEventListener(r.nameMap.dragMove,n);var a=c.percent(t,i);c.update(a);e.player.seek(a*s.duration);s.disableTimeupdate=false;c.seeking(false)};s.disableTimeupdate=true;c.seeking(true);i.addEventListener(r.nameMap.dragMove,n);i.addEventListener(r.nameMap.dragEnd,l)}};var d={el:null,btns:{},step:"next",create:function(){if(!e.player.options.controls)return;var t=this;e.player.options.controls.forEach(function(a){if(t.btns[a])return;var i={onclick:function(i){t.events[a]?t.events[a](i):e.player.options.events[a](i)}};switch(a){case"volume":i.className=" "+(s.muted?"off":"on");i.innerHTML='<div class="bar"></div>';i["on"+r.nameMap.dragStart]=t.events["volume"];i.onclick=null;break;case"mode":i.className=" "+e.player.options.mode;break;default:i.className="";break}i.className=a+i.className+" btn";t.btns[a]=t.el.createChild("div",i)});t.btns["volume"].bar=t.btns["volume"].child(".bar")},events:{mode:function(t){switch(e.player.options.mode){case"loop":e.player.options.mode="random";break;case"random":e.player.options.mode="order";break;default:e.player.options.mode="loop"}d.btns["mode"].className="mode "+e.player.options.mode+" btn";store.set("_PlayerMode",e.player.options.mode)},volume:function(t){t.preventDefault();var a=t.currentTarget;var i=false;var n=function(t){t.preventDefault();e.player.volume(d.percent(t,a));i=true};var o=function(t){t.preventDefault();a.removeEventListener(r.nameMap.dragEnd,o);a.removeEventListener(r.nameMap.dragMove,n);if(i){e.player.muted();e.player.volume(d.percent(t,a))}else{if(s.muted){e.player.muted();e.player.volume(s.volume)}else{e.player.muted("muted");d.update(0)}}};a.addEventListener(r.nameMap.dragMove,n);a.addEventListener(r.nameMap.dragEnd,o)},backward:function(t){d.step="prev";e.player.mode()},forward:function(t){d.step="next";e.player.mode()}},update:function(e){d.btns["volume"].className="volume "+(!s.muted&&e>0?"on":"off")+" btn";d.btns["volume"].bar.width(Math.floor(e*100)+"%")},percent:function(e,t){var a=((e.clientX||e.changedTouches[0].clientX)-t.left())/t.width();a=Math.max(a,0);return Math.min(a,1)}};var u={onerror:function(){a.error();e.player.mode()},ondurationchange:function(){if(s.duration!==1){c.el.attr("data-dtime",r.secondToTime(s.duration))}},onloadedmetadata:function(){e.player.seek(0);c.el.attr("data-dtime",r.secondToTime(s.duration))},onplay:function(){e.parentNode.addClass("playing");showtip(this.attr("title"));NOWPLAYING=e},onpause:function(){e.parentNode.removeClass("playing");NOWPLAYING=null},ontimeupdate:function(){if(!this.disableTimeupdate){c.update(this.currentTime/this.duration);o.update(this.currentTime)}},onended:function(t){e.player.mode();e.player.play()}};var h={el:{},create:function(){if(!e.player.options.btns)return;var t=this;e.player.options.btns.forEach(function(a){if(t.el[a])return;t.el[a]=e.createChild("div",{className:a+" btn",onclick:function(t){e.player.fetch().then(function(){e.player.options.events[a](t)})}})})}};var f=function(t){if(e.player.created)return;e.player.options=Object.assign(n,t);e.player.options.mode=store.get("_PlayerMode")||e.player.options.mode;h.create();s=e.createChild(e.player.options.type,u);i.create();e.parentNode.addClass(e.player.options.type);e.player.created=true};f(t);return e};var statics=CONFIG.statics.indexOf("//")>0?CONFIG.statics:CONFIG.root;var scrollAction={x:"undefined",y:"undefined"};var diffY=0;var originTitle,titleTime;var BODY=document.getElementsByTagName("body")[0];var HTML=document.documentElement;var Container=$("#container");var loadCat=$("#loading");var siteNav=$("#nav");var siteHeader=$("#header");var menuToggle=siteNav.child(".toggle");var quickBtn=$("#quick");var sideBar=$("#sidebar");var siteBrand=$("#brand");var toolBtn=$("#tool"),toolPlayer,backToTop,goToComment,showContents;var siteSearch=$("#search");var siteNavHeight,headerHightInner,headerHight;var oWinHeight=window.innerHeight;var oWinWidth=window.innerWidth;var LOCAL_HASH=0,LOCAL_URL=window.location.href;var pjax;var autoDarkmode=function(){if(CONFIG.auto_dark.enable){if((new Date).getHours()>=CONFIG.auto_dark.start||(new Date).getHours()<=CONFIG.auto_dark.end){changeTheme("dark")}else{changeTheme()}}};var lazyload=lozad("img, [data-background-image]",{loaded:function(e){e.addClass("lozaded")}});var Loader={timer:null,lock:false,show:function(){clearTimeout(this.timer);document.body.removeClass("loaded");loadCat.attr("style","display:block");Loader.lock=false},hide:function(e){if(!CONFIG.loader.start)e=-1;this.timer=setTimeout(this.vanish,e||3e3)},vanish:function(){if(Loader.lock)return;if(CONFIG.loader.start)transition(loadCat,0);document.body.addClass("loaded");Loader.lock=true}};var changeTheme=function(e){var t=$(".theme .ic");if(e=="dark"){HTML.attr("data-theme",e);t.removeClass("i-sun");t.addClass("i-moon")}else{HTML.attr("data-theme",null);t.removeClass("i-moon");t.addClass("i-sun")}};var changeMetaTheme=function(e){if(HTML.attr("data-theme")=="dark")e="#222";$('meta[name="theme-color"]').attr("content",e)};var themeColorListener=function(){window.matchMedia("(prefers-color-scheme: dark)").addListener(function(e){if(e.matches){changeTheme("dark")}else{changeTheme()}});var e=store.get("theme");if(e){changeTheme(e)}else{if(CONFIG.darkmode){changeTheme("dark")}}$(".theme").addEventListener("click",function(e){var t;var a=e.currentTarget.child(".ic");var i=BODY.createChild("div",{id:"neko",innerHTML:'<div class="planet"><div class="sun"></div><div class="moon"></div></div><div class="body"><div class="face"><section class="eyes left"><span class="pupil"></span></section><section class="eyes right"><span class="pupil"></span></section><span class="nose"></span></div></div>'});var n=function(){transition(i,{delay:2500,opacity:0},function(){BODY.removeChild(i)})};if(a.hasClass("i-sun")){t=function(){i.addClass("dark");changeTheme("dark");store.set("theme","dark");n()}}else{i.addClass("dark");t=function(){i.removeClass("dark");changeTheme();store.set("theme","light");n()}}transition(i,1,function(){setTimeout(t,210)})})};var visibilityListener=function(){document.addEventListener("visibilitychange",function(){switch(document.visibilityState){case"hidden":$('[rel="icon"]').attr("href",statics+CONFIG.favicon.hidden);document.title=LOCAL.favicon.hide;if(CONFIG.loader.switch)Loader.show();clearTimeout(titleTime);break;case"visible":$('[rel="icon"]').attr("href",statics+CONFIG.favicon.normal);document.title=LOCAL.favicon.show;if(CONFIG.loader.switch)Loader.hide(1e3);titleTime=setTimeout(function(){document.title=originTitle},2e3);break}})};var showtip=function(e){if(!e)return;var t=BODY.createChild("div",{innerHTML:e,className:"tip"});setTimeout(function(){t.addClass("hide");setTimeout(function(){BODY.removeChild(t)},300)},3e3)};var resizeHandle=function(e){siteNavHeight=siteNav.height();headerHightInner=siteHeader.height();headerHight=headerHightInner+$("#waves").height();if(oWinWidth!=window.innerWidth)sideBarToggleHandle(null,1);oWinHeight=window.innerHeight;oWinWidth=window.innerWidth;sideBar.child(".panels").height(oWinHeight+"px")};var scrollHandle=function(e){var t=window.innerHeight;var a=getDocHeight();var i=a>t?a-t:document.body.scrollHeight-t;var n=window.scrollY>headerHightInner;var r=window.scrollY>0;if(n){changeMetaTheme("#FFF")}else{changeMetaTheme("#222")}siteNav.toggleClass("show",n);toolBtn.toggleClass("affix",r);siteBrand.toggleClass("affix",r);sideBar.toggleClass("affix",window.scrollY>headerHight&&document.body.offsetWidth>991);if(typeof scrollAction.y=="undefined"){scrollAction.y=window.scrollY}diffY=scrollAction.y-window.scrollY;if(diffY<0){siteNav.removeClass("up");siteNav.toggleClass("down",n)}else if(diffY>0){siteNav.removeClass("down");siteNav.toggleClass("up",n)}else{}scrollAction.y=window.scrollY;var s=Math.round(Math.min(100*window.scrollY/i,100))+"%";backToTop.child("span").innerText=s;$(".percent").width(s)};var pagePosition=function(){if(CONFIG.auto_scroll)store.set(LOCAL_URL,scrollAction.y)};var positionInit=function(e){var t=window.location.hash;var a=null;if(LOCAL_HASH){store.del(LOCAL_URL);return}if(t)a=$(decodeURI(t));else{a=CONFIG.auto_scroll?parseInt(store.get(LOCAL_URL)):0}if(a){pageScroll(a);LOCAL_HASH=1}if(e&&t&&!LOCAL_HASH){pageScroll(a);LOCAL_HASH=1}};var clipBoard=function(e,t){var a=BODY.createChild("textarea",{style:{top:window.scrollY+"px",position:"absolute",opacity:"0"},readOnly:true,value:e});var i=document.getSelection();var n=i.rangeCount>0?i.getRangeAt(0):false;a.select();a.setSelectionRange(0,e.length);a.readOnly=false;var r=document.execCommand("copy");t&&t(r);a.blur();if(n){i.removeAllRanges();i.addRange(n)}BODY.removeChild(a)};var sideBarToggleHandle=function(e,t){if(sideBar.hasClass("on")){sideBar.removeClass("on");menuToggle.removeClass("close");if(t){sideBar.style=""}else{transition(sideBar,"slideRightOut")}}else{if(t){sideBar.style=""}else{transition(sideBar,"slideRightIn",function(){sideBar.addClass("on");menuToggle.addClass("close")})}}};var sideBarTab=function(){var e=sideBar.child(".inner");var t=sideBar.find(".panel");if(sideBar.child(".tab")){e.removeChild(sideBar.child(".tab"))}var a=document.createElement("ul"),i="active";a.className="tab";["contents","related","overview"].forEach(function(e){var t=sideBar.child(".panel."+e);if(t.innerHTML.replace(/(^\s*)|(\s*$)/g,"").length<1){if(e=="contents"){showContents.display("none")}return}if(e=="contents"){showContents.display("")}var n=document.createElement("li");var r=document.createElement("span");var s=document.createTextNode(t.attr("data-title"));r.appendChild(s);n.appendChild(r);n.addClass(e+" item");if(i){t.addClass(i);n.addClass(i)}else{t.removeClass("active")}n.addEventListener("click",function(e){var t=event.currentTarget;if(t.hasClass("active"))return;sideBar.find(".tab .item").forEach(function(e){e.removeClass("active")});sideBar.find(".panel").forEach(function(e){e.removeClass("active")});sideBar.child(".panel."+t.className.replace(" item","")).addClass("active");t.addClass("active")});a.appendChild(n);i=""});if(a.childNodes.length>1){e.insertBefore(a,e.childNodes[0]);sideBar.child(".panels").style.paddingTop=""}else{sideBar.child(".panels").style.paddingTop=".625rem"}};var sidebarTOC=function(){var e=$.all(".contents li");if(e.length<1){return}var t=Array.prototype.slice.call(e)||[];var a=null;t=t.map(function(e,t){var i=e.child("a.toc-link");var r=$(decodeURI(i.attr("href")));if(!r)return;var s=r.child("a.anchor");var o=function(e){e.preventDefault();var i=$(decodeURI(e.currentTarget.attr("href")));a=t;pageScroll(i,null,function(){n(t);a=null})};i.addEventListener("click",o);s&&s.addEventListener("click",function(e){o(e);clipBoard(CONFIG.hostname+"/"+LOCAL.path+e.currentTarget.attr("href"))});return r});var i=sideBar.child(".contents.panel");var n=function(a,n){var r=e[a];if(!r)return;if(r.hasClass("current")){return}$.each(".toc .active",function(e){e&&e.removeClass("active current")});t.forEach(function(e){e&&e.removeClass("active")});r.addClass("active current");t[a]&&t[a].addClass("active");var s=r.parentNode;while(!s.matches(".contents")){if(s.matches("li")){s.addClass("active");var o=$(s.child("a.toc-link").attr("href"));if(o){o.addClass("active")}}s=s.parentNode}if(getComputedStyle(sideBar).display!="none"&&i.hasClass("active")){pageScroll(i,r.offsetTop-i.offsetHeight/4)}};var r=function(e){var a=0;var i=e[a];if(i.boundingClientRect.top>0){a=t.indexOf(i.target);return a===0?0:a-1}for(;a<e.length;a++){if(e[a].boundingClientRect.top<=0){i=e[a]}else{return t.indexOf(i.target)}}return t.indexOf(i.target)};var s=function(){if(!window.IntersectionObserver)return;var e=new IntersectionObserver(function(e,t){var i=r(e)+(diffY<0?1:0);if(a===null){n(i)}},{rootMargin:"0px 0px -100% 0px",threshold:0});t.forEach(function(t){t&&e.observe(t)})};s()};var backToTopHandle=function(){pageScroll(0)};var goToBottomHandle=function(){pageScroll(parseInt(Container.height()))};var goToCommentHandle=function(){pageScroll($("#comments"))};var menuActive=function(){$.each(".menu .item:not(.title)",function(e){var t=e.child("a[href]");var a=e.parentNode.parentNode;if(!t)return;var i=t.pathname===location.pathname||t.pathname===location.pathname.replace("index.html","");var n=!CONFIG.root.startsWith(t.pathname)&&location.pathname.startsWith(t.pathname);var r=t.hostname===location.hostname&&(i||n);e.toggleClass("active",r);if(e.parentNode.child(".active")&&a.hasClass("dropdown")){a.removeClass("active").addClass("expand")}else{a.removeClass("expand")}})};const cardActive=function(){if(!$(".index.wrap"))return;if(!window.IntersectionObserver){$.each(".index.wrap article.item, .index.wrap section.item",function(e){if(e.hasClass("show")===false){e.addClass("show")}})}else{const e=new IntersectionObserver(function(t){t.forEach(function(t){if(t.target.hasClass("show")){e.unobserve(t.target)}else{if(t.isIntersecting||t.intersectionRatio>0){t.target.addClass("show");e.unobserve(t.target)}}})},{root:null,threshold:[.3]});$.each(".index.wrap article.item, .index.wrap section.item",function(t){e.observe(t)});$(".index.wrap .item:first-child").addClass("show")}$.each(".cards .item",function(e,t){["mouseenter","touchstart"].forEach(function(t){e.addEventListener(t,function(t){if($(".cards .item.active")){$(".cards .item.active").removeClass("active")}e.addClass("active")},{passive:true})});["mouseleave"].forEach(function(t){e.addEventListener(t,function(t){e.removeClass("active")},{passive:true})})})};const registerExtURL=function(){$.each("span.exturl",function(e){const t=document.createElement("a");t.href=decodeURIComponent(atob(e.dataset.url).split("").map(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""));t.rel="noopener external nofollow noreferrer";t.target="_blank";t.className=e.className;t.title=e.title||e.innerText;t.innerHTML=e.innerHTML;if(e.dataset.backgroundImage){t.dataset.backgroundImage=e.dataset.backgroundImage}e.parentNode.replaceChild(t,e)})};const postFancybox=function(e){if($(e+" .md img")){vendorCss("fancybox");vendorJs("fancybox",function(){const t=jQuery.noConflict();$.each(e+" p.gallery",function(e){const t=document.createElement("div");t.className="gallery";t.attr("data-height",e.attr("data-height")||220);t.innerHTML=e.innerHTML.replace(/<br>/g,"");e.parentNode.insertBefore(t,e);e.remove()});$.each(e+" .md img:not(.emoji):not(.vemoji)",function(e){const a=i.wrap('<a class="fancybox" href="'+s+'" itemscope itemtype="http://schema.org/ImageObject" itemprop="url"></a>').parent("a");const i=t(e);var n,r="image-info";if(!i.is("a img")){const s=i.attr("data-src")||i.attr("src");i.data("safe-src",s);if(!i.is(".gallery img")){a.attr("data-fancybox","default").attr("rel","default")}else{r="jg-caption"}}if(n=e.attr("title")){a.attr("data-caption",n);const o=document.createElement("span");const l=document.createTextNode(n);o.appendChild(l);o.addClass(r);e.insertAfter(o)}});$.each(e+" div.gallery",function(e,a){t(e).justifiedGallery({rowHeight:t(e).data("height")||120,rel:"gallery-"+a}).on("jg.complete",function(){t(this).find("a").each(function(e,t){t.attr("data-fancybox","gallery-"+a)})})});t.fancybox.defaults.hash=false;t(e+" .fancybox").fancybox({loop:true,helpers:{overlay:{locked:false}}})},window.jQuery)}};const postBeauty=function(){loadComments();if(!$(".md"))return;postFancybox(".post.block");$(".post.block").oncopy=function(e){showtip(LOCAL.copyright);if(LOCAL.nocopy){e.preventDefault();return}const t=$("#copyright");if(window.getSelection().toString().length>30&&t){e.preventDefault();const a="# "+t.child(".author").innerText;const i="# "+t.child(".link").innerText;const n="# "+t.child(".license").innerText;const r=a+"<br>"+i+"<br>"+n+"<br><br>"+window.getSelection().toString().replace(/\r\n/g,"<br>");const s=a+"\n"+i+"\n"+n+"\n\n"+window.getSelection().toString().replace(/\r\n/g,"\n");if(e.clipboardData){e.clipboardData.setData("text/html",r);e.clipboardData.setData("text/plain",s)}else if(window.clipboardData){return window.clipboardData.setData("text",s)}}};$.each("li ruby",function(e){var t=e.parentNode;if(e.parentNode.tagName!="LI"){t=e.parentNode.parentNode}t.addClass("ruby")});$.each("ol[start]",function(e){e.style.counterReset="counter "+parseInt(e.attr("start")-1)});$.each(".md table",function(e){e.wrap({className:"table-container"})});$.each(".highlight > .table-container",function(e){e.className="code-container"});$.each("figure.highlight",function(e){const t=e.child(".code-container");const a=e.child("figcaption");e.insertAdjacentHTML("beforeend",'<div class="operation"><span class="breakline-btn"><i class="ic i-align-left"></i></span><span class="copy-btn"><i class="ic i-clipboard"></i></span><span class="fullscreen-btn"><i class="ic i-expand"></i></span></div>');
const i=e.child(".copy-btn");if(LOCAL.nocopy){i.remove()}else{i.addEventListener("click",function(e){const a=e.currentTarget;var i="",n="";t.find("pre").forEach(function(e){n+=i+e.innerText;i="\n"});clipBoard(n,function(e){a.child(".ic").className=e?"ic i-check":"ic i-times";a.blur();showtip(LOCAL.copyright)})},{passive:true});i.addEventListener("mouseleave",function(e){setTimeout(function(){e.target.child(".ic").className="ic i-clipboard"},1e3)})}var n=e.child(".breakline-btn");n.addEventListener("click",function(t){var a=t.currentTarget;if(e.hasClass("breakline")){e.removeClass("breakline");a.child(".ic").className="ic i-align-left"}else{e.addClass("breakline");a.child(".ic").className="ic i-align-justify"}});var r=e.child(".fullscreen-btn");var s=function(){e.removeClass("fullscreen");e.scrollTop=0;BODY.removeClass("fullscreen");r.child(".ic").className="ic i-expand"};var o=function(t){var a=t.currentTarget;if(e.hasClass("fullscreen")){s();d&&d();pageScroll(e)}else{e.addClass("fullscreen");BODY.addClass("fullscreen");r.child(".ic").className="ic i-compress";c&&c()}};r.addEventListener("click",o);a&&a.addEventListener("click",o);if(t&&t.find("tr").length>15){t.style.maxHeight="300px";t.insertAdjacentHTML("beforeend",'<div class="show-btn"><i class="ic i-angle-down"></i></div>');var l=t.child(".show-btn");var c=function(){t.style.maxHeight="";l.addClass("open")};var d=function(){t.style.maxHeight="300px";l.removeClass("open")};l.addEventListener("click",function(e){if(l.hasClass("open")){s();d();pageScroll(t)}else{c()}})}});$.each("pre.mermaid > svg",function(e){e.style.maxWidth=""});$.each(".reward button",function(e){e.addEventListener("click",function(e){e.preventDefault();var t=$("#qr");if(t.display()==="inline-flex"){transition(t,0)}else{transition(t,1,function(){t.display("inline-flex")})}})});$.each(".quiz > ul.options li",function(e){e.addEventListener("click",function(t){if(e.hasClass("correct")){e.toggleClass("right");e.parentNode.parentNode.addClass("show")}else{e.toggleClass("wrong")}})});$.each(".quiz > p",function(e){e.addEventListener("click",function(t){e.parentNode.toggleClass("show")})});$.each(".quiz > p:first-child",function(e){var t=e.parentNode;var a="choice";if(t.hasClass("true")||t.hasClass("false"))a="true_false";if(t.hasClass("multi"))a="multiple";if(t.hasClass("fill"))a="gap_fill";if(t.hasClass("essay"))a="essay";e.attr("data-type",LOCAL.quiz[a])});$.each(".quiz .mistake",function(e){e.attr("data-type",LOCAL.quiz.mistake)});$.each("div.tags a",function(e){e.className=["primary","success","info","warning","danger"][Math.floor(Math.random()*5)]});$.each(".md div.player",function(e){mediaPlayer(e,{type:e.attr("data-type"),mode:"order",btns:[]}).player.load(JSON.parse(e.attr("data-src"))).fetch()})};const tabFormat=function(){var e;$.each("div.tab",function(t,a){if(t.attr("data-ready"))return;var i=t.attr("data-id");var n=t.attr("data-title");var r=$("#"+i);if(!r){r=document.createElement("div");r.className="tabs";r.id=i;r.innerHTML='<div class="show-btn"></div>';var s=r.child(".show-btn");s.addEventListener("click",function(e){pageScroll(r)});t.parentNode.insertBefore(r,t);e=true}else{e=false}var o=r.child(".nav ul");if(!o){o=r.createChild("div",{className:"nav",innerHTML:"<ul></ul>"}).child("ul")}var l=o.createChild("li",{innerHTML:n});if(e){l.addClass("active");t.addClass("active")}l.addEventListener("click",function(e){var a=e.currentTarget;r.find(".active").forEach(function(e){e.removeClass("active")});t.addClass("active");a.addClass("active")});r.appendChild(t);t.attr("data-ready",true)})};const loadComments=function(){var e=$("#comments");if(!e){goToComment.display("none");return}else{goToComment.display("")}if(!window.IntersectionObserver){vendorCss("valine")}else{var t=new IntersectionObserver(function(e,t){var a=e[0];vendorCss("valine");if(a.isIntersecting||a.intersectionRatio>0){transition($("#comments"),"bounceUpIn");t.disconnect()}});t.observe(e)}};const algoliaSearch=function(e){if(CONFIG.search===null)return;if(!siteSearch){siteSearch=BODY.createChild("div",{id:"search",innerHTML:'<div class="inner"><div class="header"><span class="icon"><i class="ic i-search"></i></span><div class="search-input-container"></div><span class="close-btn"><i class="ic i-times-circle"></i></span></div><div class="results"><div class="inner"><div id="search-stats"></div><div id="search-hits"></div><div id="search-pagination"></div></div></div></div>'})}var t=instantsearch({indexName:CONFIG.search.indexName,searchClient:algoliasearch(CONFIG.search.appID,CONFIG.search.apiKey),searchFunction:function(e){var t=$(".search-input");if(t.value){e.search()}}});t.on("render",function(){e.refresh($("#search-hits"))});t.addWidgets([instantsearch.widgets.configure({hitsPerPage:CONFIG.search.hits.per_page||10}),instantsearch.widgets.searchBox({container:".search-input-container",placeholder:LOCAL.search.placeholder,showReset:false,showSubmit:false,showLoadingIndicator:false,cssClasses:{input:"search-input"}}),instantsearch.widgets.stats({container:"#search-stats",templates:{text:function(e){var t=LOCAL.search.stats.replace(/\$\{hits}/,e.nbHits).replace(/\$\{time}/,e.processingTimeMS);return t+'<span class="algolia-powered"></span><hr>'}}}),instantsearch.widgets.hits({container:"#search-hits",templates:{item:function(e){var t=e.categories?"<span>"+e.categories.join('<i class="ic i-angle-right"></i>')+"</span>":"";return'<a href="'+CONFIG.root+e.path+'">'+t+e._highlightResult.title.value+"</a>"},empty:function(e){return'<div id="hits-empty">'+LOCAL.search.empty.replace(/\$\{query}/,e.query)+"</div>"}},cssClasses:{item:"item"}}),instantsearch.widgets.pagination({container:"#search-pagination",scrollTo:false,showFirst:false,showLast:false,templates:{first:'<i class="ic i-angle-double-left"></i>',last:'<i class="ic i-angle-double-right"></i>',previous:'<i class="ic i-angle-left"></i>',next:'<i class="ic i-angle-right"></i>'},cssClasses:{root:"pagination",item:"pagination-item",link:"page-number",selectedItem:"current",disabledItem:"disabled-item"}})]);t.start();$.each(".search",function(e){e.addEventListener("click",function(){document.body.style.overflow="hidden";transition(siteSearch,"shrinkIn",function(){$(".search-input").focus()})})});const a=function(){document.body.style.overflow="";transition(siteSearch,0)};siteSearch.addEventListener("click",function(e){if(e.target===siteSearch){a()}});$(".close-btn").addEventListener("click",a);window.addEventListener("pjax:success",a);window.addEventListener("keyup",function(e){if(e.key==="Escape"){a()}})};var domInit=function(){$.each(".overview .menu > .item",function(e){siteNav.child(".menu").appendChild(e.cloneNode(true))});loadCat.addEventListener("click",Loader.vanish);menuToggle.addEventListener("click",sideBarToggleHandle);$(".dimmer").addEventListener("click",sideBarToggleHandle);quickBtn.child(".down").addEventListener("click",goToBottomHandle);quickBtn.child(".up").addEventListener("click",backToTopHandle);if(!toolBtn){toolBtn=siteHeader.createChild("div",{id:"tool",innerHTML:'<div class="item player"></div><div class="item contents"><i class="ic i-list-ol"></i></div><div class="item chat"><i class="ic i-comments"></i></div><div class="item back-to-top"><i class="ic i-arrow-up"></i><span>0%</span></div>'})}toolPlayer=toolBtn.child(".player");backToTop=toolBtn.child(".back-to-top");goToComment=toolBtn.child(".chat");showContents=toolBtn.child(".contents");backToTop.addEventListener("click",backToTopHandle);goToComment.addEventListener("click",goToCommentHandle);showContents.addEventListener("click",sideBarToggleHandle);mediaPlayer(toolPlayer);$("main").addEventListener("click",function(){toolPlayer.player.mini()})};var pjaxReload=function(){pagePosition();if(sideBar.hasClass("on")){transition(sideBar,function(){sideBar.removeClass("on");menuToggle.removeClass("close")})}$("#main").innerHTML="";$("#main").appendChild(loadCat.lastChild.cloneNode(true));pageScroll(0)};var siteRefresh=function(e){LOCAL_HASH=0;LOCAL_URL=window.location.href;vendorCss("katex");vendorJs("copy_tex");vendorCss("mermaid");vendorJs("chart");if(!e){$.each("script[data-pjax]",pjaxScript)}originTitle=document.title;resizeHandle();menuActive();sideBarTab();sidebarTOC();registerExtURL();postBeauty();tabFormat();toolPlayer.player.load(LOCAL.audio||CONFIG.audio||{});Loader.hide();setTimeout(function(){positionInit()},500);cardActive();lazyload.observe()};var siteInit=function(){domInit();pjax=new Pjax({selectors:["head title",".languages",".pjax","script[data-config]"],analytics:false,cacheBust:false});CONFIG.quicklink.ignores=LOCAL.ignores;quicklink.listen(CONFIG.quicklink);autoDarkmode();visibilityListener();themeColorListener();algoliaSearch(pjax);window.addEventListener("scroll",scrollHandle);window.addEventListener("resize",resizeHandle);window.addEventListener("pjax:send",pjaxReload);window.addEventListener("pjax:success",siteRefresh);window.addEventListener("beforeunload",function(){pagePosition()});siteRefresh(1)};window.addEventListener("DOMContentLoaded",siteInit);console.log("%c Theme.Shoka v"+CONFIG.version+" %c https://shoka.lostyu.me/ ","color: white; background: #e9546b; padding:5px 0;","padding:4px;border:1px solid #e9546b;");console.log("%c kaitaku's blog"+"%c https://www.kaitaku.xyz","color: white; background: #00bfff; padding: 5px 3px;","padding: 4px;border:1px solid #00bfff");var canvasEl=document.createElement("canvas");canvasEl.style.cssText="position:fixed;top:0;left:0;pointer-events:none;z-index:9999999";document.body.appendChild(canvasEl);var ctx=canvasEl.getContext("2d");var numberOfParticules=30;var pointerX=0;var pointerY=0;var tap="click";var colors=CONFIG.fireworks;function setCanvasSize(){canvasEl.width=window.innerWidth*2;canvasEl.height=window.innerHeight*2;canvasEl.style.width=window.innerWidth+"px";canvasEl.style.height=window.innerHeight+"px";canvasEl.getContext("2d").scale(2,2)}function updateCoords(e){pointerX=e.clientX||e.touches&&e.touches[0].clientX;pointerY=e.clientY||e.touches&&e.touches[0].clientY}function setParticuleDirection(e){var t=anime.random(0,360)*Math.PI/180;var a=anime.random(50,180);var i=[-1,1][anime.random(0,1)]*a;return{x:e.x+i*Math.cos(t),y:e.y+i*Math.sin(t)}}function createParticule(e,t){var a={};a.x=e;a.y=t;a.color=colors[anime.random(0,colors.length-1)];a.radius=anime.random(16,32);a.endPos=setParticuleDirection(a);a.draw=function(){ctx.beginPath();ctx.arc(a.x,a.y,a.radius,0,2*Math.PI,true);ctx.fillStyle=a.color;ctx.fill()};return a}function createCircle(e,t){var a={};a.x=e;a.y=t;a.color="#FFF";a.radius=.1;a.alpha=.5;a.lineWidth=6;a.draw=function(){ctx.globalAlpha=a.alpha;ctx.beginPath();ctx.arc(a.x,a.y,a.radius,0,2*Math.PI,true);ctx.lineWidth=a.lineWidth;ctx.strokeStyle=a.color;ctx.stroke();ctx.globalAlpha=1};return a}function renderParticule(e){for(var t=0;t<e.animatables.length;t++){e.animatables[t].target.draw()}}function animateParticules(e,t){var a=createCircle(e,t);var i=[];for(var n=0;n<numberOfParticules;n++){i.push(createParticule(e,t))}anime.timeline().add({targets:i,x:function(e){return e.endPos.x},y:function(e){return e.endPos.y},radius:.1,duration:anime.random(1200,1800),easing:"easeOutExpo",update:renderParticule}).add({targets:a,radius:anime.random(80,160),lineWidth:0,alpha:{value:0,easing:"linear",duration:anime.random(600,800)},duration:anime.random(1200,1800),easing:"easeOutExpo",update:renderParticule},0)}var render=anime({duration:Infinity,update:function(){ctx.clearRect(0,0,canvasEl.width,canvasEl.height)}});document.addEventListener(tap,function(e){render.play();updateCoords(e);animateParticules(pointerX,pointerY)},false);setCanvasSize();window.addEventListener("resize",setCanvasSize,false);