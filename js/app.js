const CONFIG={version:"0.1.5",hostname:"https://www.kaitaku.xyz",root:"/",statics:"/",favicon:{normal:"assets/favicon.ico",hidden:"assets/failure.ico"},darkmode:!1,auto_dark:{enable:!0,start:20,end:7},auto_scroll:!0,js:{chart:"npm/frappe-charts@1.5.0/dist/frappe-charts.min.iife.min.js",copy_tex:"npm/katex@0.12.0/dist/contrib/copy-tex.min.js",fancybox:"combine/npm/jquery@3.5.1/dist/jquery.min.js,npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js,npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js"},css:{valine:"css/comment.css",katex:"npm/katex@0.12.0/dist/katex.min.css",mermaid:"css/mermaid.css",fancybox:"combine/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css,npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"},loader:{start:!0,switch:!1},search:{appID:"Z90S0X07N8",apiKey:"8770deb4853046c6fb7f786f02ab69be",indexName:"kaitaku-blog",hits:{per_page:10}},outime:{enable:!0,days:90},quicklink:{timeout:3e3,priority:!0},playerAPI:"https://api.injahow.cn",disableVL:!1,audio:[{title:"列表1",list:["https://music.163.com/#/playlist?id=2943811283","https://music.163.com/#/playlist?id=2297706586"]},{title:"列表2",list:["https://music.163.com/#/playlist?id=2031842656"]}],fireworks:["rgba(255,182,185,.9)","rgba(250,227,217,.9)","rgba(187,222,214,.9)","rgba(138,198,209,.9)"]},getDocHeight=()=>$dom("main > .inner").offsetHeight,$dom=(e,t=document)=>"#"===e[0]?t.getElementById(e.substring(1)):t.querySelector(e);$dom.all=(e,t=document)=>t.querySelectorAll(e),$dom.each=(e,t,n)=>$dom.all(e,n).forEach(t),$dom.asyncify=async(e,t=document)=>0===e.indexOf("#")?t.getElementById(e.replace("#","")):t.querySelector(e),$dom.asyncifyAll=async(e,t=document)=>t.querySelectorAll(e),$dom.asyncifyEach=(e,t,n)=>{$dom.asyncifyAll(e,n).then((e=>{e.forEach(t)}))},Object.assign(HTMLElement.prototype,{createChild:function(e,t,n){const a=document.createElement(e);switch(Object.assign(a,t),n){case"after":this.insertAfter(a);break;case"replace":this.innerHTML="",this.appendChild(a);break;default:this.appendChild(a)}return a},wrapObject:function(e){const t=document.createElement("div");Object.assign(t,e),this.parentNode.insertBefore(t,this),this.parentNode.removeChild(this),t.appendChild(this)},changeOrGetHeight:function(e){return e&&(this.style.height="number"==typeof e?e+"rem":e),this.getBoundingClientRect().height},changeOrGetWidth:function(e){return e&&(this.style.width="number"==typeof e?e+"rem":e),this.getBoundingClientRect().width},top:function(){return this.getBoundingClientRect().top},left:function(){return this.getBoundingClientRect().left},attr:function(e,t){return null===t?this.removeAttribute(e):t?(this.setAttribute(e,t),this):this.getAttribute(e)},insertAfter:function(e){const t=this.parentNode;t.lastChild===this?t.appendChild(e):t.insertBefore(e,this.nextSibling)},display:function(e){return null==e?this.style.display:(this.style.display=e,this)},child:function(e){return $dom(e,this)},find:function(e){return $dom.all(e,this)},_class:function(e,t,n){const a=t.indexOf(" ")?t.split(" "):[t],i=this;a.forEach((function(t){"toggle"===e?i.classList.toggle(t,n):i.classList[e](t)}))},addClass:function(e){return this._class("add",e),this},removeClass:function(e){return this._class("remove",e),this},toggleClass:function(e,t){return this._class("toggle",e,t),this},hasClass:function(e){return this.classList.contains(e)}});const $storage={set:(e,t)=>{localStorage.setItem(e,t)},get:e=>localStorage.getItem(e),del:e=>{localStorage.removeItem(e)}},getScript=function(e,t,n){if(n)t();else{let n=document.createElement("script");n.onload=function(e,a){!a&&n.readyState||(console.log("abort!"),n.onload=null,n=void 0,!a&&t&&setTimeout(t,0))},n.src=e,document.head.appendChild(n)}},assetUrl=function(e,t){const n=CONFIG[e][t];return n.indexOf("gh")>-1||n.indexOf("combine")>-1||n.indexOf("npm")>-1?`https://cdn.jsdelivr.net/${n}`:n.indexOf("http")>-1?n:`/${n}`},vendorJs=function(e,t,n){LOCAL[e]&&getScript(assetUrl("js",e),t||function(){window[e]=!0},n||window[e])},vendorCss=function(e,t){window["css"+e]||LOCAL[e]&&(document.head.createChild("link",{rel:"stylesheet",href:assetUrl("css",e)}),window["css"+e]=!0)},transition=(e,t,n)=>{let a,i="none";switch(t){case 0:a={opacity:[1,0]};break;case 1:a={opacity:[0,1]},i="block";break;case"bounceUpIn":a={begin:function(t){e.display("block")},translateY:[{value:-60,duration:200},{value:10,duration:200},{value:-5,duration:200},{value:0,duration:200}],opacity:[0,1]},i="block";break;case"shrinkIn":a={begin:function(t){e.display("block")},scale:[{value:1.1,duration:300},{value:1,duration:200}],opacity:1},i="block";break;case"slideRightIn":a={begin:function(t){e.display("block")},translateX:[100,0],opacity:[0,1]},i="block";break;case"slideRightOut":a={translateX:[0,100],opacity:[1,0]};break;default:a=t,i=t.display}anime(Object.assign({targets:e,duration:200,easing:"linear"},a)).finished.then((function(){e.display(i),n&&n()}))},pjaxScript=function(e){const t=e.text||e.textContent||e.innerHTML||"",n=e.parentNode;n.removeChild(e);const a=document.createElement("script");e.id&&(a.id=e.id),e.className&&(a.className=e.className),e.type&&(a.type=e.type),e.src&&(a.src=e.src,a.async=!1),void 0!==e.dataset.pjax&&(a.dataset.pjax=""),""!==t&&a.appendChild(document.createTextNode(t)),n.appendChild(a)},pageScroll=function(e,t,n){const a={targets:"number"==typeof t?e.parentNode:document.scrollingElement,duration:500,easing:"easeInOutQuad",scrollTop:t||("number"==typeof e?e:e?e.top()+document.documentElement.scrollTop-siteNavHeight:0),complete:function(){n&&n()}};anime(a)},statics=CONFIG.statics.indexOf("//")>0?CONFIG.statics:CONFIG.root,scrollAction={x:void 0,y:void 0};let originTitle,titleTime,diffY=0;const BODY=document.getElementsByTagName("body")[0],HTML=document.documentElement,Container=$dom("#container"),loadCat=$dom("#loading"),siteNav=$dom("#nav"),siteHeader=$dom("#header"),menuToggle=siteNav.child(".toggle"),quickBtn=$dom("#quick"),sideBar=$dom("#sidebar"),siteBrand=$dom("#brand");let toolPlayer,backToTop,goToComment,showContents,siteNavHeight,headerHightInner,headerHight,pjax,toolBtn=$dom("#tool"),siteSearch=$dom("#search"),oWinHeight=window.innerHeight,oWinWidth=window.innerWidth,LOCAL_HASH=0,LOCAL_URL=window.location.href;const changeTheme=function(e){const t=$dom(".theme .ic");"dark"===e?(HTML.attr("data-theme",e),t.removeClass("i-sun"),t.addClass("i-moon")):(HTML.attr("data-theme",null),t.removeClass("i-moon"),t.addClass("i-sun"))},autoDarkmode=function(){CONFIG.auto_dark.enable&&((new Date).getHours()>=CONFIG.auto_dark.start||(new Date).getHours()<=CONFIG.auto_dark.end?changeTheme("dark"):changeTheme())},lazyload=lozad("img, [data-background-image]",{loaded:function(e){e.addClass("lozaded")}}),Loader={timer:null,lock:!1,show:function(){clearTimeout(this.timer),document.body.removeClass("loaded"),loadCat.attr("style","display:block"),Loader.lock=!1},hide:function(e){CONFIG.loader.start||(e=-1),this.timer=setTimeout(this.vanish,e||3e3)},vanish:function(){Loader.lock||(CONFIG.loader.start&&transition(loadCat,0),document.body.addClass("loaded"),Loader.lock=!0)}},changeMetaTheme=function(e){"dark"===HTML.attr("data-theme")&&(e="#222"),$dom('meta[name="theme-color"]').attr("content",e)},themeColorListener=function(){window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(function(e){e.matches?changeTheme("dark"):changeTheme()}));const e=$storage.get("theme");e?changeTheme(e):CONFIG.darkmode&&changeTheme("dark")},visibilityListener=function(){let e=$dom('[rel="icon"]');document.addEventListener("visibilitychange",(function(){switch(document.visibilityState){case"hidden":e.attr("href",statics+CONFIG.favicon.hidden),document.title=LOCAL.favicon.hide,CONFIG.loader.switch&&Loader.show(),clearTimeout(titleTime);break;case"visible":e.attr("href",statics+CONFIG.favicon.normal),document.title=LOCAL.favicon.show,CONFIG.loader.switch&&Loader.hide(1e3),titleTime=setTimeout((function(){document.title=originTitle}),2e3)}}))},showtip=function(e){if(!e)return;const t=BODY.createChild("div",{innerHTML:e,className:"tip"});setTimeout((function(){t.addClass("hide"),setTimeout((function(){BODY.removeChild(t)}),300)}),3e3)},resizeHandle=function(e){siteNavHeight=siteNav.changeOrGetHeight(),headerHightInner=siteHeader.changeOrGetHeight(),headerHight=headerHightInner+$dom("#waves").changeOrGetHeight(),oWinWidth!==window.innerWidth&&sideBarToggleHandle(null,1),oWinHeight=window.innerHeight,oWinWidth=window.innerWidth,sideBar.child(".panels").changeOrGetHeight(oWinHeight+"px")},scrollHandle=function(e){const t=window.innerHeight,n=$dom("main > .inner").offsetHeight,a=n>t?n-t:document.body.scrollHeight-t,i=window.scrollY>headerHightInner,o=window.scrollY>0;var s;s=i?"#FFF":"#222","dark"===HTML.attr("data-theme")&&(s="#222"),$dom('meta[name="theme-color"]').attr("content",s),siteNav.toggleClass("show",i),toolBtn.toggleClass("affix",o),siteBrand.toggleClass("affix",o),sideBar.toggleClass("affix",window.scrollY>headerHight&&document.body.offsetWidth>991),void 0===scrollAction.y&&(scrollAction.y=window.scrollY),diffY=scrollAction.y-window.scrollY,diffY<0?(siteNav.removeClass("up"),siteNav.toggleClass("down",i)):diffY>0&&(siteNav.removeClass("down"),siteNav.toggleClass("up",i)),scrollAction.y=window.scrollY;const c=Math.round(Math.min(100*window.scrollY/a,100))+"%";backToTop.child("span").innerText=c,$dom(".percent").changeOrGetWidth(c)},pagePosition=function(){CONFIG.auto_scroll&&$storage.set(LOCAL_URL,String(scrollAction.y))},positionInit=function(e){const t=window.location.hash;let n=null;LOCAL_HASH?$storage.del(LOCAL_URL):(n=t?$dom(decodeURI(t)):CONFIG.auto_scroll?parseInt($storage.get(LOCAL_URL)):0,n&&(pageScroll(n),LOCAL_HASH=1),e&&t&&!LOCAL_HASH&&(pageScroll(n),LOCAL_HASH=1))},clipBoard=function(e,t){if(navigator.clipboard&&window.isSecureContext)navigator.clipboard.writeText(e).then((()=>{t&&t(!0)}),(()=>{t&&t(!1)}));else{const n=BODY.createChild("textarea",{style:{top:window.scrollY+"px",position:"absolute",opacity:"0"},readOnly:!0,value:e}),a=document.getSelection(),i=a.rangeCount>0&&a.getRangeAt(0);n.select(),n.setSelectionRange(0,e.length),n.readOnly=!1;const o=document.execCommand("copy");t&&t(o),n.blur(),i&&(a.removeAllRanges(),a.addRange(i)),BODY.removeChild(n)}},isOutime=function(){let e;if(CONFIG.outime.enable&&LOCAL.outime){const t=document.getElementsByTagName("time");if(0===t.length)return;const n=document.getElementsByClassName("body md");if(0===n.length)return;const a=Date.now(),i=new Date(t[0].dateTime);e=1===t.length?i:new Date(t[1].dateTime);const o=parseInt(String(a-e));if(o>864e5*(parseInt(String(CONFIG.outime.days))||30)){const e=parseInt(String((a-i)/864e5)),t=parseInt(String(o/864e5)),s=LOCAL.template.replace("{{publish}}",String(e)).replace("{{updated}}",String(t));n[0].insertAdjacentHTML("afterbegin",s)}}},clickMenu=function(){const e=$dom("#clickMenu");window.oncontextmenu=function(t){if(t.ctrlKey)return;t.preventDefault();let n=t.offsetX,a=t.offsetY,i=window.innerWidth,o=window.innerHeight,s=e.offsetWidth,c=e.offsetHeight;n=i-s>=n?n:i-s,a=o-c>=a?a:o-c,e.style.top=a+"px",e.style.left=n+"px",e.classList.add("active"),$dom.each(".clickSubmenu",(e=>{n>i-s-e.offsetWidth?e.style.left="-200px":(e.style.left="",e.style.right="-200px")}))},window.addEventListener("click",(function(){e.classList.remove("active")}))},cardActive=function(){if($dom(".index.wrap")){if(window.IntersectionObserver){const e=new IntersectionObserver((function(t){t.forEach((function(t){t.target.hasClass("show")?e.unobserve(t.target):(t.isIntersecting||t.intersectionRatio>0)&&(t.target.addClass("show"),e.unobserve(t.target))}))}),{root:null,threshold:[.3]});$dom.each(".index.wrap article.item, .index.wrap section.item",(function(t){e.observe(t)})),$dom(".index.wrap .item:first-child").addClass("show")}else $dom.each(".index.wrap article.item, .index.wrap section.item",(function(e){!1===e.hasClass("show")&&e.addClass("show")}));$dom.each(".cards .item",(function(e,t){["mouseenter","touchstart"].forEach((function(t){e.addEventListener(t,(function(t){$dom(".cards .item.active")&&$dom(".cards .item.active").removeClass("active"),e.addClass("active")}),{passive:!0})})),["mouseleave"].forEach((function(t){e.addEventListener(t,(function(t){e.removeClass("active")}),{passive:!0})}))}))}},registerExtURL=function(){$dom.each("span.exturl",(function(e){const t=document.createElement("a");t.href=decodeURIComponent(atob(e.dataset.url).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join("")),t.rel="noopener external nofollow noreferrer",t.target="_blank",t.className=e.className,t.title=e.title||e.innerText,t.innerHTML=e.innerHTML,e.dataset.backgroundImage&&(t.dataset.backgroundImage=e.dataset.backgroundImage),e.parentNode.replaceChild(t,e)}))},postFancybox=function(e){$dom(e+" .md img")&&(vendorCss("fancybox"),vendorJs("fancybox",(function(){const t=jQuery.noConflict();$dom.each(e+" p.gallery",(function(e){const t=document.createElement("div");t.className="gallery",t.attr("data-height",e.attr("data-height")||220),t.innerHTML=e.innerHTML.replace(/<br>/g,""),e.parentNode.insertBefore(t,e),e.remove()})),$dom.each(e+" .md img:not(.emoji):not(.vemoji)",(function(e){const n=t(e),a=n.attr("data-src")||n.attr("src"),i=n.wrap('<a class="fancybox" href="'+a+'" itemscope itemtype="https://schema.org/ImageObject" itemprop="url"></a>').parent("a");let o,s="image-info";if(n.is("a img")||(n.data("safe-src",a),n.is(".gallery img")?s="jg-caption":i.attr("data-fancybox","default").attr("rel","default")),o=e.attr("title")){i.attr("data-caption",o);const t=document.createElement("span"),n=document.createTextNode(o);t.appendChild(n),t.addClass(s),e.insertAfter(t)}})),$dom.each(e+" div.gallery",(function(e,n){t(e).justifiedGallery({rowHeight:t(e).data("height")||120,rel:"gallery-"+n}).on("jg.complete",(function(){t(this).find("a").each(((e,t)=>{t.attr("data-fancybox","gallery-"+n)}))}))})),t.fancybox.defaults.hash=!1,t(e+" .fancybox").fancybox({loop:!0,helpers:{overlay:{locked:!1}}})}),window.jQuery))},postBeauty=function(){loadComments(),$dom(".md")&&($dom((p=".post.block")+" .md img")&&(vendorCss("fancybox"),vendorJs("fancybox",(function(){const e=jQuery.noConflict();$dom.each(p+" p.gallery",(function(e){const t=document.createElement("div");t.className="gallery",t.attr("data-height",e.attr("data-height")||220),t.innerHTML=e.innerHTML.replace(/<br>/g,""),e.parentNode.insertBefore(t,e),e.remove()})),$dom.each(p+" .md img:not(.emoji):not(.vemoji)",(function(t){const n=e(t),a=n.attr("data-src")||n.attr("src"),i=n.wrap('<a class="fancybox" href="'+a+'" itemscope itemtype="https://schema.org/ImageObject" itemprop="url"></a>').parent("a");let o,s="image-info";if(n.is("a img")||(n.data("safe-src",a),n.is(".gallery img")?s="jg-caption":i.attr("data-fancybox","default").attr("rel","default")),o=t.attr("title")){i.attr("data-caption",o);const e=document.createElement("span"),n=document.createTextNode(o);e.appendChild(n),e.addClass(s),t.insertAfter(e)}})),$dom.each(p+" div.gallery",(function(t,n){e(t).justifiedGallery({rowHeight:e(t).data("height")||120,rel:"gallery-"+n}).on("jg.complete",(function(){e(this).find("a").each(((e,t)=>{t.attr("data-fancybox","gallery-"+n)}))}))})),e.fancybox.defaults.hash=!1,e(p+" .fancybox").fancybox({loop:!0,helpers:{overlay:{locked:!1}}})}),window.jQuery)),$dom(".post.block").oncopy=async function(e){if(showtip(LOCAL.copyright),LOCAL.nocopy)return void e.preventDefault();const t=await $dom.asyncify("#copyright");if(window.getSelection().toString().length>30&&t){e.preventDefault();const n="# "+t.child(".author").innerText,a="# "+t.child(".link").innerText,i="# "+t.child(".license").innerText,o=n+"<br>"+a+"<br>"+i+"<br><br>"+window.getSelection().toString().replace(/\r\n/g,"<br>"),s=n+"\n"+a+"\n"+i+"\n\n"+window.getSelection().toString().replace(/\r\n/g,"\n");if(e.clipboardData)e.clipboardData.setData("text/html",o),e.clipboardData.setData("text/plain",s);else if(window.clipboardData)return window.clipboardData.setData("text",s)}},$dom.each("li ruby",(function(e){let t=e.parentNode;"LI"!==e.parentNode.tagName&&(t=e.parentNode.parentNode),t.addClass("ruby")})),$dom.each("ol[start]",(function(e){e.style.counterReset="counter "+parseInt(e.attr("start")-1)})),$dom.each(".md table",(function(e){e.wrapObject({className:"table-container"})})),$dom.each(".highlight > .table-container",(function(e){e.className="code-container"})),$dom.each("figure.highlight",(function(e){const t=e.child(".code-container"),n=e.child("figcaption");e.insertAdjacentHTML("beforeend",'<div class="operation"><span class="breakline-btn"><i class="ic i-align-left"></i></span><span class="copy-btn"><i class="ic i-clipboard"></i></span><span class="fullscreen-btn"><i class="ic i-expand"></i></span></div>');const a=e.child(".copy-btn");LOCAL.nocopy?a.remove():(a.addEventListener("click",(function(e){const n=e.currentTarget;let a="",i="";t.find("pre").forEach((function(e){i+=a+e.innerText,a="\n"})),clipBoard(i,(function(e){n.child(".ic").className=e?"ic i-check":"ic i-times",n.blur(),showtip(LOCAL.copyright)}))}),{passive:!0}),a.addEventListener("mouseleave",(function(e){setTimeout((function(){e.target.child(".ic").className="ic i-clipboard"}),1e3)}))),e.child(".breakline-btn").addEventListener("click",(function(t){const n=t.currentTarget;e.hasClass("breakline")?(e.removeClass("breakline"),n.child(".ic").className="ic i-align-left"):(e.addClass("breakline"),n.child(".ic").className="ic i-align-justify")}));const i=e.child(".fullscreen-btn"),o=function(){e.removeClass("fullscreen"),e.scrollTop=0,BODY.removeClass("fullscreen"),i.child(".ic").className="ic i-expand"},s=function(n){if(n.currentTarget,e.hasClass("fullscreen")){if(o(),t&&t.find("tr").length>15){const e=t.child(".show-btn");t.style.maxHeight="300px",e.removeClass("open")}pageScroll(e)}else if(e.addClass("fullscreen"),BODY.addClass("fullscreen"),i.child(".ic").className="ic i-compress",t&&t.find("tr").length>15){const e=t.child(".show-btn");t.style.maxHeight="",e.addClass("open")}};if(i.addEventListener("click",s),n&&n.addEventListener("click",s),t&&t.find("tr").length>15){t.style.maxHeight="300px",t.insertAdjacentHTML("beforeend",'<div class="show-btn"><i class="ic i-angle-down"></i></div>');const e=t.child(".show-btn"),n=function(){t.style.maxHeight="300px",e.removeClass("open")},a=function(){t.style.maxHeight="",e.addClass("open")};e.addEventListener("click",(function(i){e.hasClass("open")?(o(),n(),pageScroll(t)):a()}))}})),$dom.asyncifyEach("pre.mermaid > svg",(function(e){e.style.maxWidth=""})),$dom.each(".reward button",(function(e){e.addEventListener("click",(function(e){e.preventDefault();const t=$dom("#qr");"inline-flex"===t.display()?transition(t,0):transition(t,1,(function(){t.display("inline-flex")}))}))})),$dom.asyncifyEach(".quiz > ul.options li",(function(e){e.addEventListener("click",(function(t){e.hasClass("correct")?(e.toggleClass("right"),e.parentNode.parentNode.addClass("show")):e.toggleClass("wrong")}))})),$dom.asyncifyEach(".quiz > p",(function(e){e.addEventListener("click",(function(t){e.parentNode.toggleClass("show")}))})),$dom.asyncifyEach(".quiz > p:first-child",(function(e){const t=e.parentNode;let n="choice";(t.hasClass("true")||t.hasClass("false"))&&(n="true_false"),t.hasClass("multi")&&(n="multiple"),t.hasClass("fill")&&(n="gap_fill"),t.hasClass("essay")&&(n="essay"),e.attr("data-type",LOCAL.quiz[n])})),$dom.asyncifyEach(".quiz .mistake",(function(e){e.attr("data-type",LOCAL.quiz.mistake)})),$dom.each("div.tags a",(function(e){e.className=["primary","success","info","warning","danger"][Math.floor(5*Math.random())]})),$dom.asyncifyEach(".md div.player",(function(e){mediaPlayer(e,{type:e.attr("data-type"),mode:"order",btns:[]}).player.load(JSON.parse(e.attr("data-src"))).fetch()})))},tabFormat=function(){let e;$dom.each("div.tab",(function(t,n){if(t.attr("data-ready"))return;const a=t.attr("data-id"),i=t.attr("data-title");let o=$dom("#"+a);o?e=!1:(o=document.createElement("div"),o.className="tabs",o.id=a,o.innerHTML='<div class="show-btn"></div>',o.child(".show-btn").addEventListener("click",(function(e){pageScroll(o)})),t.parentNode.insertBefore(o,t),e=!0);let s=o.child(".nav ul");s||(s=o.createChild("div",{className:"nav",innerHTML:"<ul></ul>"}).child("ul"));const c=s.createChild("li",{innerHTML:i});e&&(c.addClass("active"),t.addClass("active")),c.addEventListener("click",(function(e){const n=e.currentTarget;o.find(".active").forEach((function(e){e.removeClass("active")})),t.addClass("active"),n.addClass("active")})),o.appendChild(t),t.attr("data-ready",!0)}))},loadComments=function(){const e=$dom("#comments");e?(goToComment.display(""),window.IntersectionObserver?new IntersectionObserver((function(e,t){const n=e[0];vendorCss("valine"),(n.isIntersecting||n.intersectionRatio>0)&&(transition($dom("#comments"),"bounceUpIn"),t.disconnect())})).observe(e):vendorCss("valine")):goToComment.display("none")},algoliaSearch=function(e){if(null===CONFIG.search)return;siteSearch||(siteSearch=BODY.createChild("div",{id:"search",innerHTML:'<div class="inner"><div class="header"><span class="icon"><i class="ic i-search"></i></span><div class="search-input-container"></div><span class="close-btn"><i class="ic i-times-circle"></i></span></div><div class="results"><div class="inner"><div id="search-stats"></div><div id="search-hits"></div><div id="search-pagination"></div></div></div></div>'}));const t=instantsearch({indexName:CONFIG.search.indexName,searchClient:algoliasearch(CONFIG.search.appID,CONFIG.search.apiKey),searchFunction:function(e){$dom(".search-input").value&&e.search()}});t.on("render",(function(){e.refresh($dom("#search-hits"))})),t.addWidgets([instantsearch.widgets.configure({hitsPerPage:CONFIG.search.hits.per_page||10}),instantsearch.widgets.searchBox({container:".search-input-container",placeholder:LOCAL.search.placeholder,showReset:!1,showSubmit:!1,showLoadingIndicator:!1,cssClasses:{input:"search-input"}}),instantsearch.widgets.stats({container:"#search-stats",templates:{text:function(e){return LOCAL.search.stats.replace(/\$\{hits}/,e.nbHits).replace(/\$\{time}/,e.processingTimeMS)+'<span class="algolia-powered"></span><hr>'}}}),instantsearch.widgets.hits({container:"#search-hits",templates:{item:function(e){const t=e.categories?"<span>"+e.categories.join('<i class="ic i-angle-right"></i>')+"</span>":"";return'<a href="'+CONFIG.root+e.path+'">'+t+e._highlightResult.title.value+"</a>"},empty:function(e){return'<div id="hits-empty">'+LOCAL.search.empty.replace(/\$\{query}/,e.query)+"</div>"}},cssClasses:{item:"item"}}),instantsearch.widgets.pagination({container:"#search-pagination",scrollTo:!1,showFirst:!1,showLast:!1,templates:{first:'<i class="ic i-angle-double-left"></i>',last:'<i class="ic i-angle-double-right"></i>',previous:'<i class="ic i-angle-left"></i>',next:'<i class="ic i-angle-right"></i>'},cssClasses:{root:"pagination",item:"pagination-item",link:"page-number",selectedItem:"current",disabledItem:"disabled-item"}})]),t.start(),$dom.each(".search",(function(e){e.addEventListener("click",(function(){document.body.style.overflow="hidden",transition(siteSearch,"shrinkIn",(function(){$dom(".search-input").focus()}))}))}));const n=function(){document.body.style.overflow="",transition(siteSearch,0)};siteSearch.addEventListener("click",(function(e){e.target===siteSearch&&n()})),$dom(".close-btn").addEventListener("click",n),window.addEventListener("pjax:success",n),window.addEventListener("keyup",(function(e){"Escape"===e.key&&n()}))},domInit=function(){$dom.each(".overview .menu > .item",(function(e){siteNav.child(".menu").appendChild(e.cloneNode(!0))})),loadCat.addEventListener("click",Loader.vanish),menuToggle.addEventListener("click",sideBarToggleHandle),$dom(".dimmer").addEventListener("click",sideBarToggleHandle),quickBtn.child(".down").addEventListener("click",goToBottomHandle),quickBtn.child(".up").addEventListener("click",backToTopHandle),toolBtn||(toolBtn=siteHeader.createChild("div",{id:"tool",innerHTML:'<div class="item player"></div><div class="item contents"><i class="ic i-list-ol"></i></div><div class="item chat"><i class="ic i-comments"></i></div><div class="item back-to-top"><i class="ic i-arrow-up"></i><span>0%</span></div>'})),toolPlayer=toolBtn.child(".player"),backToTop=toolBtn.child(".back-to-top"),goToComment=toolBtn.child(".chat"),showContents=toolBtn.child(".contents"),backToTop.addEventListener("click",backToTopHandle),goToComment.addEventListener("click",goToCommentHandle),showContents.addEventListener("click",sideBarToggleHandle),"undefined"!=typeof mediaPlayer&&(mediaPlayer(toolPlayer),$dom("main").addEventListener("click",(function(){toolPlayer.player.mini()})))},pjaxReload=function(){pagePosition(),sideBar.hasClass("on")&&transition(sideBar,(function(){sideBar.removeClass("on"),menuToggle.removeClass("close")}));let e=$dom("#main");e.innerHTML="",e.appendChild(loadCat.lastChild.cloneNode(!0)),pageScroll(0)},siteRefresh=function(e){var t;LOCAL_HASH=0,LOCAL_URL=window.location.href,vendorCss("katex"),vendorJs("copy_tex"),vendorCss("mermaid"),vendorJs("chart"),1!==e&&$dom.each("script[data-pjax]",pjaxScript),originTitle=document.title,resizeHandle(),menuActive(),sideBarTab(),sidebarTOC(),$dom.each("span.exturl",(function(e){const t=document.createElement("a");t.href=decodeURIComponent(atob(e.dataset.url).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join("")),t.rel="noopener external nofollow noreferrer",t.target="_blank",t.className=e.className,t.title=e.title||e.innerText,t.innerHTML=e.innerHTML,e.dataset.backgroundImage&&(t.dataset.backgroundImage=e.dataset.backgroundImage),e.parentNode.replaceChild(t,e)})),loadComments(),$dom(".md")&&($dom((t=".post.block")+" .md img")&&(vendorCss("fancybox"),vendorJs("fancybox",(function(){const e=jQuery.noConflict();$dom.each(t+" p.gallery",(function(e){const t=document.createElement("div");t.className="gallery",t.attr("data-height",e.attr("data-height")||220),t.innerHTML=e.innerHTML.replace(/<br>/g,""),e.parentNode.insertBefore(t,e),e.remove()})),$dom.each(t+" .md img:not(.emoji):not(.vemoji)",(function(t){const n=e(t),a=n.attr("data-src")||n.attr("src"),i=n.wrap('<a class="fancybox" href="'+a+'" itemscope itemtype="https://schema.org/ImageObject" itemprop="url"></a>').parent("a");let o,s="image-info";if(n.is("a img")||(n.data("safe-src",a),n.is(".gallery img")?s="jg-caption":i.attr("data-fancybox","default").attr("rel","default")),o=t.attr("title")){i.attr("data-caption",o);const e=document.createElement("span"),n=document.createTextNode(o);e.appendChild(n),e.addClass(s),t.insertAfter(e)}})),$dom.each(t+" div.gallery",(function(t,n){e(t).justifiedGallery({rowHeight:e(t).data("height")||120,rel:"gallery-"+n}).on("jg.complete",(function(){e(this).find("a").each(((e,t)=>{t.attr("data-fancybox","gallery-"+n)}))}))})),e.fancybox.defaults.hash=!1,e(t+" .fancybox").fancybox({loop:!0,helpers:{overlay:{locked:!1}}})}),window.jQuery)),$dom(".post.block").oncopy=async function(e){if(showtip(LOCAL.copyright),LOCAL.nocopy)return void e.preventDefault();const t=await $dom.asyncify("#copyright");if(window.getSelection().toString().length>30&&t){e.preventDefault();const n="# "+t.child(".author").innerText,a="# "+t.child(".link").innerText,i="# "+t.child(".license").innerText,o=n+"<br>"+a+"<br>"+i+"<br><br>"+window.getSelection().toString().replace(/\r\n/g,"<br>"),s=n+"\n"+a+"\n"+i+"\n\n"+window.getSelection().toString().replace(/\r\n/g,"\n");if(e.clipboardData)e.clipboardData.setData("text/html",o),e.clipboardData.setData("text/plain",s);else if(window.clipboardData)return window.clipboardData.setData("text",s)}},$dom.each("li ruby",(function(e){let t=e.parentNode;"LI"!==e.parentNode.tagName&&(t=e.parentNode.parentNode),t.addClass("ruby")})),$dom.each("ol[start]",(function(e){e.style.counterReset="counter "+parseInt(e.attr("start")-1)})),$dom.each(".md table",(function(e){e.wrapObject({className:"table-container"})})),$dom.each(".highlight > .table-container",(function(e){e.className="code-container"})),$dom.each("figure.highlight",(function(e){const t=e.child(".code-container"),n=e.child("figcaption");e.insertAdjacentHTML("beforeend",'<div class="operation"><span class="breakline-btn"><i class="ic i-align-left"></i></span><span class="copy-btn"><i class="ic i-clipboard"></i></span><span class="fullscreen-btn"><i class="ic i-expand"></i></span></div>');const a=e.child(".copy-btn");LOCAL.nocopy?a.remove():(a.addEventListener("click",(function(e){const n=e.currentTarget;let a="",i="";t.find("pre").forEach((function(e){i+=a+e.innerText,a="\n"})),clipBoard(i,(function(e){n.child(".ic").className=e?"ic i-check":"ic i-times",n.blur(),showtip(LOCAL.copyright)}))}),{passive:!0}),a.addEventListener("mouseleave",(function(e){setTimeout((function(){e.target.child(".ic").className="ic i-clipboard"}),1e3)}))),e.child(".breakline-btn").addEventListener("click",(function(t){const n=t.currentTarget;e.hasClass("breakline")?(e.removeClass("breakline"),n.child(".ic").className="ic i-align-left"):(e.addClass("breakline"),n.child(".ic").className="ic i-align-justify")}));const i=e.child(".fullscreen-btn"),o=function(){e.removeClass("fullscreen"),e.scrollTop=0,BODY.removeClass("fullscreen"),i.child(".ic").className="ic i-expand"},s=function(n){if(n.currentTarget,e.hasClass("fullscreen")){if(o(),t&&t.find("tr").length>15){const e=t.child(".show-btn");t.style.maxHeight="300px",e.removeClass("open")}pageScroll(e)}else if(e.addClass("fullscreen"),BODY.addClass("fullscreen"),i.child(".ic").className="ic i-compress",t&&t.find("tr").length>15){const e=t.child(".show-btn");t.style.maxHeight="",e.addClass("open")}};if(i.addEventListener("click",s),n&&n.addEventListener("click",s),t&&t.find("tr").length>15){t.style.maxHeight="300px",t.insertAdjacentHTML("beforeend",'<div class="show-btn"><i class="ic i-angle-down"></i></div>');const e=t.child(".show-btn"),n=function(){t.style.maxHeight="300px",e.removeClass("open")},a=function(){t.style.maxHeight="",e.addClass("open")};e.addEventListener("click",(function(i){e.hasClass("open")?(o(),n(),pageScroll(t)):a()}))}})),$dom.asyncifyEach("pre.mermaid > svg",(function(e){e.style.maxWidth=""})),$dom.each(".reward button",(function(e){e.addEventListener("click",(function(e){e.preventDefault();const t=$dom("#qr");"inline-flex"===t.display()?transition(t,0):transition(t,1,(function(){t.display("inline-flex")}))}))})),$dom.asyncifyEach(".quiz > ul.options li",(function(e){e.addEventListener("click",(function(t){e.hasClass("correct")?(e.toggleClass("right"),e.parentNode.parentNode.addClass("show")):e.toggleClass("wrong")}))})),$dom.asyncifyEach(".quiz > p",(function(e){e.addEventListener("click",(function(t){e.parentNode.toggleClass("show")}))})),$dom.asyncifyEach(".quiz > p:first-child",(function(e){const t=e.parentNode;let n="choice";(t.hasClass("true")||t.hasClass("false"))&&(n="true_false"),t.hasClass("multi")&&(n="multiple"),t.hasClass("fill")&&(n="gap_fill"),t.hasClass("essay")&&(n="essay"),e.attr("data-type",LOCAL.quiz[n])})),$dom.asyncifyEach(".quiz .mistake",(function(e){e.attr("data-type",LOCAL.quiz.mistake)})),$dom.each("div.tags a",(function(e){e.className=["primary","success","info","warning","danger"][Math.floor(5*Math.random())]})),$dom.asyncifyEach(".md div.player",(function(e){mediaPlayer(e,{type:e.attr("data-type"),mode:"order",btns:[]}).player.load(JSON.parse(e.attr("data-src"))).fetch()}))),tabFormat(),"undefined"!=typeof mediaPlayer&&toolPlayer.player.load(LOCAL.audio||CONFIG.audio||{}),Loader.hide(),setTimeout((function(){positionInit()}),500),cardActive(),lazyload.observe(),isOutime()},siteInit=function(){$dom.each(".overview .menu > .item",(function(e){siteNav.child(".menu").appendChild(e.cloneNode(!0))})),loadCat.addEventListener("click",Loader.vanish),menuToggle.addEventListener("click",sideBarToggleHandle),$dom(".dimmer").addEventListener("click",sideBarToggleHandle),quickBtn.child(".down").addEventListener("click",goToBottomHandle),quickBtn.child(".up").addEventListener("click",backToTopHandle),toolBtn||(toolBtn=siteHeader.createChild("div",{id:"tool",innerHTML:'<div class="item player"></div><div class="item contents"><i class="ic i-list-ol"></i></div><div class="item chat"><i class="ic i-comments"></i></div><div class="item back-to-top"><i class="ic i-arrow-up"></i><span>0%</span></div>'})),toolPlayer=toolBtn.child(".player"),backToTop=toolBtn.child(".back-to-top"),goToComment=toolBtn.child(".chat"),showContents=toolBtn.child(".contents"),backToTop.addEventListener("click",backToTopHandle),goToComment.addEventListener("click",goToCommentHandle),showContents.addEventListener("click",sideBarToggleHandle),"undefined"!=typeof mediaPlayer&&(mediaPlayer(toolPlayer),$dom("main").addEventListener("click",(function(){toolPlayer.player.mini()}))),pjax=new Pjax({selectors:["head title",".languages",".twikoo",".pjax",".leancloud-recent-comment","script[data-config]"],analytics:!1,cacheBust:!1}),CONFIG.quicklink.ignores=LOCAL.ignores,quicklink.listen(CONFIG.quicklink),CONFIG.auto_dark.enable&&((new Date).getHours()>=CONFIG.auto_dark.start||(new Date).getHours()<=CONFIG.auto_dark.end?changeTheme("dark"):changeTheme()),CONFIG.disableVL||visibilityListener(),themeColorListener(),algoliaSearch(pjax),window.addEventListener("scroll",scrollHandle),window.addEventListener("resize",resizeHandle),window.addEventListener("pjax:send",pjaxReload),window.addEventListener("pjax:success",siteRefresh),window.addEventListener("beforeunload",(function(){pagePosition()})),siteRefresh(1)};window.addEventListener("DOMContentLoaded",siteInit,{passive:!0}),console.log("%c Theme.ShokaX v"+CONFIG.version+" %c https://github.com/zkz098/hexo-theme-shokaX ","color: white; background: #e9546b; padding:5px 0;","padding:4px;border:1px solid #e9546b;"),console.log("%c by kaitaku %c https://www.kaitaku.xyz","color: white; background: #00bfff; padding: 5px 3px;","padding: 4px;border:1px solid #00bfff"),Vue.createApp({data:()=>({}),methods:{changeThemeByBtn(){let e;const t=$dom(".theme").child(".ic"),n=BODY.createChild("div",{id:"neko",innerHTML:'<div class="planet"><div class="sun"></div><div class="moon"></div></div><div class="body"><div class="face"><section class="eyes left"><span class="pupil"></span></section><section class="eyes right"><span class="pupil"></span></section><span class="nose"></span></div></div>'}),a=function(){transition(n,{delay:2500,opacity:0},(function(){BODY.removeChild(n)}))};t.hasClass("i-sun")?e=function(){n.addClass("dark"),changeTheme("dark"),$storage.set("theme","dark"),a()}:(n.addClass("dark"),e=function(){n.removeClass("dark"),changeTheme(),$storage.set("theme","light"),a()}),transition(n,1,(function(){setTimeout(e,210)}))}}}).mount("#rightNav");const canvasEl=document.createElement("canvas");canvasEl.style.cssText="position:fixed;top:0;left:0;pointer-events:none;z-index:9999999",document.body.appendChild(canvasEl);const ctx=canvasEl.getContext("2d"),numberOfParticules=30;let pointerX=0,pointerY=0;const tap="click",colors=CONFIG.fireworks;function setCanvasSize(){canvasEl.width=2*window.innerWidth,canvasEl.height=2*window.innerHeight,canvasEl.style.width=window.innerWidth+"px",canvasEl.style.height=window.innerHeight+"px",canvasEl.getContext("2d").scale(2,2)}function updateCoords(e){pointerX=e.clientX||e.touches&&e.touches[0].clientX,pointerY=e.clientY||e.touches&&e.touches[0].clientY}function setParticuleDirection(e){const t=anime.random(0,360)*Math.PI/180,n=anime.random(50,180),a=[-1,1][anime.random(0,1)]*n;return{x:e.x+a*Math.cos(t),y:e.y+a*Math.sin(t)}}function createParticule(e,t){const n={x:void 0,y:void 0,color:void 0,radius:void 0,endPos:void 0,draw:void 0};return n.x=e,n.y=t,n.color=colors[anime.random(0,colors.length-1)],n.radius=anime.random(16,32),n.endPos=setParticuleDirection(n),n.draw=function(){ctx.beginPath(),ctx.arc(n.x,n.y,n.radius,0,2*Math.PI,!0),ctx.fillStyle=n.color,ctx.fill()},n}function createCircle(e,t){const n={x:void 0,y:void 0,color:void 0,radius:void 0,endPos:void 0,alpha:void 0,lineWidth:void 0,draw:void 0};return n.x=e,n.y=t,n.color="#FFF",n.radius=.1,n.alpha=.5,n.lineWidth=6,n.draw=function(){ctx.globalAlpha=n.alpha,ctx.beginPath(),ctx.arc(n.x,n.y,n.radius,0,2*Math.PI,!0),ctx.lineWidth=n.lineWidth,ctx.strokeStyle=n.color,ctx.stroke(),ctx.globalAlpha=1},n}function renderParticule(e){for(let t=0;t<e.animatables.length;t++)e.animatables[t].target.draw()}function animateParticules(e,t){const n=createCircle(e,t),a=[];for(let n=0;n<30;n++)a.push(createParticule(e,t));anime.timeline().add({targets:a,x:function(e){return e.endPos.x},y:function(e){return e.endPos.y},radius:.1,duration:anime.random(1200,1800),easing:"easeOutExpo",update:renderParticule}).add({targets:n,radius:anime.random(80,160),lineWidth:0,alpha:{value:0,easing:"linear",duration:anime.random(600,800)},duration:anime.random(1200,1800),easing:"easeOutExpo",update:renderParticule},0)}const render=anime({duration:1/0,update:function(){ctx.clearRect(0,0,canvasEl.width,canvasEl.height)}});document.addEventListener(tap,(function(e){render.play(),updateCoords(e),animateParticules(pointerX,pointerY)}),!1),setCanvasSize(),window.addEventListener("resize",setCanvasSize,!1);const sideBarToggleHandle=function(e,t){sideBar.hasClass("on")?(sideBar.removeClass("on"),menuToggle.removeClass("close"),t?sideBar.style="":transition(sideBar,"slideRightOut")):t?sideBar.style="":transition(sideBar,"slideRightIn",(function(){sideBar.addClass("on"),menuToggle.addClass("close")}))},sideBarTab=function(){const e=sideBar.child(".inner");sideBar.find(".panel"),sideBar.child(".tab")&&e.removeChild(sideBar.child(".tab"));const t=document.createElement("ul");let n="active";t.className="tab",["contents","related","overview"].forEach((function(e){const a=sideBar.child(".panel."+e);if(a.innerHTML.replace(/(^\s*)|(\s*$)/g,"").length<1)return void("contents"===e&&showContents.display("none"));"contents"===e&&showContents.display("");const i=document.createElement("li"),o=document.createElement("span"),s=document.createTextNode(a.attr("data-title"));o.appendChild(s),i.appendChild(o),i.addClass(e+" item"),n?(a.addClass(n),i.addClass(n)):a.removeClass("active"),i.addEventListener("click",(function(e){const t=e.currentTarget;t.hasClass("active")||(sideBar.find(".tab .item").forEach((function(e){e.removeClass("active")})),sideBar.find(".panel").forEach((function(e){e.removeClass("active")})),sideBar.child(".panel."+t.className.replace(" item","")).addClass("active"),t.addClass("active"))})),t.appendChild(i),n=""})),t.childNodes.length>1?(e.insertBefore(t,e.childNodes[0]),sideBar.child(".panels").style.paddingTop=""):sideBar.child(".panels").style.paddingTop=".625rem"},sidebarTOC=function(){const e=function(e,a){const o=t[e];if(!o)return;if(o.hasClass("current"))return;$dom.each(".toc .active",(function(e){e&&e.removeClass("active current")})),n.forEach((function(e){e&&e.removeClass("active")})),o.addClass("active current"),n[e]&&n[e].addClass("active");let s=o.parentNode;for(;!s.matches(".contents");){if(s.matches("li")){s.addClass("active");const e=$dom(s.child("a.toc-link").attr("href"));e&&e.addClass("active")}s=s.parentNode}"none"!==getComputedStyle(sideBar).display&&i.hasClass("active")&&pageScroll(i,o.offsetTop-i.offsetHeight/4)},t=$dom.all(".contents li");if(t.length<1)return;let n=Array.prototype.slice.call(t)||[],a=null;n=n.map((function(t,n){const i=t.child("a.toc-link"),o=$dom(decodeURI(i.attr("href")));if(!o)return;const s=o.child("a.anchor"),c=function(t){t.preventDefault();const i=$dom(decodeURI(t.currentTarget.attr("href")));a=n,pageScroll(i,null,(function(){e(n),a=null}))};return i.addEventListener("click",c),s&&s.addEventListener("click",(function(e){c(e),clipBoard(CONFIG.hostname+"/"+LOCAL.path+e.currentTarget.attr("href"))})),o}));const i=sideBar.child(".contents.panel");!function(){if(!window.IntersectionObserver)return;const t=new IntersectionObserver((function(t,i){const o=function(e){let t=0,a=e[t];if(a.boundingClientRect.top>0)return t=n.indexOf(a.target),0===t?0:t-1;for(;t<e.length;t++){if(!(e[t].boundingClientRect.top<=0))return n.indexOf(a.target);a=e[t]}return n.indexOf(a.target)}(t)+(diffY<0?1:0);null===a&&e(o)}),{rootMargin:"0px 0px -100% 0px",threshold:0});n.forEach((function(e){e&&t.observe(e)}))}()},backToTopHandle=function(){pageScroll(0)},goToBottomHandle=function(){pageScroll(parseInt(String(Container.changeOrGetHeight())))},goToCommentHandle=function(){pageScroll($dom("#comments"))},menuActive=function(){$dom.each(".menu .item:not(.title)",(function(e){const t=e.child("a[href]"),n=e.parentNode.parentNode;if(!t)return;const a=t.pathname===location.pathname||t.pathname===location.pathname.replace("index.html",""),i=!CONFIG.root.startsWith(t.pathname)&&location.pathname.startsWith(t.pathname),o=t.hostname===location.hostname&&(a||i);e.toggleClass("active",o),e.parentNode.child(".active")&&n.hasClass("dropdown")?n.removeClass("active").addClass("expand"):n.removeClass("expand")}))};