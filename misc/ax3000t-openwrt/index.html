<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta http-equiv="X-UA-COMPATIBLE" content="IE=edge,chrome=1"><meta name="renderer" content="webkit"><link rel="icon" type="image/ico" sizes="32x32" href="/assets/favicon.ico"><link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon.png"><meta name="msvalidate.01" content="5734c8017d654945bef5830f3849397b"><meta name="yandex-verification" content="06391432e7c086ec"><meta name="baidu-site-verification" content="0VfwXuDyx5cjfm5q"><link rel="alternate" href="/rss.xml" title="我的学习笔记 - 望月阁" type="application/rss+xml"><link rel="alternate" href="/atom.xml" title="我的学习笔记 - 望月阁" type="application/atom+xml"><link rel="alternate" type="application/json" title="我的学习笔记 - 望月阁" href="https://www.kaitaku.xyz/feed.json"><link rel="preconnect" href="https://s4.zstatic.net"><link rel="preconnect" href="https://at.alicdn.com"><link rel="preconnect" href="https://cdn.kaitaku.xyz"><link rel="stylesheet" href="/css/app.css?v=0.4.14"><link rel="modulepreload" href="/js/chunk-5WGAOLFO.js"><link rel="modulepreload" href="/js/chunk-GZHCIZSD.js"><link rel="modulepreload" href="/js/chunk-KQHNYTDK.js"><link rel="modulepreload" href="/js/chunk-TRF3CLCD.js"><link rel="modulepreload" href="/js/copy-tex-2JUMRTOO.js"><link rel="modulepreload" href="/js/index.esm-WOJQQK4F.js"><link rel="modulepreload" href="/js/post-XCFL4MMY.js"><link rel="modulepreload" href="/js/quicklink-E6S37LJX.js"><link rel="modulepreload" href="/js/search-5AEG55UC.js"><link rel="modulepreload" href="/js/siteInit.js"><script data-pjax="data-pjax" async="async">if ('serviceWorker' in navigator) {
   navigator.serviceWorker.register("/sw.js?time=1728830848555").then(async (reg) => {
           if (window.localStorage.getItem('install') !== 'true') {
               window.localStorage.setItem('install', 'true');
               setTimeout(() => {
                   window.location.reload()
               }, 500)
           }
       }).catch(err => {
       console.log(err)
   });
   }</script><link rel="manifest" href="/manifest.json"><link rel="preload" href="https://cdn.kaitaku.xyz/cover.webp" as="image" fetchpriority="high"><meta name="keywords" content="路由器,"><meta name="description" content="一个萌新的学习笔记，商务合作请邮箱联系"><link rel="canonical" href="https://www.kaitaku.xyz/misc/ax3000t-openwrt/"><meta name="description" content="# 小米 AX3000T openwrt 刷机 —— 从入坑到刷回原厂 # 前言 作者于前端时间购入一台 AX3000T 作为 Mesh 网络节点，后续发现由于没有弱信号剔除导致设备连到 AX3000T 之后就回不到主节点了  所以想刷入 openwrt 来解决这个问题（最后也没解决） 本文需要硬件设施：  AX3000T 路由器 一个有以太网口的电脑 一根网线 一个卡针 (或者牙签)  软件设施">
<meta property="og:type" content="article">
<meta property="og:title" content="小米AX3000T openwrt刷机——从入坑到刷回原厂">
<meta property="og:url" content="https://www.kaitaku.xyz/misc/ax3000t-openwrt/index.html">
<meta property="og:site_name" content="我的学习笔记 - 望月阁">
<meta property="og:description" content="# 小米 AX3000T openwrt 刷机 —— 从入坑到刷回原厂 # 前言 作者于前端时间购入一台 AX3000T 作为 Mesh 网络节点，后续发现由于没有弱信号剔除导致设备连到 AX3000T 之后就回不到主节点了  所以想刷入 openwrt 来解决这个问题（最后也没解决） 本文需要硬件设施：  AX3000T 路由器 一个有以太网口的电脑 一根网线 一个卡针 (或者牙签)  软件设施">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2024-08-10T14:45:29.000Z">
<meta property="article:modified_time" content="2024-08-12T12:27:52.960Z">
<meta property="article:author" content="zkz098">
<meta property="article:tag" content="路由器">
<meta property="article:tag" content="openwrt">
<meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@kaitaku64672214"><title>小米AX3000T openwrt刷机——从入坑到刷回原厂</title><meta name="generator" content="Hexo 7.3.0"></head><body itemscope="" itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope="" itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">小米AX3000T openwrt刷机——从入坑到刷回原厂</h1><div class="meta"><span class="item" title="创建时间：2024-08-10 22:45:29"><span class="icon"><i class="ic i-calendar"></i></span><span class="text">发表于</span><time itemprop="dateCreated datePublished" datetime="2024-08-10T22:45:29+08:00">2024-08-10</time></span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i></span><span class="text">本文字数</span><span>4.6k</span><span class="text">字</span></span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i></span><span class="text">阅读时长</span><span>4 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span><span class="line"></span><span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">zkz098's blog</a></li></ul><ul class="right" id="rightNav"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div class="pjax" id="imgs"><img src="https://cdn.kaitaku.xyz/cover.webp" loading="eager" decoding="async" fetchpriority="high" alt="我的学习笔记 - 望月阁"></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"></path></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"></use><use xlink:href="#gentle-wave" x="48" y="3"></use><use xlink:href="#gentle-wave" x="48" y="5"></use><use xlink:href="#gentle-wave" x="48" y="7"></use></g></svg></div><main><div class="inner"><div class="pjax" id="main"><div class="article wrap"><div class="breadcrumb" itemlistelement="" itemscope="" itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i><span><a href="/">首页</a></span><i class="ic i-angle-right"></i><span class="current" itemprop="itemListElement" itemscope="itemscope" itemtype="https://schema.org/ListItem"><a href="/categories/misc/" itemprop="item" rel="index" title="分类于杂项"><span itemprop="name">杂项<meta itemprop="position" content="0"></span></a></span></div><article class="post block" itemscope="itemscope" itemtype="http://schema.org/Article" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.kaitaku.xyz/misc/ax3000t-openwrt/"><span hidden="hidden" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="image" content="/assets/avatar.webp"><meta itemprop="name" content="zkz098"><meta itemprop="description" content="kaitaku, 一个萌新的学习笔记，商务合作请邮箱联系"></span><span hidden="hidden" itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="我的学习笔记 - 望月阁"></span><div class="body md" itemprop="articleBody"><h1 id="小米ax3000t-openwrt刷机从入坑到刷回原厂"><a class="anchor" href="#小米ax3000t-openwrt刷机从入坑到刷回原厂">#</a> 小米 AX3000T openwrt 刷机 —— 从入坑到刷回原厂</h1>
<h2 id="前言"><a class="anchor" href="#前言">#</a> 前言</h2>
<p>作者于前端时间购入一台 AX3000T 作为 Mesh 网络节点，后续发现由于没有弱信号剔除导致设备连到 AX3000T 之后就回不到主节点了 <br>
所以想刷入 openwrt 来解决这个问题（最后也没解决）</p>
<p>本文需要硬件设施：</p>
<ul>
<li>AX3000T 路由器</li>
<li>一个有以太网口的电脑</li>
<li>一根网线</li>
<li>一个卡针 (或者牙签)</li>
</ul>
<p>软件设施放在下面的蓝奏盘里了，有需要可以自行取用：<br>
<a target="_blank" rel="noopener" href="https://kaitaku.lanzouv.com/b002u7i8vi">蓝奏盘链接 提取码 c8a1</a></p>
<h2 id="启用-ssh"><a class="anchor" href="#启用-ssh">#</a> 启用 SSH</h2>
<h3 id="降级固件非必需"><a class="anchor" href="#降级固件非必需">#</a> 降级固件 (非必需)</h3>
<p>如果你的 AX3000T 手动升级了固件到 1.0.47 以上 (不含)，此时需要降级到 1.0.47 这个脆弱的版本来启用 SSH <br>
openwrt 文档中说可以手动上传固件后改 URL，但作者测试无法降级，会提示找不到固件或不完整，因此只能使用小米官方的救砖工具降级</p>
<p>1.0.47 固件链接：<a target="_blank" rel="noopener" href="https://cdn.cnbj1.fds.api.mi-img.com/xiaoqiang/rom/rd03/miwifi_rd03_firmware_ef0ee_1.0.47.bin">小米官方 CDN</a><br>
 工具见上方网盘</p>
<p>打开工具后用网线连接路由器和电脑 (理论上路由器任意一个网口即可)，然后启动工具，选择下载的 ROM，点击下一步</p>
<div class="note info">
<p>工具此时会让你选择网卡，如果你安装了 VMWare / Hyper-V 可能存在很多个虚拟网卡，注意选择物理网卡 (一般名称为以太网)</p>
</div>
<p>点击下一步，此时给路由器断电，用卡针按住 RESET 键，按住后插电，继续按住，等到路由器橙灯快速闪烁为止，此时工具会自动刷入 ROM，等待路由器变为蓝灯快速闪烁 10 秒后断电重启</p>
<h3 id="启用-ssh-2"><a class="anchor" href="#启用-ssh-2">#</a> 启用 SSH</h3>
<div class="note info">
<p>注意：下面的代码需要用 cmd 而不是 powershell 运行，运行时出现 curl 参数错误则代表你使用的是 powershell <br>
本文不处理没有 curl 的情况，请自行必应解决</p>
</div>
<p>登录到小米路由器后台，此时的 URL 应该类似于这样：</p>
<figure class="highlight raw"><figcaption data-lang=""></figcaption><table><tbody><tr><td data-num="1"></td><td><pre>http://192.168.31.1/cgi-bin/luci/;stok=123456789qwertyuiop/web/home#router</pre></td></tr></tbody></table></figure><p>将 stok 后面的部分 ( <code>123456789qwertyuiop</code>  这一块) 复制下来，后续使用 <code>&lt;stok&gt;</code>  代替这段文本<br>
在 cmd 内执行如下命令：</p>
<figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token function">curl</span> <span class="token parameter variable">-X</span> POST http://192.168.31.1/cgi-bin/luci/<span class="token punctuation">;</span><span class="token assign-left variable">stok</span><span class="token operator">=</span><span class="token operator">&lt;</span>stok<span class="token operator">&gt;</span>/api/misystem/arn_switch <span class="token parameter variable">-d</span> <span class="token string">"open=1&amp;model=1&amp;level=%0Anvram%20set%20ssh_en%3D1%0A"</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">curl</span> <span class="token parameter variable">-X</span> POST http://192.168.31.1/cgi-bin/luci/<span class="token punctuation">;</span><span class="token assign-left variable">stok</span><span class="token operator">=</span><span class="token operator">&lt;</span>stok<span class="token operator">&gt;</span>/api/misystem/arn_switch <span class="token parameter variable">-d</span> <span class="token string">"open=1&amp;model=1&amp;level=%0Anvram%20commit%0A"</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token function">curl</span> <span class="token parameter variable">-X</span> POST http://192.168.31.1/cgi-bin/luci/<span class="token punctuation">;</span><span class="token assign-left variable">stok</span><span class="token operator">=</span><span class="token operator">&lt;</span>stok<span class="token operator">&gt;</span>/api/misystem/arn_switch <span class="token parameter variable">-d</span> <span class="token string">"open=1&amp;model=1&amp;level=%0Ased%20-i%20's%2Fchannel%3D.*%2Fchannel%3D%22debug%22%2Fg'%20%2Fetc%2Finit.d%2Fdropbear%0A"</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token function">curl</span> <span class="token parameter variable">-X</span> POST http://192.168.31.1/cgi-bin/luci/<span class="token punctuation">;</span><span class="token assign-left variable">stok</span><span class="token operator">=</span><span class="token operator">&lt;</span>stok<span class="token operator">&gt;</span>/api/misystem/arn_switch <span class="token parameter variable">-d</span> <span class="token string">"open=1&amp;model=1&amp;level=%0A%2Fetc%2Finit.d%2Fdropbear%20start%0A"</span></pre></td></tr></tbody></table></figure><p>每行执行完后都会输出 <code>{code：0}</code> ，四条均输出此内容则 SSH 开启成功，此时可以使用 SSH 终端登入，为便于后续文件操作，此处使用 MobaXterm (可从前文网盘下载) 进行登入</p>
<h3 id="获取-ssh-密码"><a class="anchor" href="#获取-ssh-密码">#</a> 获取 SSH 密码</h3>
<p>登入小米路由器主页后，右下角会有一个 <code>SN</code> ，将下方黑体字内容全部复制后输入<a target="_blank" rel="noopener" href="https://miwifi.dev/ssh"> miwifi.dev</a> 右侧的 SN 中，点击 calc，随后点击 copy 复制密码并保存</p>
<h3 id="登入-ssh"><a class="anchor" href="#登入-ssh">#</a> 登入 SSH</h3>
<p>因终端而异，提示两点：</p>
<ol>
<li>登入用户名为 root</li>
<li>出现一个提示框时选带 ACCEPT 的</li>
</ol>
<h2 id="刷入-u-boot"><a class="anchor" href="#刷入-u-boot">#</a> 刷入 U-Boot</h2>
<p>第一步是刷入 UBoot，便于刷入真正的 openwrt 和防止刷错固件之后被迫售后，同时备份原厂固件便于恢复</p>
<h3 id="备份原厂固件"><a class="anchor" href="#备份原厂固件">#</a> 备份原厂固件</h3>
<p>登入 SSH 后，输入 <code>cat /proc/mtd</code>  确定需要备份的内容，如果为 mtd0-mtd12 可直接使用下文命令，否则请自行参照下文修改：</p>
<div class="note warning">
<p>通常来说，因为路由器的 ROM 通常较小，而备份过程相当于把固件体积 x2，因此 ROM 大概率会爆掉，如果你在备份过程中 SSH 异常中止参照上文重新获取 stok 后激活 SSH 即可 <br>
当然，为了防止上文情况出现和造成严重后果，备份文件通常放在 /tmp 中并且备份完成一个就要下载下来后删除，防止 ROM 空间不足或者不足重启后无法自动修复 <br>
如果你懒得看上面那段文字：下文的每行执行完之后就把对应的 bin 下载下来后删掉，不要用终端的多行命令偷懒</p>
</div>
<figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token function">dd</span> <span class="token assign-left variable">if</span><span class="token operator">=</span>/dev/mtd1 <span class="token assign-left variable">of</span><span class="token operator">=</span>/tmp/BL2.bin</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">dd</span> <span class="token assign-left variable">if</span><span class="token operator">=</span>/dev/mtd2 <span class="token assign-left variable">of</span><span class="token operator">=</span>/tmp/Nvram.bin</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token function">dd</span> <span class="token assign-left variable">if</span><span class="token operator">=</span>/dev/mtd3 <span class="token assign-left variable">of</span><span class="token operator">=</span>/tmp/Bdate.bin</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token function">dd</span> <span class="token assign-left variable">if</span><span class="token operator">=</span>/dev/mtd4 <span class="token assign-left variable">of</span><span class="token operator">=</span>/tmp/Factory.bin</pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token function">dd</span> <span class="token assign-left variable">if</span><span class="token operator">=</span>/dev/mtd5 <span class="token assign-left variable">of</span><span class="token operator">=</span>/tmp/FIP.bin</pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token function">dd</span> <span class="token assign-left variable">if</span><span class="token operator">=</span>/dev/mtd6 <span class="token assign-left variable">of</span><span class="token operator">=</span>/tmp/crash.bin</pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token function">dd</span> <span class="token assign-left variable">if</span><span class="token operator">=</span>/dev/mtd7 <span class="token assign-left variable">of</span><span class="token operator">=</span>/tmp/crash_log.bin</pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token function">dd</span> <span class="token assign-left variable">if</span><span class="token operator">=</span>/dev/mtd8 <span class="token assign-left variable">of</span><span class="token operator">=</span>/tmp/ubi.bin</pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token function">dd</span> <span class="token assign-left variable">if</span><span class="token operator">=</span>/dev/mtd9 <span class="token assign-left variable">of</span><span class="token operator">=</span>/tmp/ubi1.bin</pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token function">dd</span> <span class="token assign-left variable">if</span><span class="token operator">=</span>/dev/mtd10 <span class="token assign-left variable">of</span><span class="token operator">=</span>/tmp/overlay.bin</pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token function">dd</span> <span class="token assign-left variable">if</span><span class="token operator">=</span>/dev/mtd11 <span class="token assign-left variable">of</span><span class="token operator">=</span>/tmp/date.bin</pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token function">dd</span> <span class="token assign-left variable">if</span><span class="token operator">=</span>/dev/mtd12 <span class="token assign-left variable">of</span><span class="token operator">=</span>/tmp/KF.bin</pre></td></tr></tbody></table></figure><p>每条命令执行完成后会输出带有 <code>in</code>  和 <code>out</code>  字样的提示，备份可能会需要一些时间，此过程中不要断开 SSH 和电源</p>
<h3 id="刷入-uboot"><a class="anchor" href="#刷入-uboot">#</a> 刷入 UBoot</h3>
<div class="note danger">
<p>此部分正式进入刷机，在进行下面的任何步骤之前确定你的备份保存完好，他人提供的备份有相当高概率使路由器变砖，务必保存好自己的备份</p>
</div>
<p>本文直接使用网盘内的 SSH 终端说明，其他客户端请自行探索 <br>
点开左侧绿色文件夹，进入 tmp，将 UBoot 固件拖入其中，等待上传完成</p>
<div class="note info">
<p>网上的一些资源仅提供了收费的 UBoot，本文不提供这些 UBoot 的链接。作者自行编译了一份<a target="_blank" rel="noopener" href="https://www.right.com.cn/forum/thread-8312142-1-1.html">开源的 UBoot</a> 放在了前文网盘中，可以直接下载使用。有 Ubuntu 系统或 WSL 环境的可以自行编译。</p>
</div>
<p><code>ls</code>  确定存在后，执行下列命令刷入：</p>
<figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre>mtd <span class="token function">write</span> mt7981_ax3000t-fip-fixed-parts-multi-layout.bin FIP</pre></td></tr></tbody></table></figure><p>等待刷入完成后，此时 UBoot 刷入完成</p>
<h2 id="刷入-openwrt"><a class="anchor" href="#刷入-openwrt">#</a> 刷入 openwrt</h2>
<h3 id="刷入固件"><a class="anchor" href="#刷入固件">#</a> 刷入固件</h3>
<div class="note info">
<p>理论上很难刷出问题，作者前后刷入了 6 次各种固件并失败 2 次仍然能正常进入 UBoot 并刷回原厂。 <br>
当然，上文前提是不故意作，例如刷入 SoC 不正确的固件和刷入不支持 AX3000T 的固件，如果真成砖了可参考后文的刷回原厂，刷写 3 次仍然未修复建议返厂维修</p>
</div>
<p>网盘中有 QWRT 和 immortalwrt 两种固件，作者已测试可刷入，但注意：</p>
<ul>
<li>网盘中的 QWRT 不能使用 WPA3 加密</li>
</ul>
<p>此时使用网线连接到 UBoot (如果你把网线拔了)<br>
 然后先断路由器电，用卡针按住 RESET 约 3 秒后插电，继续按住，等到路由器灯由橙色变蓝色后松开<br>
此时手动配置电脑网卡为手动分配 IP 模式：</p>
<ul>
<li>ip:  <code>192.168.1.2</code></li>
<li>子网掩码:  <code>255.255.255.0</code></li>
<li>网关:  <code>192.168.1.1</code></li>
<li>首选 DNS: 填一个能用的国内 DNS，例如 <code>114.114.114.114</code> ，不建议开启加密</li>
</ul>
<p>点击确定后，浏览器访问 <code>192.168.1.1</code> ，应该进入 UBoot 界面</p>
<div class="note info">
<p>双网卡或无线 + 有线请断开可访问互联网的那个网络，这个网址会和部分家庭网关冲突，可能导致无法访问</p>
</div>
<p>选择固件后 mtd layout 根据固件选择，QWRT 选 QWRT，immortalwrt 选 immortalwrt-w112<br>
 点击 upload 后耐心等待，路由器会变为橙灯，随后橙灯快速闪烁，再变为蓝色灯<br>
此时网卡可调整为 DHCP (自动) 了</p>
<h3 id="如果橙灯慢速闪烁"><a class="anchor" href="#如果橙灯慢速闪烁">#</a> 如果橙灯慢速闪烁</h3>
<p>如果观察到路由器的橙灯慢速闪烁 (约 5 秒一次)，此时请等待半分钟，如果仍然保持此状态，可以按照前文重新进入 UBoot 了。<br>
这个闪烁意味着固件刷入失败，UBoot 会提示 UPDATE FAILED，建议更换固件并选择正确的 mtd layout 后重试</p>
<h3 id="进入-openwrt-后台"><a class="anchor" href="#进入-openwrt-后台">#</a> 进入 openwrt 后台</h3>
<p>不同固件不同，大部分是 <code>192.168.1.1</code> ，自定义固件会有 <code>10.0.0.1</code>  或 <code>192.168.8.1</code>  等，建议查看固件说明<br>
如果和家庭网关冲突，请断开家庭网络，使用网线连接到 openwrt 后修改 LAN IP 来解决此问题</p>
<h2 id="刷回原厂"><a class="anchor" href="#刷回原厂">#</a> 刷回原厂</h2>
<p>网上的一些教程是先 UBoot 刷入 ubi.bin (之前备份的原厂固件) 后再解锁 SSH 恢复 UBoot，但作者实验发现 UBoot 刷入 ubi.bin 大概率会刷入失败，因而采用先恢复 UBoot 后使用小米救砖工具刷入固件的方法</p>
<h3 id="恢复原厂-uboot"><a class="anchor" href="#恢复原厂-uboot">#</a> 恢复原厂 UBoot</h3>
<div class="note info">
<p>接下来的操作中涉及上传文件的，上传后务必使用 <code>ls</code>  确认文件存在再刷入</p>
</div>
<p>找到前文的备份文件中的 <code>FIP.bin</code> ，使用 SSH 工具上传到 /tmp 目录下，随后：</p>
<figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre>mtd <span class="token function">write</span> FIP.bin FIP</pre></td></tr></tbody></table></figure><h3 id="恢复原厂固件"><a class="anchor" href="#恢复原厂固件">#</a> 恢复原厂固件</h3>
<p>等待命令完成 (15-30 秒左右) 后断电重启，此时按照前文的降级方法刷入原厂 1.0.47 固件 (可能需要多次刷入) <br>
如果刷入成功，橙灯会常亮一会，然后橙灯闪烁，此时可以按照正常新路由器的方法，连接到无密码默认 SSID 中进入开始使用了 <br>
此时可以正常升级和使用路由器了</p>
<div class="tags"><a href="/tags/%E8%B7%AF%E7%94%B1%E5%99%A8/" rel="tag"><i class="ic i-tag"></i>路由器</a><a href="/tags/openwrt/" rel="tag"><i class="ic i-tag"></i>openwrt</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i></span><span class="text">更新于</span><time title="修改时间：2024-08-12 20:27:52" itemprop="dateModified" datetime="2024-08-12T20:27:52+08:00">2024-08-12</time></span></div><div id="copyright"><ul><li class="author"><strong>本文作者：</strong>zkz098<i class="ic i-at"><em>@</em></i>我的学习笔记 - 望月阁</li><li class="link"><strong>本文链接：</strong><a href="https://www.kaitaku.xyz/misc/ax3000t-openwrt/" title="小米AX3000T openwrt刷机——从入坑到刷回原厂">https://www.kaitaku.xyz/misc/ax3000t-openwrt/</a></li><li class="license"><strong>版权声明：</strong>本站所有文章除特别声明外，均采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/webbuild/hexo/hexoesm/" rel="prev" itemprop="url" title="论 ESM 和 esbuild 在 hexo 主题中的应用" style="background-image: linear-gradient(to bottom right, #f6fffa, #b1dac6);"><span class="type">上一篇</span><span class="category"><i class="ic i-flag"></i>hexo</span><h3>论 ESM 和 esbuild 在 hexo 主题中的应用</h3></a></div><div class="item right"></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%B0%8F%E7%B1%B3ax3000t-openwrt%E5%88%B7%E6%9C%BA%E4%BB%8E%E5%85%A5%E5%9D%91%E5%88%B0%E5%88%B7%E5%9B%9E%E5%8E%9F%E5%8E%82"><span class="toc-number">1.</span> <span class="toc-text"> 小米 AX3000T openwrt 刷机 —— 从入坑到刷回原厂</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-number">1.1.</span> <span class="toc-text"> 前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%AF%E7%94%A8-ssh"><span class="toc-number">1.2.</span> <span class="toc-text"> 启用 SSH</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%99%8D%E7%BA%A7%E5%9B%BA%E4%BB%B6%E9%9D%9E%E5%BF%85%E9%9C%80"><span class="toc-number">1.2.1.</span> <span class="toc-text"> 降级固件 (非必需)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%AF%E7%94%A8-ssh-2"><span class="toc-number">1.2.2.</span> <span class="toc-text"> 启用 SSH</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96-ssh-%E5%AF%86%E7%A0%81"><span class="toc-number">1.2.3.</span> <span class="toc-text"> 获取 SSH 密码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%99%BB%E5%85%A5-ssh"><span class="toc-number">1.2.4.</span> <span class="toc-text"> 登入 SSH</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%B7%E5%85%A5-u-boot"><span class="toc-number">1.3.</span> <span class="toc-text"> 刷入 U-Boot</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%87%E4%BB%BD%E5%8E%9F%E5%8E%82%E5%9B%BA%E4%BB%B6"><span class="toc-number">1.3.1.</span> <span class="toc-text"> 备份原厂固件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%B7%E5%85%A5-uboot"><span class="toc-number">1.3.2.</span> <span class="toc-text"> 刷入 UBoot</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%B7%E5%85%A5-openwrt"><span class="toc-number">1.4.</span> <span class="toc-text"> 刷入 openwrt</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%B7%E5%85%A5%E5%9B%BA%E4%BB%B6"><span class="toc-number">1.4.1.</span> <span class="toc-text"> 刷入固件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E6%9E%9C%E6%A9%99%E7%81%AF%E6%85%A2%E9%80%9F%E9%97%AA%E7%83%81"><span class="toc-number">1.4.2.</span> <span class="toc-text"> 如果橙灯慢速闪烁</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9B%E5%85%A5-openwrt-%E5%90%8E%E5%8F%B0"><span class="toc-number">1.4.3.</span> <span class="toc-text"> 进入 openwrt 后台</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%B7%E5%9B%9E%E5%8E%9F%E5%8E%82"><span class="toc-number">1.5.</span> <span class="toc-text"> 刷回原厂</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%81%A2%E5%A4%8D%E5%8E%9F%E5%8E%82-uboot"><span class="toc-number">1.5.1.</span> <span class="toc-text"> 恢复原厂 UBoot</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%81%A2%E5%A4%8D%E5%8E%9F%E5%8E%82%E5%9B%BA%E4%BB%B6"><span class="toc-number">1.5.2.</span> <span class="toc-text"> 恢复原厂固件</span></a></li></ol></li></ol></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li><a href="/misc/windbg/" rel="bookmark" title="记一次用windbg分析蓝屏原因">记一次用windbg分析蓝屏原因</a></li><li class="active"><a href="/misc/ax3000t-openwrt/" rel="bookmark" title="小米AX3000T openwrt刷机——从入坑到刷回原厂">小米AX3000T openwrt刷机——从入坑到刷回原厂</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><img class="image" loading="lazy" decoding="async" itemprop="image" alt="zkz098" src="/assets/avatar.webp"><p class="name" itemprop="name">zkz098</p><div class="description" itemprop="description">一个萌新的学习笔记，商务合作请邮箱联系</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">39</span><span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">9</span><span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">16</span><span class="name">标签</span></a></div></nav><div class="social"><a target="_blank" rel="noopener" href="https://github.com/zkz098" class="item github" title="https://github.com/zkz098"><i class="ic i-github"></i></a><a href="mailto:zkz20081204@126.com" class="item email" title="mailto:zkz20081204@126.com"><i class="ic i-envelope"></i></a><a target="_blank" rel="noopener" href="https://stackoverflow.com/users/19941267/kaitaku" class="item stackoverflow" title="https://stackoverflow.com/users/19941267/kaitaku"><i class="ic i-stack-overflow"></i></a></div><div class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item dropdown"><a href="/about/" rel="section"><i class="ic i-user"></i>关于</a><ul class="submenu"><li class="item"><a href="/about/" rel="section"><i class="ic i-star"></i>关于本站</a></li><li class="item"><a href="/updata/" rel="section"><i class="ic i-cloud"></i>更新日志</a></li><li class="item"><a href="/admiration/" rel="section"><i class="ic i-coffee"></i>赞赏博主</a></li><li class="item"><a href="/privacy/" rel="section"><i class="ic i-list-alt"></i>隐私政策</a></li></ul></li><li class="item dropdown"><a href="#" onclick="return false;"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item"><a href="/statistics/" rel="section"><i class="ic i-clock"></i>统计</a></li><li class="item"><a href="/friends/" rel="section"><i class="ic i-heart"></i>友链</a></li><li class="item"><a target="_blank" href="https://www.travellings.cn/go.html" rel="section noopener"><i class="ic i-paper-plane"></i>开往</a></li></div></div></div></div><ul id="quick"><li class="prev pjax"></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/webbuild/hexo/hexoesm/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/webbuild/" title="分类于网站建设">网站建设</a></div><span><a href="/webbuild/nginx-modsec/">使用ModSecurity保护Nginx站点</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/python/" title="分类于python">python</a><i class="ic i-angle-right"></i><a href="/categories/python/easy/" title="分类于基础篇">基础篇</a></div><span><a href="/python/easy/pythone7/">python-递归、匿名函数和生成器</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/python/" title="分类于python">python</a><i class="ic i-angle-right"></i><a href="/categories/python/easy/" title="分类于基础篇">基础篇</a></div><span><a href="/python/easy/pythone9/">python-面向对象与异常捕获</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/golang/" title="分类于GO语言学习笔记">GO语言学习笔记</a></div><span><a href="/golang/go2/">go语言-语法和数据类型</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/python/" title="分类于python">python</a><i class="ic i-angle-right"></i><a href="/categories/python/app/" title="分类于应用篇">应用篇</a></div><span><a href="/python/app/pythonrsa/">python实现RSA加密文件</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/python/" title="分类于python">python</a><i class="ic i-angle-right"></i><a href="/categories/python/app/" title="分类于应用篇">应用篇</a></div><span><a href="/python/app/pythona1/">python-用企业微信机器人发天气预报</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/python/" title="分类于python">python</a><i class="ic i-angle-right"></i><a href="/categories/python/easy/" title="分类于基础篇">基础篇</a></div><span><a href="/python/easy/pythone3/">python-运算与分支</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/python/" title="分类于python">python</a><i class="ic i-angle-right"></i><a href="/categories/python/easy/" title="分类于基础篇">基础篇</a></div><span><a href="/python/easy/pythone8/">python-面向对象和生成器、迭代器</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/mc/" title="分类于MC">MC</a></div><span><a href="/mcipv6/">MC-IPV6联机</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/notice/">公告</a></span></li></ul></div><div class="rpost pjax"><h2>最新评论</h2></div></div><div class="status"><div class="copyright">© 2021 -<span itemprop="copyrightYear">2024</span><span class="with-love"><i class="ic i-sakura rotate"></i></span><span class="author" itemprop="copyrightHolder">zkz098 @ zkz098's blog</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i></span><span title="站点总字数">110k 字</span><span class="post-meta-divider"> | </span><span class="post-meta-item-icon"><i class="ic i-coffee"></i></span><span title="站点阅读时长">1:40</span></div><div class="powered-by">基于 <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a> &amp; Theme.<a target="_blank" rel="noopener" href="https://github.com/theme-shoka-x/hexo-theme-shokaX/">ShokaX</a></div><br><span style="display:inline;height:20px;line-height:20px;margin: 0px 0px 0px 5px; color:var(--grey-5);"><a target="_blank" rel="noopener" href="https://beian.miit.gov.cn">津ICP备2022001375号</a><br><a target="_blank" href="https://beian.mps.gov.cn/#/query/webSearch?code=12011402001353"><img loading="lazy" decoding="async" data-src="/assets/beian.webp" style="max-width: 2em;display:inline;" width="20" height="20" alt="备案">津公网安备 12011402001353号</a></span></div></div></footer></div><script data-config="" type="text/javascript">var LOCAL = {
    ispost: true,
        path: `misc/ax3000t-openwrt/`,
        favicon: {
        show: `（●´3｀●）やれやれだぜ`,
        hide: `(´Д｀)大変だ！`
    },
    search: {
        placeholder: "文章搜索",
        empty: "关于 「 ${query} 」，什么也没搜到",
        stats: "${time} ms 内找到 ${hits} 条结果"
    },
    copy_tex: false,
    katex: false,
    mermaid: false,
    audio: undefined,
    fancybox: true,
    nocopy: false,
    outime: true,
    template: `<div class="note warning"><p><span class="label warning">文章时效性提示</span><br>这是一篇发布于 {{publish}} 天前，最后一次更新在 {{updated}} 天前的文章，部分信息可能已经发生改变，请注意甄别。</p></div>`,
    quiz: {
        choice: `单选题`,
        multiple: `多选题`,
        true_false: `判断题`,
        essay: `问答题`,
        gap_fill: `填空题`,
        mistake: `错题备注`
    },
    ignores: [
        (uri) => uri.includes('#'),
        (uri) => new RegExp(LOCAL.path + '$').test(uri),
            []
    ]
};
</script><script>(function(c,l,a,r,i,t,y){
    c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
    t=l.createElement(r);t.async=true;t.src="https://www.clarity.ms/tag/"+i;
    y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
})(window, document, "clarity", "script", "acmqnsrk9g");</script><script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-JLLBM8ZTTD"></script><script data-pjax="data-pjax">window.dataLayer = window.dataLayer || [];
function gtag() {
    dataLayer.push(arguments);
}
gtag('js', new Date());
gtag('config', 'G-JLLBM8ZTTD');</script><script src="https://s4.zstatic.net/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha384-k6YtvFUEIuEFBdrLKJ3YAUbBki333tj1CSUisai5Cswsg9wcLNaPzsTHDswp4Az8" crossorigin="anonymous" fetchpriority="high"></script><script src="https://s4.zstatic.net/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2" crossorigin="anonymous" fetchpriority="high"></script><script src="/js/siteInit.js?v=0.4.14" type="module" fetchpriority="high" defer=""></script></body></html>